var documenterSearchIndex = {"docs":
[{"location":"ch02/#ch02","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"","category":"section"},{"location":"ch02/#リテラル","page":"第2回：▼ 複数のグラフを描く","title":"■ リテラル","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"リテラル（literal）とは， 「文字の並び」の通りに解釈される量をいう．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"1 や 1.1 はリテラルである． それぞれ，整数 1 ，小数 1.1 という値として評価される．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"note: Note\n計算機の中の小数は■ 浮動小数点数と呼ばれ，筆算の小数とは異なる．","category":"page"},{"location":"ch02/#文字列","page":"第2回：▼ 複数のグラフを描く","title":"■ 文字列","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"文字列とは，「文字の並び」として表される量である． 文字列のリテラルは，「二重引用符（double quotation mark） \" で囲まれた文字の並び」である．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"\"Hello world\"","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"文字列を連結するには，演算子 * を用いる．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"h = \"Hello\"\nw = \"world\"\nh * w\nh * \" \" * w","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"note: Note\n演算子 * は，数どうしに対して用いると乗算の意味になる．文字列どうしに用いると文字列の連結の意味になる．このように，同じ演算子 * に対して，複数の意味があり，適用する値の型（の組合せ）に応じて，適切な意味が選ばれて，計算される．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"数字を表す文字列を作るには，string 関数を用いる．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"string(0)\nstring(1)\nstring(1.1)","category":"page"},{"location":"ch02/#グラフに凡例を加える","page":"第2回：▼ 複数のグラフを描く","title":"▼ グラフに凡例を加える","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"前回 ▼ 式のグラフを描くでは，2つの直線を同じ座標上に描いた．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"using PyPlot\nplt.figure() #hide\n\nxs = -1:0.1:1\nys1=-1 * xs\nys2=2 * xs .- 1\nplt.plot(xs, ys1)\nplt.plot(xs, ys2)\nplt.savefig(\"ch02-leg0-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"(Image: )","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"グラフの凡例（はんれい，legend）は，グラフに描かれた曲線を区別するための説明である． PyPlotパッケージで書かれたグラフに凡例を追加するには，以下のようにする．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"まず，plot 関数に label=文字列 の形式で， その曲線に付与する文字列を指定する． すべての曲線を描いた後に，legend 関数を実行すると，グラフに凡例が追加される．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"using PyPlot\nplt.figure() #hide\n\nxs = -1:0.1:1\nys1=-1 * xs\nys2=2 * xs .- 1\nplt.plot(xs, ys1, label = \"y=-x\")\nplt.plot(xs, ys2, label = \"y=2x-1\")\nplt.legend()\nplt.savefig(\"ch02-leg1-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"(Image: )","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"比例関係 y = ax（ただし a = 1 2 3 4 5 ）のグラフを描こう．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"using PyPlot; #hide\nxs = -1:0.1:1\nplt.plot(xs, xs, label = \"y= x\")\nplt.plot(xs, 2 * xs, label = \"y=2x\")\nplt.plot(xs, 3 * xs, label = \"y=3x\")\nplt.plot(xs, 4 * xs, label = \"y=4x\")\nplt.plot(xs, 5 * xs, label = \"y=5x\")\nplt.legend()\nplt.savefig(\"ch02-leg2a-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"(Image: )","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"note: Note\n関数を呼び出すときに渡す値を，引数（ひきすう）または実引数（じつひきすう，argument）という．label=文字列 のように名前付きで渡す引数を，キーワード引数（keyword argument）という．","category":"page"},{"location":"ch02/#グラフに，水平線・垂直線を加える","page":"第2回：▼ 複数のグラフを描く","title":"▼ グラフに，水平線・垂直線を加える","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"式 y=ax は，すべて原点 (00) を通る． 水平線や垂直線の補助線を引いて，これを見やすくしよう．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"PyPlotパッケージに用意された関数 axhline(y) は， 縦座標 y で水平線（horizontal line）を描く． 最初の引数には，水平線を引く y 座標を指定する． キーワード引数 color=\"k\" は，黒色（black）で描くことを指定し，lw=0.5 は線幅（linewidth）を指定する．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"また，関数 axvline(x) は，横座標 x で垂直線（vertical line）を描く． 最初の引数には，垂直線を引く x 座標を指定する．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"上のプログラムに続けて","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"using PyPlot #hide\nplt.figure() #hide\nxs = -1:0.1:1 #hide\nplt.plot(xs, xs, label = \"y= x\") #hide\nplt.plot(xs, 2 * xs, label = \"y=2x\") #hide\nplt.plot(xs, 3 * xs, label = \"y=3x\") #hide\nplt.plot(xs, 4 * xs, label = \"y=4x\") #hide\nplt.plot(xs, 5 * xs, label = \"y=5x\") #hide\nplt.legend() #hide\n############# ; #hide\n# 水平線 y=0\nplt.axhline(0, color = \"k\", lw = 0.5)\n# 垂直線 x=0\nplt.axvline(0, color = \"k\", lw = 0.5)\nplt.savefig(\"ch02-leg2c-plot.svg\"); nothing; #hide\nnothing; # don't clear; #hide","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"(Image: )","category":"page"},{"location":"ch02/#グラフの描画範囲を指定する","page":"第2回：▼ 複数のグラフを描く","title":"▼ グラフの描画範囲を指定する","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"plot 命令は，すべての点を表示するように，描画範囲を拡大する．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"グラフの描画範囲を調整するには，関数 xlim と ylim を用いる．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"関数 xlim(a,b) は，x軸の描画を a から b の範囲に限定する．\n関数 ylim(a,b) は，y軸の描画を a から b の範囲に限定する．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"上のプログラムに続けて","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"# 描画範囲\nplt.xlim(-3, 3) # <=\nplt.ylim(-3, 3) # <=\nplt.savefig(\"ch02-leg2-e1-plot.svg\"); nothing; #hide\nnothing; # don't clear; #hide","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"(Image: )","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"別の描画範囲を指定してみる． 上のプログラムに続けて","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"# 描画範囲\nplt.xlim(-0.5, 0.5) # <=\nplt.ylim(-0.5, 0.5) # <=\nplt.savefig(\"ch02-leg2-e2-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"(Image: )","category":"page"},{"location":"ch02/#グラフのアスペクト比を等しくする","page":"第2回：▼ 複数のグラフを描く","title":"▼ グラフのアスペクト比を等しくする","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"「グラフの縦横の長さの比」をアスペクト比（aspect ratio）という．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"関数 plt.axes().set_aspect() は，アスペクト比を指定する命令である．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"何も指定しない場合は，plt.axes().set_aspect(\"auto\") であり， アスペクト比は適当に調整される （既定値 6.4:4.8 を元に調整される）．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"関数 plt.axes().set_aspect(\"equal\") は，アスペクト比を等しくする命令である． 通常は，前項の描画範囲の指定と同時に用いる．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"アスペクト auto の場合","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"using PyPlot\nplt.figure() #hide\n# plt.axes().set_aspect(\"auto\")  # PyPlot起動時は指定しなくてもよい\n\nxs = -1:0.2:1\nplt.plot(xs, xs)\nplt.xlim(-1, 1)\nplt.ylim(-1, 1)\nplt.axhline(0, color = \"k\", lw = 0.5)\nplt.axvline(0, color = \"k\", lw = 0.5)\nplt.savefig(\"ch02-leg2-e3-plot.svg\"); nothing; #hide\nnothing; # don't clear; #hide","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"(Image: )","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"アスペクト equal を指定する．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"using PyPlot #hide\nplt.figure() \nplt.axes().set_aspect(\"equal\")  # <==\nxs = -1:0.2:1 \nplt.plot(xs, xs)\nplt.xlim(-1, 1)\nplt.ylim(-1, 1) \nplt.axhline(0, color = \"k\", lw = 0.5) \nplt.axvline(0, color = \"k\", lw = 0.5) \nplt.savefig(\"ch02-leg2-e3a-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"(Image: )","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"note: Note\nアスペクト比の変更は，何かを描く前に実行するのが望ましい．何かを描いてから．set_aspect 命令を実行すると警告される場合がある．","category":"page"},{"location":"ch02/#練習：三角形の拡大縮小・平行移動を描画する","page":"第2回：▼ 複数のグラフを描く","title":"▲ 練習：三角形の拡大縮小・平行移動を描画する","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"第1回の■ ベクトルの各要素をスカラーで乗除すると■ ベクトルの各要素をスカラーで加減する では， 三角形を拡大縮小したり，平行移動したりした．それぞれの操作を行った三角形を同じ描画範囲で描け． 確かに拡大縮小または平行移動となっていることを観察せよ． 解答例 → ■ ベクトルに対する更新演算：乗除，■ ベクトルに対する更新演算：加減","category":"page"},{"location":"ch02/#for-文","page":"第2回：▼ 複数のグラフを描く","title":"■ for 文","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"Repeated Evaluation: Loops (section)","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"一つずつ要素を取り出すことができる量をコレクション（collection）という． ベクトルや範囲は，コレクションである．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"for 文を用いると，コレクションから要素を一つづつ取り出して， end 文が出現するまでの文を繰り返して，計算を行うことができる． この繰り返される部分をブロック（block）という． ブロックは，字下げ（indent）で表記される． が，字下げは見やすさのためだけである．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"繰り返しをループ（loop）ともいう．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"note: Note\nブロックは，for 文以外にも出現する（たとえば，■ if文）． 区別する場合は for ブロックとも称する．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"次の例では，変数 i にベクトルの各要素を入れて，end 文までの計算を繰り返す． コレクションの各要素が入る変数をループ変数（loop variable）という．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"for i in [1, 3, 2]\n   @show i   # 式 i の値を表示する\nend","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"@show i は，式 i の値を表示するマクロである．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"範囲を用いた for 文の例を示す．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"println(x) 関数は，x を印字してから，改行する命令である．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"for i = 1:5\n   println(string(i))\nend","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"\n## ■ 内包表記\n\n[Comprehensions (section)](https://docs.julialang.org/en/v1.8/manual/arrays/#man-comprehensions)\n\n[ 2x for x in [1:2] ]","category":"page"},{"location":"ch02/#for-文でパラメータを変えて，複数のグラフを描く","page":"第2回：▼ 複数のグラフを描く","title":"▼ for 文でパラメータを変えて，複数のグラフを描く","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"▼ グラフに凡例を加える の後半のプログラムを再掲する．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"using PyPlot\nplt.figure() #hide\n\nxs = -1:0.1:1\nplt.plot(xs, xs, label = \"y= x\")\nplt.plot(xs, 2 * xs, label = \"y=2x\")\nplt.plot(xs, 3 * xs, label = \"y=3x\")\nplt.plot(xs, 4 * xs, label = \"y=4x\")\nplt.plot(xs, 5 * xs, label = \"y=5x\")\nplt.legend()\nplt.savefig(\"ch02-leg2a-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"![](ch02-leg2a-plot.svg)","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"上のプログラムを，for 文を用いた繰り返しを用いて書き直してみよう．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"次の例の for 文では， ループ変数 a に，1, 2, 3, 4, 5 の値を順番に入れて，end までの文を実行する．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"繰り返しの中で xs は書き換えられないから，xs への代入は繰り返しの前に一度だけ行えばよい．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"using PyPlot\nplt.figure() #hide\n\nxs = -1:0.1:1\nfor a = 1:5\n   plt.plot(xs, a * xs)\nend\nplt.savefig(\"ch02-leg2b1-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"(Image: )","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"上のプログラムに凡例を加える前に，for文を使って，label=文字列 に与える文字列を作ってみよう．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"for a = 1:5\n   label1 = \"y=\" * string(a) * \"x\"\n   println(label1)\nend","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"では凡例を加えよう．plt.legend() は，繰り返しを抜けてから，一度だけ呼び出す．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"using PyPlot\nplt.figure() #hide\n\nxs = -1:0.1:1\nfor a = 1:5\n   label1 = \"y=\" * string(a) * \"x\"\n   plt.plot(xs, a * xs, label=label1)\nend\nplt.legend()\nplt.savefig(\"ch02-leg2b2-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"(Image: )","category":"page"},{"location":"ch02/#練習","page":"第2回：▼ 複数のグラフを描く","title":"▲ 練習","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"上のプログラムで，グラフのアスペクト比を等しくし，さらに補助線 x = 0 と y = 0 を追加せよ．","category":"page"},{"location":"ch02/#冪乗関数を描く","page":"第2回：▼ 複数のグラフを描く","title":"▼ 冪乗関数を描く","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"Base.:^ - Method","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"x^y は，冪（べき，power）ないし冪乗（べきじょう）x^y を表す． x を底（base），y を冪指数（exponent）という．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"2^2\n2^3\n2^4","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"スカラー c とベクトル v に演算子 .^ を適用した式 c .^ v は， 各々の冪指数に対して冪乗した値を要素とするベクトルを与える．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"底が整数の場合は .^ の前に空白を入れる．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"2 .^[2,3,4]","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"note: Note\n整数（底）の直後に .^ と書くと例外が出るので注意しよう．julia> 2.^[2,3,4]\nERROR: syntax: invalid syntax \"2.^\"; add space(s) to clarify","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"底が小数の場合は，その直後に .^ と書いてよい．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"2.0.^[2, 3, 4]","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"ベクトルとスカラーに演算子 .^ を適用した式 v .^ c は， 各々の底に対して冪乗した値を要素とするベクトルを与える．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"[2, 3, 4] .^ 2\n[2, 3, 4] .^ 2","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"範囲 v とスカラー c に演算子 .^ を適用した式 v .^ c は， 各々の底に対して冪乗した値を要素とするベクトルを与える．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"(2:4) .^ 2\n2:4 .^ 2    # `^`は `:` よりも優先度が高い","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"区間 x= 01 で，冪乗 y=x^a（ただし a = 2345 ）のグラフを描こう．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"plt.axes().set_aspect(\"equal\") は， グラフの縦横比（アスペクト比 aspect ratio）を等しくする命令である．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n\nxs = 0:0.1:1\nplt.plot(xs, xs .^ 2)\nplt.plot(xs, xs .^ 3)\nplt.plot(xs, xs .^ 4)\nplt.plot(xs, xs .^ 5)\nplt.savefig(\"ch02-po1-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"(Image: )","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"for 文を使って，繰り返しの処理をまとめる．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"plt.axes().set_aspect(\"equal\") は，グラフを書く前に一度だけ実行する．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"区間を x= 02 に拡大して，凡例を追加しよう．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\nxs = 0:0.05:2\nfor a = 2:5\n   plt.plot(xs, xs .^ a, label = \"y=x^\" * string(a))\nend\nplt.legend()\n# 描画範囲を設定\nplt.xlim(-0.05, 2)\nplt.ylim(-0.05, 2)\nplt.savefig(\"ch02-po2-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"(Image: )","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"冪乗 y=x^a （ただし a = 2 3 4 5 はすべて点 (11) を通る． 直線 x = 1 と y = 1 を付与して，これを見やすくしよう．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n\n# 間隔を狭めた\nxs = 0:0.05:2\nfor a = 2:5\n   plt.plot(xs, xs .^ a, label = \"y=x^\" * string(a))\nend\nplt.legend()\n# 描画範囲を設定\nplt.xlim(-0.05, 2)\nplt.ylim(-0.05, 2)\n# 水平線 y=1\nplt.axhline(1, color = \"k\", lw = 0.5)\n# 垂直線 x=1\nplt.axvline(1, color = \"k\", lw = 0.5)\nplt.savefig(\"ch02-po3-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"(Image: )","category":"page"},{"location":"ch02/#ローレンツ関数を描く","page":"第2回：▼ 複数のグラフを描く","title":"▼ ローレンツ関数を描く","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"Lorentzian Function","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"以下の曲線を， ローレンツ関数（Lorentzian function）という．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"begingathered\ny = dfracdfracgamma2(x-x_0)^2+left(dfracgamma2right)^2 \ngamma  0\nendgathered","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"パラメータを x_0 = 0 gamma = 2 のように選ぶと， 以下のように簡単な形となる．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"y = dfrac1x^2+1","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"まず，この曲線を描いてみる．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"分母 x^2+1 を計算するには，「ベクトル」 xs.^2 にスカラー 1 を加算する． このとき，+ の前にピリオド . を付与した ドット演算子（dot operator）.+ を用いる．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"xs = -3:0.5:3\nxs.^ 2 .+ 1","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"「スカラー」1 を「ベクトル」 (xs^2+1) の各要素で割る には，/ の前にピリオド . を付与したドット演算子 ./ を用いる．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"1 ./ (xs.^ 2 .+ 1)","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"上のグラフを描こう．xs の刻みを小さくしておく．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"using PyPlot\nplt.figure() #hide\n\nxs = -3:0.1:3\nys = 1 ./ (xs.^ 2 .+ 1)\nplt.plot(xs, ys)\nplt.savefig(\"ch02-lo1-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"(Image: )","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"以下のように，パラメータ gamma を追加する．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"y = dfracdfracgamma2x^2+left(dfracgamma2right)^2","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"3つのパラメータ gamma=05 1 2 について，この曲線を描く．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"using PyPlot\nplt.figure() #hide\n\nxs = -3:0.05:3\ngamma = 0.5\nys = (gamma / 2) ./ (xs.^ 2 .+ (gamma / 2)^2)\nplt.plot(xs, ys, label = gamma)\ngamma = 1.0\nys = (gamma / 2) ./ (xs.^ 2 .+ (gamma / 2)^2)\nplt.plot(xs, ys, label = gamma)\ngamma = 2.0\nys = (gamma / 2) ./ (xs.^ 2 .+ (gamma / 2)^2)\nplt.plot(xs, ys, label = gamma)\nplt.legend()\nplt.savefig(\"ch02-lo2-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"(Image: )","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"gamma の値が変わっても，それぞれの曲線を描くための命令は変わらない． for 文を用いて，gamma の値を変えてみよう（結果のグラフは前出のため省略）．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"using PyPlot\nplt.figure() #hide\n\nxs = -3:0.05:3\nfor gamma in [0.5, 1.0, 2.0]\n   local ys=(gamma / 2) ./ (xs.^ 2 .+ (gamma / 2)^2)\n   plt.plot(xs, ys, \n      label = gamma)\nend\nplt.legend()\nplt.savefig(\"ch02-lo3-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"note: Note\n本章のプログラムを順に打ち込みながら対話すると，変数 ys が定義済みである．上のコードの forブロックの最初の文 local ys は，forブロックの外で定義された（＝全域）変数 ys の値を変更するのではなく，forブロック内部のみで定義される（＝局所）変数 ys を用いることをJuliaに指示する．Julia 1.6では，localを付けなくても上のプログラムは動作するが警告メッセージが表示される．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"ローレンツ関数には，次の性質がある．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"点 x = 0 で 最大値 y = dfrac2gamma\n点 x = pmdfracgamma2 で，最大値の半分 y = dfrac12dfrac2gamma","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"2つ目の性質を観察するため，最大値に対する比を描いてみる．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"using PyPlot\nplt.figure() #hide\n\nxs = -3:0.05:3\nfor gamma in [0.5, 1.0, 2.0]\n   local ys=(gamma / 2) ./ (xs.^ 2 .+ (gamma / 2)^2) / (2 / gamma)\n   plt.plot(xs,ys,\n      label = gamma,\n   )\nend\nplt.legend()\nplt.axhline(1 / 2, color = \"k\", lw = 0.5)\nplt.savefig(\"ch02-lo4-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"(Image: )","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"note: Note\nplot 関数の文は，複数の行にまたがっていることに注目したい．式や文が次の行に続くことを示す記法は，とくに用意されていない．構文が行末で終わらなければ，次の行まで読みにいく．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"パラメータ gamma は，半値全幅（Full Width of Half Maximum, FWHM）と呼ばれる． gamma を非常に小さくすると，Diracのデルタ関数（Dirac delta function）の近似（の1つ）となる．","category":"page"},{"location":"ch02/#ドット演算子","page":"第2回：▼ 複数のグラフを描く","title":"■ ドット演算子","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"前節 ▼ ローレンツ関数を描くでは， コレクションとスカラーとの間の加減除算で，.+ ，.- ，./ のように， 半角文字のピリオド（ドッド）で始まるドット演算子（dot operator）を用いた． ドット演算子は，「コレクションの各要素に対して演算する（element-wise operation）」という意味を持つ．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"加減乗除のドット演算子を適用される値の 一方がコレクション，他方がスカラーの場合には， 「スカラーをコレクションと同じ寸法のベクトルに拡張して」から， 要素どうしの演算を行う仕組みになっている． この仕組みを「ブロードキャスト（broadcast）」と呼ぶ．","category":"page"},{"location":"ch02/#コレクションとスカラーとの四則演算（復習）","page":"第2回：▼ 複数のグラフを描く","title":"▼ コレクションとスカラーとの四則演算（復習）","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"コレクションをスカラーで乗除するには，演算子 *，/ を用いる．ドット演算子を使う必要はない．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"・ベクトルをスカラーで乗除する → ■ ベクトルの各要素をスカラーで乗除する","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"・範囲をスカラーで乗除する → ■ 範囲の各要素をスカラーで乗除する","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"(2:2:4) * 2\n(2:2:4) / 2","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"結果も範囲となる（賢い！）．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"note: Note\n注意：括弧をつけないと，解釈が異なる．範囲の演算子 : は，四則演算の演算子よりも優先度が低い．2:2:(4 * 2) と解釈される．julia> 2:2:4 * 2\n2:2:8","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"コレクションをスカラーで加減するには，演算子 .+，.- を用いる．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"・ベクトルをスカラーで加減する → ■ ベクトルの各要素をスカラーで加減する","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"・範囲をスカラーで加減する → ■ 範囲の各要素をスカラーで加減する","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"2:2:4 .+ 2\n2:2:4 .- 2","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"note: Note\n注意：ドットをつけないと，解釈が異なる．範囲の演算子 : は，四則演算の演算子よりも優先度が低い．2:2:(4 + 2) と解釈される．julia> 2:2:4 + 2\n2:2:6ドットの付け忘れが怖いなら，範囲を括弧で囲むとよい．julia> (2:2:4) .+ 2\n4:2:6","category":"page"},{"location":"ch02/#コレクションの対応する要素どうしの加減乗除","page":"第2回：▼ 複数のグラフを描く","title":"▼ コレクションの対応する要素どうしの加減乗除","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"同じ寸法を持つコレクションどうしに対してドット演算子を用いると， 対応する要素どうしで演算を行う． 要素の数が異なると，例外（exception, エラー）が発生する．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"・ベクトル（の対応する要素）どうしの加減算","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"xs = [1, 2, 2, 1]\nys = [1, 1, 3, 1]\nxs .+ ys\nxs .- ys","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"・範囲（の対応する要素）どうしの加減算","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"xs = 100:100:300\nys = 1:2:5\nxs .+ ys\nxs .- ys","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"結果も範囲となる（賢い！）．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"・範囲とベクトル（の対応する要素どうし）の加減算","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"xs = 100:100:300\nys = [1,3,5]\nxs .+ ys\nxs .- ys","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"1つ上の「範囲どうしの加算」の例と比較せよ．範囲 1:2:5 とベクトル [1,3,5] は，実質同じ値であるが，範囲とベクトルの加減算はベクトルになる．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"・ベクトル（の対応する要素）どうしの乗除算","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"xs = [1, 2, 4, 3]\nys = [2, 1, 2, 1]\nxs .* ys\nxs ./ ys","category":"page"},{"location":"ch02/#更新演算子","page":"第2回：▼ 複数のグラフを描く","title":"■ 更新演算子","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"Updating operators","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"変数に四則演算などを行って，元の変数に再代入する場合には， 更新演算子（updating operator）を用いるとよい． たとえば，加算の更新演算子は+記号の直後に = の文字を付与する．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"x = 1\n# 再代入\nx = x + 1\n# 更新演算子\nx += 1","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"スカラー変数に対する演算子 +，-，*，/，^ に対して， 更新演算子 +=，-=，*=，/=，^= が用意されている．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"以下の例は，変数 gamma を 2 で繰り返し割り算する．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"gamma = 2\nfor i = 1:5\n   global gamma\n   gamma /= 2\n   @show gamma\nend","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"更新演算子 /= を利用して，ローレンツ関数のパラメータ gamma を変えてみる．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"for 文の次の global gamma に注目してほしい． 対話型で実行する場合，for 文の外側で定義された変数の値を変更することは， 安全のために通常禁止されている．これを可能とするのが global 文である．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"using PyPlot\nplt.figure() #hide\nxs = -3:0.05:3\ngamma = 2\nfor i = 1:5\n   global gamma\n   local ys=(gamma / 2) ./ (xs.^ 2 .+ (gamma / 2)^2) / (2 / gamma)\n   plt.plot(\n      xs,ys, \n      label = gamma,\n   )\n   gamma /= 2\nend\nplt.legend()\naxhline(1 / 2, color = \"k\", lw = 0.5)\nplt.savefig(\"ch02-lo5-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"(Image: )","category":"page"},{"location":"ch02/#練習-2","page":"第2回：▼ 複数のグラフを描く","title":"▲ 練習","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"ローレンツ関数において，パラメータ x_0 を変えたグラフを作成せよ． for 文を使う方法，更新演算子を使う方法の，2つで描いてみよ．","category":"page"},{"location":"ch02/#ベクトルに対する更新演算：乗除","page":"第2回：▼ 複数のグラフを描く","title":"■ ベクトルに対する更新演算：乗除","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"ベクトルを保持する変数に対しても，更新演算が用意されている．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"・ベクトルを保持する変数を，スカラー倍して更新する","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"ベクトルをスカラー倍して更新するには，更新演算子 *= を用いる． 式 v *= c は，v = v * c と同じ動作をする．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"xs = [1, 2, 2, 1]\nxs *= 2\nxs","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"前節の三角形を描く例題で，更新演算子 *= を用いて，図形を繰り返し拡大してみよう．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n\nxs = [1.0, 2.0, 2.0, 1.0]\nys = [1.0, 1.0, 3.0, 1.0]\nfor i = 1:5\n   global xs, ys\n   plt.plot(xs, ys)\n   xs *= 1.2\n   ys *= 1.2\nend\nplt.xlim(0, 7)\nplt.ylim(0, 7)\nplt.savefig(\"ch02-tri-expand-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"(Image: )","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"ベクトルをスカラーで除して更新するには， 更新演算子 /= を用いる． 式 v /= c は，v = v / c と同じ動作をする．","category":"page"},{"location":"ch02/#ベクトルに対する更新演算：加減","page":"第2回：▼ 複数のグラフを描く","title":"■ ベクトルに対する更新演算：加減","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"ベクトルにスカラーを加減して更新するには，更新演算子 .+=または .-= を用いる． 式 v .+= c は，v = v .+ c と同じ動作をする．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"xs = [1, 2, 2, 1]\nxs .+= 1\nxs","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"前節の三角形を描く例題で，更新演算子 .+= を用いて， 図形を繰り返し並行移動してみよう．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"for 文の中で，変数 xs と ys を更新するので，global xs, ys の文が必要である．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n\nxs = [1.0, 2.0, 2.0, 1.0]\nys = [1.0, 1.0, 3.0, 1.0]\nfor i = 1:5\n   global xs, ys\n   plt.plot(xs, ys)\n   xs .+= 0.5\n   ys .+= 0.5\nend\nplt.xlim(0, 6)\nplt.ylim(0, 6)\nplt.savefig(\"ch02-tri-shift-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"(Image: )","category":"page"},{"location":"ch02/#ベクトルとコレクションとの更新演算","page":"第2回：▼ 複数のグラフを描く","title":"■ ベクトルとコレクションとの更新演算","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"ベクトルとコレクションに対する演算にも更新演算子が用意されている． ベクトル v とコレクション w に対して， 式 v .+= w は，v = v .+ w と同じ動作をする．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"xs = [1, 2, 2, 1]\nys = [1, 1, 3, 1]\nxs .+= ys\nxs\nxs .-= ys\nxs","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"同様に，式 v .*= w は，v = v .* w と同じ動作をする．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"xs = [1, 2, 2, 1]\nys = [1, 1, 3, 1]\nxs .*= ys\nxs\nxs ./= ys\nxs","category":"page"},{"location":"ch02/#練習-3","page":"第2回：▼ 複数のグラフを描く","title":"▲ 練習","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"ベクトルの要素どうしの乗算 .* と for文を用いて，いくつかの冪乗関数のグラフを描いてみよ．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"さらに，ベクトルの要素どうしの乗算の代わりに，ベクトル要素の乗算と更新演算子 *= も使ってみよ．","category":"page"},{"location":"ch02/#今回のまとめ","page":"第2回：▼ 複数のグラフを描く","title":"★ 今回のまとめ","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のグラフを描く","title":"第2回：▼ 複数のグラフを描く","text":"文字列\nfor 文\nグラフに凡例を加える\n冪乗関数\nローレンツ関数\n更新演算子\nドット演算子\nコレクション＝ベクトル・範囲\nコレクションの対応する要素どうしの加減乗除","category":"page"},{"location":"ch01/#ch01","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"","category":"section"},{"location":"ch01/#対話形式で使う","page":"第1回：▼ 簡単なグラフを描く","title":"■ 対話形式で使う","text":"","category":"section"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"本文では，対話形式で，Julia を利用する．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"Juliaをコマンドラインから利用している場合は， プロンプト julia> が印字され，利用者の入力を待っている．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"命令を打ち込み，ENTER キーを押すと， その命令を計算（評価）した結果が印字される．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"1","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"上の例では，1 という文字の並びから， 1 という数を内部で作成し， それを計算の結果として印字したのである．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"計算機側から見ると， 利用者の入力を読み込み（Read）， 入力された命令を評価し（Eval）， その結果を印字する（Print）ことを，繰り返す（Loop）． この４つの頭文字をとって， 対話型利用のことを REPL とも呼ぶ．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"Jupyter notebookを用いる場合には， Code cellが表示されている． ここに命令を打ち込み，SHIFT + ENTER キーを押すと， その命令を評価した結果が出力される．","category":"page"},{"location":"ch01/#電卓として使う","page":"第1回：▼ 簡単なグラフを描く","title":"■ 電卓として使う","text":"","category":"section"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"数と数との四則演算をしてみよう．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"加算には + ， 減算には - の文字を使う． 乗算には *（アスタリスク asterisk と読む）， 除算には /（スラッシュ slash と読む）の文字を用いる．（なお % は残余を表す→ ■ 残余 rem と整商 div ）","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"1 + 2\n3 * 4","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"数式と同じように，乗算と除算は，加算・減算に優先する． 計算の順序を変えるには，括弧 ( と ) との組を用いる","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"2 + 3 * 4\n(2 + 3) * 4","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"除算の結果は，小数となる．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"2 / 2\n1 / 3\n5 / 2","category":"page"},{"location":"ch01/#変数に値を代入する","page":"第1回：▼ 簡単なグラフを描く","title":"■ 変数に値を代入する","text":"","category":"section"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"値には，名前（名札，ラベル）をつけることができる． この名前を変数（variable）といい，名前をつける操作を「値を変数に代入する（assign）」という． 変数には，色々な種類（「型」）の値を代入できる．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"変数を評価すると，変数の値となる．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"# 変数 x に 値 2 を代入する\nx = 2\n# 変数 x の値を用いる\nx + 1\n# 変数 x に 別の値 3 を再代入する\nx = 3","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"# はコメントである． # から行末までの文字は，すべて無視される．","category":"page"},{"location":"ch01/#変数名の規則","page":"第1回：▼ 簡単なグラフを描く","title":"■ 変数名の規則","text":"","category":"section"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"Allowed Variable Names (section)","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"変数の名前（変数名）は，以下のようにつける．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"変数名の最初の文字は， 半角のアルファベット（ a から z まで，A から Z まで）， または，下線（アンダースコア _ ）のいずれかでなければならない． 変数の2文字目以降は，さらに，半角の数字（ 0 から 9 ）， または，半角の感嘆符 ! を含めることができる．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"半角文字とは「かな漢字変換機能」を用いずに， キーボードから打ち込める文字と考えてよい．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"変数名には，漢字やギリシャ文字などを使うことができるが， ここでは説明を省略する．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"Stylistic Conventions (section)","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"今後出現する，定数，型，関数，マクロ，モジュール，パッケージの名前も，変数名の約束と同じである． ただし，慣習として，以下のように使い分ける．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"変数名は小文字で始める．\n型，モジュール，パッケージの名前は大文字で始める．\n関数やマクロの名前は小文字で始める．下線（アンダースコア _)は用いない．","category":"page"},{"location":"ch01/#ベクトル","page":"第1回：▼ 簡単なグラフを描く","title":"■ ベクトル","text":"","category":"section"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"角括弧 [ と ] との間に，半角文字のカンマ , で区切って 数を並べたものを，（数の）ベクトルという．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"ベクトルは，縦に印字される（列ベクトル，column vector）．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"[1, 3, 2]","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"変数に，ベクトルを代入しよう．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"xs = [1, 2, 2, 1]\nys = [1, 1, 3, 1]","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"note: Note\n本文の筆者は，（ベクトルなど）複数の値を内部に含むデータに対する変数の名前を「英語の複数形の名詞」とすることが多い（多くの場合，末尾を s で終える）．そのデータの各要素を表す変数の名前を単数形とする．（大文字は定数などを表す約束だから）大文字と小文字で，ベクトルなどとその要素を区別することは避けた方がよい．","category":"page"},{"location":"ch01/#三角形を描く","page":"第1回：▼ 簡単なグラフを描く","title":"▼ 三角形を描く","text":"","category":"section"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"「パッケージ」とは，関連する関数，定数，変数などをまとめたものである．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"PyPlot パッケージは， グラフを描くためのパッケージの一つである．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"パッケージを用いるには，using <<パッケージ名>> を起動し，パッケージを読み込んでおく．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"PyPlot パッケージに含まれる関数 plot は，グラフを描くための一般的な関数である．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"plot(xs,ys) の形で用いると， ベクトル xs , ys から一つづつ数を取り出し． それらを各々 x 座標，y 座標とする点を打つことを命令する．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"通常は，plt.plot() の形で用いる． plt は，図の寸法や，グラフの軸を含むデータ（[オブジェクト])である．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"using Conda;\nConda.add(\"matplotlib\");\nENV[\"PYTHON\"] = \"\"\nimport Pkg;\nPkg.build(\"PyCall\");\nusing PyCall;\n# ENV[\"MPLBACKEND\"] = \"qt5agg\"\nENV[\"MPLBACKEND\"] = \"Agg\"   # no-gui\nPkg.build(\"PyPlot\");\nusing PyPlot\nrcParams = PyPlot.PyDict(PyPlot.matplotlib.\"rcParams\");\nrcParams[\"figure.figsize\"]=(6.4,4.8);\n# rcParams[\"font.family\"] = \"TakaoPGothic\";\nrcParams[\"font.size\"] = 14;\nrcParams[\"figure.subplot.left\"] = 0.17;\nrcParams[\"figure.subplot.bottom\"] = 0.15;\nrcParams[\"figure.subplot.right\"] = 0.85;\nrcParams[\"axes.linewidth\"] = 1.5;\nrcParams[\"legend.framealpha\"] = 0.0;\nrcParams[\"xtick.major.width\"] = 1.5;\nrcParams[\"ytick.major.width\"] = 1.5;\nrcParams[\"xtick.minor.width\"] = 1.5;\nrcParams[\"ytick.minor.width\"] = 1.5;\nrcParams[\"xtick.minor.width\"] = 1.5;\nrcParams[\"ytick.minor.width\"] = 1.5;\nrcParams[\"xtick.major.size\"] = 12;\nrcParams[\"ytick.major.size\"] = 12;\nrcParams[\"xtick.minor.size\"] = 8;\nrcParams[\"ytick.minor.size\"] = 8;","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"# PyPlot パッケージの読み込み\nusing PyPlot\nplt.figure() #hide\n\nxs = [1, 2, 2, 1]\nys = [1, 1, 3, 1]\n# 描画\nplt.plot(xs, ys)\nplt.savefig(\"ch01-tri-plot.svg\") #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"(Image: )","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"note: Note\nplt は，PyPlot パッケージで定義された変数である．変数 plt を書き換えてしまうと，描画の指令が期待通りにならなくなる可能性が高い．変数名が定義済であるかどうかを調べるために，変数の値を出力することを勧める．何か定義が出てきたら定義済であるので，その名前を変数や関数などの名前として使うことは避ける．julia> using PyPlot\n\njulia> plt\nPyObject <module 'matplotlib.pyplot' from '/Users/hs/.julia/conda/3/lib/python3.7/site-packages/matplotlib/pyplot.py'>","category":"page"},{"location":"ch01/#練習","page":"第1回：▼ 簡単なグラフを描く","title":"▲ 練習","text":"","category":"section"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"xs や ys の値を変えて，別の図形を表示してみよ．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"xs と ys の要素の「数」が等しくない場合は，どうなるか？ 試してみよ．","category":"page"},{"location":"ch01/#ベクトルの各要素をスカラーで乗除する","page":"第1回：▼ 簡単なグラフを描く","title":"■ ベクトルの各要素をスカラーで乗除する","text":"","category":"section"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"ベクトル v とスカラー c に演算子 * を適用 (apply) した 式 v * c は，ベクトル v の各要素にスカラー c を乗じたベクトルを与える．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"スカラー c とベクトル v に演算子 * を適用した 式 c * v は，v の各要素にスカラーc を乗じたベクトルを与える． つまり，式  v * c と c * v の結果は，等価 (equivalent)である．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"xs = [1, 2, 2, 1] #hide\nys = [1, 1, 3, 1] #hide\nxs * 2\n2 * xs","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"ベクトル v とスカラー c に演算子 / を適用した 式 v / c は，ベクトル v の各要素をスカラー c で除したベクトルを与える．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"xs = [1, 2, 2, 1]  #hide\nys = [1, 1, 3, 1]  #hide\nxs / 2","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"先に描いた三角形を拡大してみよう．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"# PyPlot パッケージの読み込み\nusing PyPlot\nplt.figure() #hide\n\nxs = [1, 2, 2, 1]\nys = [1, 1, 3, 1]\n# 描画\nplt.plot(xs, ys)\n# それぞれ 2 倍する\nxs2 = 2*xs\nys2 = 2*ys\n# 描画\nplt.plot(xs2, ys2)\nplt.savefig(\"ch01-tri-plot_mult.svg\") #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"(Image: )","category":"page"},{"location":"ch01/#ベクトルの各要素をスカラーで加減する","page":"第1回：▼ 簡単なグラフを描く","title":"■ ベクトルの各要素をスカラーで加減する","text":"","category":"section"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"ベクトル v とスカラー c に演算子 .+ を適用した式 v .+ c は， ベクトル v の各要素にスカラー c を加算した要素からなるベクトルを与える． 同様に，式 v .- c は，v の各要素から c を減算した要素からなるベクトルを与える． 演算子 + や -の前のピリオド . は， 「各要素に対する演算 （element-wise operation）」を意味する． （第2回 ■ ドット演算子 で再度説明する）．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"xs = [1, 2, 2, 1] #hide\nys = [1, 1, 3, 1] #hide\nxs .+ 2\nxs .- 2","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"先に描いた三角形を平行移動してみよう．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"# PyPlot パッケージの読み込み\nusing PyPlot\nplt.figure() #hide\n\nxs = [1, 2, 2, 1]\nys = [1, 1, 3, 1]\n# 描画\nplt.plot(xs, ys)\n# それぞれ1を加える\nxs2 = xs .+ 1\nys2 = ys .+ 1\n# 描画\nplt.plot(xs2, ys2)\nplt.savefig(\"ch01-tri-plot_add.svg\") #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"(Image: )","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"一つ前のグラフと同じように見えるが，描画範囲が異なることに注意せよ．同じ描画範囲に設定して比較したい場合は， ▼ グラフの描画範囲を指定すると▼ グラフのアスペクト比を等しくする を参照せよ．→ ▲ 練習：三角形の拡大縮小・平行移動を描画する","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"note: Note\nピリオドが付かない演算子 +や - を用いると，例外（exception, エラー）が発生するので注意しよう．julia> xs + 2\nERROR: MethodError: no method matching +(::Array{Int64,1}, ::Int64)","category":"page"},{"location":"ch01/#範囲","page":"第1回：▼ 簡単なグラフを描く","title":"■ 範囲","text":"","category":"section"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"Base.:: — Function","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"二つ，または，三つの数字を半角文字のコロン（ : ）で区切ったデータは， 有限の（＝要素の数が定まった）等差数列（arithmetic sequence）を 表す．このようなデータの種類を 範囲型（range type）という．範囲型を持つデータを 範囲 （range）と呼ぶ．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"note: Note\n「型（type，かた）」とは「データの種類」である．詳しくは，後の節で述べる．→ ■ 型","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"二つの数をコロン（ : ）で区切った量 a:b は， a から 1 づつ増やして b を超えるまでの数からなる等差数列である． 三つの数をコロンで区切った量 a:c:b は， a から c づつ増やして b を超えるまでの数からなる等差数列である． c は，等差（common difference）である．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"note: Note\n一定間隔 c を「等差（common difference）」と本文では呼ぶ．数学では「公差」と呼ばれることもあるが，工学での「公差」は tolerance を意味することが多い．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"1:5\nxs = 0:0.1:1","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"範囲から各要素を取り出してベクトルに変換するには，collect 関数を用いる．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"xs = 0:0.1:1 #hide\ncollect(xs)","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"等差 c は，負の値でもよい． この場合，a:c:b は，a から c づつ増やして b を「下回る」までの数からなる等差数列となる．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"xs = 10:-1:0\ncollect(xs)","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"等差 c が負で，a  b だと，要素は0個になる．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"xs = 2:-1:5\ncollect(xs)","category":"page"},{"location":"ch01/#範囲の各要素をスカラーで乗除する","page":"第1回：▼ 簡単なグラフを描く","title":"■ 範囲の各要素をスカラーで乗除する","text":"","category":"section"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"範囲 v とスカラー c に演算子 * を適用した式 v * c は， 範囲 v の各要素にスカラー c を乗じた結果に相当する範囲を与える． スカラー c と範囲 v に演算子 * を適用した式 c * v も同じ結果を与える．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"xs = 0:2:10\n# 各要素を2倍する\nxs * 2\n2 * xs","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"範囲 v とスカラー c に演算子 / を適用した式 v / c は， 範囲 v の各要素をスカラー c で除した結果に相当する範囲を与える．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"xs = 0:2:10 #hide\n# 各要素を2で除す\nxs / 2","category":"page"},{"location":"ch01/#範囲の各要素をスカラーで加減する","page":"第1回：▼ 簡単なグラフを描く","title":"■ 範囲の各要素をスカラーで加減する","text":"","category":"section"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"範囲 v とスカラー c に演算子 .+ を適用した式 v .+ c は， 範囲 v の各要素にスカラー c を加算した要素からなる範囲を与える． 同様に，式 v .- c は，v の各要素から c を減算した要素からなる範囲を与える． 演算子 + や -の前のピリオド . は， 「各要素に対する演算 （element-wise operation）」を意味する． （第2回 ■ ドット演算子 で再度説明する）．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"xs = 0:2:10\n# 各要素に1を加える\nxs .+ 1\n# 各要素から1を減じる\nxs .- 1","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"この場合， ピリオドが付かない演算子 + や - を用いると， 例外（exception, エラー）が発生する．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"julia> xs + 1\nERROR: MethodError: no method matching +(::StepRange{Int64, Int64}, ::Int64)","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"note: Note\n同じ演算子 .+，.- が，ベクトルと範囲という異なる種類（■ 型）の値に対して，同じような演算を実行するように，うまく設計されているのである．このような例は，Juliaの随所で観察される．例→ ▼ コレクションとスカラーとの四則演算（復習），▼ コレクションの対応する要素どうしの加減乗除","category":"page"},{"location":"ch01/#式のグラフを描く","page":"第1回：▼ 簡単なグラフを描く","title":"▼ 式のグラフを描く","text":"","category":"section"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"plot 関数に対して， 同じ寸法の二つのベクトルまたは範囲 xs，ys を渡すと，  xs , ys から一つづつ要素を取り出し， これらを x y 座標とする点どうしを結んで，図形が描かれるのであった．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"式のグラフを描くには，x 座標の値 xs から計算した式の値を，y 座標の値 ys とすればよい．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"二つの直線 y=-x と y=2x-1 のグラフを描いてみよう．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"# PyPlot パッケージの読み込み\nusing PyPlot\nplt.figure() #hide\n\nxs = -1:0.1:1\n# 描画\nys1 = -1 * xs\nplt.plot(xs, ys1)\nys2 = 2 * xs .- 1\nplt.plot(xs, ys2)\nplt.savefig(\"ch01-graph-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"(Image: )","category":"page"},{"location":"ch01/#練習-2","page":"第1回：▼ 簡単なグラフを描く","title":"▲ 練習","text":"","category":"section"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"別の直線を描いてみよ．","category":"page"},{"location":"ch01/#今回のまとめ","page":"第1回：▼ 簡単なグラフを描く","title":"★ 今回のまとめ","text":"","category":"section"},{"location":"ch01/","page":"第1回：▼ 簡単なグラフを描く","title":"第1回：▼ 簡単なグラフを描く","text":"対話形式の使い方\n数の四則演算\nPyPlotパッケージを用いた図形とグラフの描画\nベクトルと等差数列\nベクトル・範囲の各要素のスカラー乗除\nベクトル・範囲の各要素のスカラー加減","category":"page"},{"location":"ch05/#ch05","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"","category":"section"},{"location":"ch05/#数の大小比較","page":"第5回：■ 条件式・■ 条件分岐","title":"■ 数の大小比較","text":"","category":"section"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"Numeric Comparisons (section)","category":"page"},{"location":"ch05/#値が等しい・異なる","page":"第5回：■ 条件式・■ 条件分岐","title":"値が等しい・異なる","text":"","category":"section"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"Base.:== — Function\nBase.:!= — Function","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"演算子 == は，a == b のように用いて，値が等しいか否か判定する． 演算子 != は，値が異なるか否か判定する． 成立すれば（真ならば） true が， 成立しなければ（偽ならば） false が結果となる．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"1 == 1\n1 == 2\n1 != 1\n1 != 2","category":"page"},{"location":"ch05/#より大きい","page":"第5回：■ 条件式・■ 条件分岐","title":"より大きい","text":"","category":"section"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"Base.:> - Function\nBase.:>= — Function","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"演算子 > は，a > b のように用いて，a の値が b の値よりも大きいか否か． 演算子 >= は，a >= b のように用いて，a の値が b の値以上であるか否か判定する．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"2 > 1\n2 >= 1\n2 >= 2","category":"page"},{"location":"ch05/#より小さい","page":"第5回：■ 条件式・■ 条件分岐","title":"より小さい","text":"","category":"section"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"Base.:< - Function\nBase.:<= - Function","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"演算子 < は，a < b のように用いて，a の値が b の値よりも小さいか否か． 演算子 <= は，a <= b のように用いて，a の値が b の値以下であるか否か判定する．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"2 < 1\n2 <= 1\n2 <= 2","category":"page"},{"location":"ch05/#論理型","page":"第5回：■ 条件式・■ 条件分岐","title":"■ 論理型","text":"","category":"section"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"比較演算子の結果は true または false のどちらかである． この二つの値からなるデータの種類を論理型（logical type）という．","category":"page"},{"location":"ch05/#if文","page":"第5回：■ 条件式・■ 条件分岐","title":"■ if文","text":"","category":"section"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"Conditional Evaluation (section)","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"if文は，直後に論理式をとる． 論理式の値が true なら，if文の次の文から，end , else , elseif が出現するまでの文を実行する．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"条件が成り立つときだけに実行される部分を「 if ブロック（block）」という．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"ブロックは，字下げ（indent） で表記される．が，字下げは見やすさのためだけである．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"x = 1\ny = 2\nif x < y\n   println(\"x は y より小さい\")\nend","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"if ブロックの後ろに，else 文が続く場合がある． 論理式の値が false なら，else 文の次の文から end が出現するまでの文（「 else ブロック」）を実行する．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"x = 1\ny = 2\nif x < y\n   println(\"x は y より小さい\")\nelse\n   println(\"x は y より小さくない\")\nend","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"else 文の前に，elseif 文が続く場合もある． 最初の if 文の論理式が false なら，elseif 文の論理式を計算し， それが true なら，elseif 文の次の文から，elseif または end が出現するまでの文（「 elseif ブロック」）を実行する．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"x = 1\ny = 2\nif x < y\n   println(\"x は y より小さい\")\nelseif x > y\n   println(\"x は y より大きい\")\nelse\n   println(\"x は y と等しい\")\nend","category":"page"},{"location":"ch05/#if式","page":"第5回：■ 条件式・■ 条件分岐","title":"■ if式","text":"","category":"section"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"if式は，論理式が成立したブロックの最後の値を，式の値とする．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"x = 40\nm = if x >= 100\n   \"x は 100 以上である\"\nelseif x >= 50\n   \"x は 50 以上である\"\nelseif x >= 20\n   \"x は 20 以上である\"\nelse\n   \"x は 20 よりも小さい\"\nend\n\n@show m","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"if式を用いて ▼ 絶対値関数 を，以下のように書くこともできる．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"myabs1(x) =\n   if x >= 0\n      x\n   else\n      -x\n   end\n\n@show myabs1(-1)","category":"page"},{"location":"ch05/#3項演算子","page":"第5回：■ 条件式・■ 条件分岐","title":"■ 3項演算子","text":"","category":"section"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"Conditional evaluation \"ternary operator\"","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"a ? b : c","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"条件 a が真 true なら b を， 偽 false なら c を値とする「マクロ」である．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"m = 2 > 1 ? \"yes\" : \"no\"\n@show m","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"if式を用いて ▼ 絶対値関数 を，以下のように書くこともできる．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"myabs2(x) = x >= 0 ? x : -x\n\n@show myabs2(-1)","category":"page"},{"location":"ch05/#論理演算","page":"第5回：■ 条件式・■ 条件分岐","title":"■ 論理演算","text":"","category":"section"},{"location":"ch05/#論理否定","page":"第5回：■ 条件式・■ 条件分岐","title":"論理否定","text":"","category":"section"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"Base.:! — Function","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"論理否定 ! a は，a の論理値を反転する．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"!true\n!false","category":"page"},{"location":"ch05/#論理積","page":"第5回：■ 条件式・■ 条件分岐","title":"論理積","text":"","category":"section"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"&& - Keyword","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"論理積 a && b は，a と b との両方が true のときだけ true となる．言い換えると，a と b との，少なくとも一つが false なら，false となる．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"true && true\ntrue && false\nfalse && true\nfalse && false","category":"page"},{"location":"ch05/#数の大小比較の連続した記述","page":"第5回：■ 条件式・■ 条件分岐","title":"■ 数の大小比較の連続した記述","text":"","category":"section"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"数の比較演算子は，連続して記述できる．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"1 < 2 < 3\n1 < 2 && 2 < 3","category":"page"},{"location":"ch05/#論理和","page":"第5回：■ 条件式・■ 条件分岐","title":"論理和","text":"","category":"section"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"|| - Keyword","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"論理和 a || b は，a と b との少なくとも一つが true のとき true となる．言い換えると，a と b のどちらも false のときに false となる．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"true || true\ntrue || false\nfalse || true\nfalse || false","category":"page"},{"location":"ch05/#短絡評価","page":"第5回：■ 条件式・■ 条件分岐","title":"■ 短絡評価","text":"","category":"section"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"Short-Circuit Evaluation (section)","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"論理積 a && bと論理和 a || bの評価において， 第1項 a で結果が決まるなら，第2項 b は評価しない． これを短絡評価という．具体的には．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"論理積 a && b において，a が 偽 false なら，b を評価しない．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"( a が 偽 false なら，b の値によらず，論理積 a && b は偽 false であるから．)","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"論理和 a || b において，a が 真 true なら，b を評価しない．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"( a が 真 true なら，b の値によらず，論理和 a || b は 真 true であるから．)","category":"page"},{"location":"ch05/#論理型〜整数型の一つとして","page":"第5回：■ 条件式・■ 条件分岐","title":"●▼ 論理型〜整数型の一つとして","text":"","category":"section"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"Bool 型は，2進数1桁の符号なし整数 UInt1 である． 整数と論理型の値との演算では false は整数 0 , true は整数 1 とみなされる．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"2 + true\n2 + false","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"逆に，整数 0 と 1 を論理型に変換するには関数 Bool を用いる．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"Bool(0)\nBool(1)\nBool.([0, 1])  # 整数のベクトル [0,1] を論理型のベクトルに変換する","category":"page"},{"location":"ch05/#論理式と真理表","page":"第5回：■ 条件式・■ 条件分岐","title":"●▼ 論理式と真理表","text":"","category":"section"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"「論理式（logical expression）」とは， 論理型の変数，または，それらに論理演算を適用した式をいう．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"「真理表（truth table）」とは， 論理式に出現する変数（論理変数）のすべての組合せに対して，論理式の値を示した表である．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"上の 論理和, 論理積 では，論旨式に変数の４通りの組み合わせに対する演算結果を列挙した．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"上で導入した 論理和 a || b  および 論理積 a && b に対して， 論理変数 a と b のすべての組合せに対する計算結果を計算してみよう．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"for a in [false, true]\n   for b in Bool.([0, 1])\n      @show a, b, a || b, a && b\n   end\nend","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"今度は，論理式 z=(!a && b) || (a && !b) の値を計算してみよう．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"ここで，論理否定 ! は，論理和 && や論理積 || よりも 優先順位が高い演算であるので，!a || b は (!a) && b と解釈される． !(a || b) とは解釈されない．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"for a in Bool.([0, 1]), b in Bool.([0, 1])\n   x = !a && b\n   y = a && !b\n   z = x || y\n   @show a, b, x, y, z\nend","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"論理式 z は，","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"a と b の値が異なるときに true\na と b の値が等しいときに false","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"の値をとる． この論理式は，排他的（はいたてき）論理和（exclusive or, 略して exor あるいは XOR）と呼ばれる．","category":"page"},{"location":"ch05/#総当たりによる不定方程式の解法","page":"第5回：■ 条件式・■ 条件分岐","title":"▼ 総当たりによる不定方程式の解法","text":"","category":"section"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"方程式の数よりも，未知数の数が少ない方程式を不定方程式という． 未知数の性質が決まっていれば，未知数の候補を，方程式に代入して， 成り立つ未知数の組合せを求めることができる（総当たり攻撃，brute-force attack）．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"問題　「負ではない三つの整数 x y z が，次の二つの等式を同時に満たすという．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"x + y + z = 24","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"x+2y+4z = 51","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"三つの数 x y z の組合せをすべて求めよ．」","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"ここで， x y z は，0 から 24 までの整数である． x y z のすべての組み合わせに対して，二つの等式が成り立つ条件を，if文に渡す．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"for z = 0:24\n   for y = 0:24\n      for x = 0:24\n         if x + y + z == 24 && x + 2 * y + 4 * z == 51\n            @show x, y, z\n         end\n      end\n   end\nend","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"上の for 文の繰り返しは，３重の入れ子になっている．これは，一つの for 文にまとめられる．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"for z = 0:24, y = 0:24, x = 0:24\n   if x + y + z == 24 && x + 2 * y + 4 * z == 51\n      @show x, y, z\n   end\nend","category":"page"},{"location":"ch05/#練習：総当たりによる不定方程式の解法","page":"第5回：■ 条件式・■ 条件分岐","title":"▲ 練習：総当たりによる不定方程式の解法","text":"","category":"section"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"以下の式を満たす整数 𝑎𝑏 をすべて求めよ（京都大学・数学 2005年）","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"(1) 𝑎^3  𝑏^3 = 65,\n(2) 𝑎^3  𝑏^3 = 217","category":"page"},{"location":"ch05/#格子点による平面領域の塗り分け","page":"第5回：■ 条件式・■ 条件分岐","title":"▼ 格子点による平面領域の塗り分け","text":"","category":"section"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"平面座標 の第一象限 0 le x le 1 0 le y le 1 の範囲に， 格子点を配置しよう．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"そのうち，x^2+y^2 lt 1 の範囲にある点を赤で， それ以外を青で色分けして示そう．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"二重の繰り返し（二重ループ，double loop）を用いた．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"刻み幅は各軸 0025 に選んだので， 格子点の総数は 40times40 = 1600 個である．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"赤色の範囲は，4分円となる．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\nfor y = 0:0.025:1\n   for x = 0:0.025:1\n      c = x * x + y * y < 1 ? \"r\" : \"b\"\n      plot(x, y, \".\", color = c)\n   end\nend\nsavefig(\"ch05-qc1-lattice-plot.svg\"); nothing; #hide\nplt.close(\"all\"); nothing; #hide","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"(Image: )","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"今度は，二つの不等式 y  x と y  1-x の両方に囲まれる領域を， 赤で示そう．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"二重ループを一つの for 文にまとめた． for 文の右側に書かれたループ変数が内側のループに相当する．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n\nfor y = 0:0.025:1, x = 0:0.025:1\n   if y < x && y < 1 - x\n      c = \"r\"\n   else\n      c = \"b\"\n   end\n   plot(x, y, \".\", color = c)\nend\nsavefig(\"ch05-qc1s-lattice-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"(Image: )","category":"page"},{"location":"ch05/#練習","page":"第5回：■ 条件式・■ 条件分岐","title":"▲ 練習","text":"","category":"section"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"格子点の刻み幅を大きく，または，小さくして， 色分けの様子を観察してみよ．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"関数 plot の fmt パラメータを . から o （circle）に変えてみよ． さらに，markersize パラメータを加えて，マーカーの大きさを調整できる．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"plot(x,y,\"o\", markersize=3)","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"note: Note\n刻み幅を小さくすると，格子点の数は急激に増える（例えば，xy 軸方向の刻みの数を2倍にすると，格子点の数は 4倍になる）ので，刻み幅を急激に小さくすべきではない．計算量が増えた場合，数分以内に計算が終わらない可能性もあるが，このような状況を経験するのも重要である．","category":"page"},{"location":"ch05/#練習-2","page":"第5回：■ 条件式・■ 条件分岐","title":"▲ 練習","text":"","category":"section"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"以下の領域を表す条件を，式で表せ．その領域を，格子点を用いて塗り分けてみよ．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"点 (00) と点 (10) を一辺とし，第一象限に描かれた正三角形\n中心 left(dfrac12dfrac12right) , 半径 dfrac12 の円","category":"page"},{"location":"ch05/#擬似乱数","page":"第5回：■ 条件式・■ 条件分岐","title":"■ 擬似乱数","text":"","category":"section"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"計算機で発生する乱数を，「擬似乱数（pseudorandom numbers）」という．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"note: Note\n本来の意味の「乱数」は，計算する方法がないはずである． にもかかわらず，ある手順で乱数を発生しているので「擬似乱数」という．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"Random Numbers (section)\nBase.Random.rand - Function","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"関数 rand() は，0 から 1 未満の擬似乱数を発生する．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"rand()\nrand()\nrand()","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"関数 Random.seed!(m) は，擬似乱数の種をリセットする． パッケージ Random を using してから用いる． 種 m には，0 から 2^32-1 までの整数を指定する． 同じ種を指定すると，同じ系列で擬似乱数を発生する．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"using Random\nRandom.seed!(1234)\nrand()\nrand()\nrand()","category":"page"},{"location":"ch05/#乱数による平面領域の塗り分け","page":"第5回：■ 条件式・■ 条件分岐","title":"▼ 乱数による平面領域の塗り分け","text":"","category":"section"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"関数 rand() を2回用いて，座標点 (x,y) を発生しよう． 点の数を増やすと，これらの点は，平面の第一象限 0 le x lt 1 0 le y lt 0 の範囲を埋め尽くすはずである．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"そのうち，x^2+y^2 lt 1 の範囲にある点を赤で， それ以外を青で色分けして示そう．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"点の個数は 2^10 = 1024 である． 格子点で図示した場合（ ▼ 格子点による平面領域の塗り分け ）に比べて 点の数は少ないが，特徴を捉えている．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\nn = 2^10\nfor i = 1:n\n   x = rand()\n   y = rand()\n   c = x * x + y * y < 1 ? \"r\" : \"b\"\n   plot(x, y, \".\", color = c)\nend\nsavefig(\"ch05-qc1-random-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"(Image: )","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"今度は， 二つの不等式 y  x と y  1-x の両方に囲まれる領域のみ，赤で示そう．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n\nn = 2^10\nfor i = 1:n\n   x = rand()\n   y = rand()\n   if y < x && y < 1 - x\n      c = \"r\"\n   else\n      c = \"b\"\n   end\n   plot(x, y, \".\", color = c)\nend\nsavefig(\"ch05-qc1s-random-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"(Image: )","category":"page"},{"location":"ch05/#モンテカルロ法による平面図形の面積の推定","page":"第5回：■ 条件式・■ 条件分岐","title":"▼ モンテカルロ法による平面図形の面積の推定","text":"","category":"section"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"以上の例で，ランダムに落とした点の総数のうち， 図形の中に入った数を数えよう． 両者の割合から，図形の面積を推定できる． これを，「モンテカルロ（Monte Carlo）法による面積の算出法」という．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"note: Note\nモンテカルロ（Monte Carlo）は，モナコ公国（Monaco）の地名の一つであり，公営カジノで有名である．モンテカルロ法（Monte Carlo Method）は，擬似乱数を用いて，数値計算やシミュレーションを行う手法の総称である（面積を推定する手法以外の「モンテカルロ法」もある）．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"まず，4分円の面積を推定しよう．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"n = 2^10\ns = 0\nfor i = 1:n\n   global s\n   x = rand()\n   y = rand()\n   if x * x + y * y < 1\n      s += 1\n   end\nend\na_estimated = s / n\na_exact = pi / 4\ne_rel = (a_estimated - a_exact) / a_exact\n@show a_estimated, a_exact, e_rel","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"測定値について，","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"絶対誤差（absolute error）とは，推定値と真値（exact value, 正しい値）との差（の絶対値）である．\n相対誤差（relative error）とは，絶対誤差を真値で除した値（の絶対値）である．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"面積の推定値（experimental value）は a_estimated = s/n である． 4分円の面積の真値 a_exact は dfracpi4 である． （絶対値をとらない）相対誤差は e_rel=(a_estimated - a_exact)/a_exact と計算できる．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"点数 1024 個で，相対誤差 2 程度の，面積推定値が得られた．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"今度は，面積の推定値 a_estimated を，点の総数 n に対して描く．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"using PyPlot\nplt.figure() #hide\nfor m = 1:16\n   local n = 2^m\n   local s = 0\n   for i = 1:n\n      x = rand()\n      y = rand()\n      if x * x + y * y < 1\n         s += 1\n      end\n   end\n   local a_estimated = s / n\n   plot(n, a_estimated, \".\")\n   @show n, a_estimated\nend\n\na_exact = pi / 4\nylim(0.9 * a_exact, 1.1 * a_exact)\nxlabel(\"n\")\nxscale(\"log\")\naxhline(a_exact, color = \"k\", lw = 0.5)\nsavefig(\"ch05-qc1-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"(Image: )","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"今度は，面積の相対誤差（の絶対値） e_rel を，点の総数 n に対して描いてみる．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"using PyPlot\nplt.figure() #hide\nfor m = 1:16\n   local n = 2^m\n   local s = 0\n   for i = 1:n\n      x = rand()\n      y = rand()\n      if x * x + y * y < 1\n         s += 1\n      end\n   end\n   local a_estimated = s / n\n   local a_exact = pi / 4\n   local e_rel = abs((a_estimated - a_exact) / a_exact)\n   plot(n, e_rel, \".\")\nend\nxlabel(\"n\")\nylabel(\"relative errors\")\nxscale(\"log\")\nyscale(\"log\")\nsavefig(\"ch05-qc2-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"(Image: )","category":"page"},{"location":"ch05/#練習-3","page":"第5回：■ 条件式・■ 条件分岐","title":"▲ 練習","text":"","category":"section"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"モンテカルロ法を用いて，以下の領域の面積を推定せよ（これらの領域の，格子点を用いた塗り分けは，以前の例題・練習として行った）．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"余裕があれば，点数に対する相対誤差の変化も描いてみよ．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"二つの不等式 y  x と y  1-x の両方に囲まれる領域\n点 (00) と点 (10) を一辺とし，第一象限に描かれた正三角形\n中心 left(dfrac12dfrac12right) ,　半径 dfrac12 の円","category":"page"},{"location":"ch05/#モンテカルロ法による平面図形の面積の推定：落とす点の範囲を変える","page":"第5回：■ 条件式・■ 条件分岐","title":"●▼ モンテカルロ法による平面図形の面積の推定：落とす点の範囲を変える","text":"","category":"section"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"上のプログラムで，x=rand() の行を x=rand()*2 に変えると，0 le x lt 2 0 le y lt 1 の範囲に点を落とすことになる．この場合についても，面積の推定値を求めてみよ．点を落とす範囲が 0 le x lt 1 0 le y lt 1 と何が違うのだろうか？","category":"page"},{"location":"ch05/#関数の定義（代入文形式）","page":"第5回：■ 条件式・■ 条件分岐","title":"■ 関数の定義（代入文形式）","text":"","category":"section"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"関数は，いくつかの値を受け取って，何らかの操作をして返す，まとまった処理である．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"1行によるユーザ定義関数の例を，以下に示す．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"f(x) = x * 2 - 1","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"(の前が，ユーザ定義関数の名前である． 関数名の規則は，■ 変数名の規則 と同じである．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"括弧 () の中に，変数名の並びを記述する． この変数名を，仮引数（「かり・ひきすう」 parameter）という．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"=より右が，関数の定義である． 具体的な値（「実引数＝じつ・ひきすう」，argument）を入れて， 関数を評価する（evaluate）． 関数の定義の中に出現した仮引数は，実引数の値に置き換えられる．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"f(0)\nf(1)","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"実引数にベクトルなどを与えて，各要素に対して評価する場合には， 関数名の直後にピリオド .を置く．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"f.([1, 2, 3])\nf.(0:5)","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"仮引数は，2個以上でもよい．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"g(x, y) = x * y\ng(1, 1)\ng(\"a \", \" b\")","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"数どうしの * 演算は，数の乗算である． 文字列どうしの * 演算は，文字列の連結である．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"引数の型にあわせて，正しい演算が得られていることに着目せよ．","category":"page"},{"location":"ch05/#「はさみうち」法による，方程式の求解","page":"第5回：■ 条件式・■ 条件分岐","title":"▼ 「はさみうち」法による，方程式の求解","text":"","category":"section"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"条件判断を，繰り返し行うことで，求める答えに近づいて行く例を， もう一つ紹介する．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"▼ 不連続な有理式を描く の例として挙げた分母の式 f(x)=x^3+3x^2-4x-12 について，方程式 f(x)=0 の解の近似値を求めてみる．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"まず，y=f(x) のグラフを描こう．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"f(x) = x^3 + 3x^2 - 4 * x - 12\nxs = -3.5:0.05:3\n#\nusing PyPlot\nplt.figure() #hide\nplot(xs, f.(xs))\naxhline(0, color = \"k\", lw = 0.5)\nsavefig(\"ch05-secant1-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"(Image: )","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"上の関数 f(x) で a=-32  x  b=-26 の区間を選ぼう．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"この区間で f(x) が単調増加することを確かめよう．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"# f(x)=x^3+3*x^2-4*x-12\nxs = -3.2:0.01:-2.6\nplot(xs, f.(xs))\naxhline(0, color = \"k\", lw = 0.5)\nsavefig(\"ch05-secant1b-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"(Image: )","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"さて， 連続な関数 f(x) が， 区間 a lt x lt b で単調（単調増加または単調減少）であるとする． ここで，f(a)cdot f(b)lt 0，すなわち，f(a) と f(b) との符号が 異なるとき， 方程式 f(x)=0 の解は a lt x lt b の区間にある．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"ここで，a と b との中点 c=dfraca+b2 をとり，f(a) と f(c) が同じ符号であれば 左端 a を c に更新する． これに対して，f(b) と f(c) が同じ符号であれば 右端 b を c に更新する．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"この手順を繰り返すことで， 方程式 f(x)=0 の解が存在する区間 a lt x lt b を狭めていくことができる． この手法を「はさみうち」法という． 英語では，squeeze theorem, pinching theorem, sandwich theorem などと呼ばれる．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"この区間で，「はさみうち」を数回繰り返してみる．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"# f(x)=x^3+3x^2-4*x-12\na = -3.2;\nb = -2.6;\n@show a, b\n@show f(a), f(b)\nfor i = 1:10\n   global a, b, c\n   c = (a + b) / 2\n   @show i, a, b, c, f(c)\n   if f(a) * f(c) > 0\n      a = c\n   else\n      b = c\n   end\nend","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"この範囲の解は x=-3である．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"@show f(-3)","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"区間が狭まる様子を，グラフに描いてみよう．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"# f(x)=x^3+3x^2-4*x-12\nusing PyPlot\nplt.figure() #hide\na = -3.2;\nb = -2.6;\nfor i = 1:15\n   global a, b, c\n   plot(b, i, \"ro\")\n   plot(a, i, \"b.\")\n\n   c = (a + b) / 2\n   if f(a) * f(c) > 0\n      a = c\n   else\n      b = c\n   end\nend\nxlabel(\"x\")\nylabel(\"i\")\nsavefig(\"ch05-secant2-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"(Image: )","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"今度は，区間の幅 (b-a) を描こう． 区間の幅が，単調に減少する様子が観察される．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"# f(x)=x^3+3x^2-4*x-12\nusing PyPlot\nplt.figure() #hide\na = -3.2;\nb = -2.65;\nfor i = 1:30\n   global a, b, c\n   plot(i, b - a, \"r.\")\n\n   c = (a + b) / 2\n   if f(a) * f(c) > 0\n      a = c\n   else\n      b = c\n   end\nend\nyscale(\"log\")\nylabel(\"b-a\")\nxlabel(\"i\")\n\nsavefig(\"ch05-secant3-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"(Image: )","category":"page"},{"location":"ch05/#練習-4","page":"第5回：■ 条件式・■ 条件分岐","title":"▲ 練習","text":"","category":"section"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"同じ関数で，異なる区間で，はさみうち法を試してみよ．\n別の関数に対して，単調な区間を選び，はさみうち法を試してみよ．","category":"page"},{"location":"ch05/#NLsolveパッケージの紹介","page":"第5回：■ 条件式・■ 条件分岐","title":"●▲ NLsolveパッケージの紹介","text":"","category":"section"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"NLsolveパッケージは，連立非線形方程式を解くためのパッケージのひとつである．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"NLsolve パッケージを用いて，上の例題を解く例を示す． ただし，まだ説明していない文法（ベクトルの添字，関数の副作用）を用いているので，学習が進んでから，再度試してみよ．","category":"page"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"# Pkg.add(\"NLsolve\") # パッケージの導入．冒頭の`#`を外して１回だけ実行すればよい．\nusing NLsolve\n\n# 解くべき関数を定義する\nf(x)=x^3+3x^2-4*x-12\n# NLsolve に渡す関数を定義する\nf1(x)=f(x[1])\n\n# nlsolve関数を呼び出す．初期値 [-3.5] から解を探索する\nnlsolve(f1, [-3.5])\n\n# 結果を変数 r に保存する\nr = nlsolve(f1, [-3.5]);\n\n# 解を表示する\nr.zero\n\n# 初期値 [-1.8] から解を探索する\nr = nlsolve(f1, [-1.8]);\n\n# 解を表示する\nr.zero\n\n# 初期値 [1.5] から解を探索する\nr = nlsolve(f1, [1.5]);\n\n# 解を表示する\nr.zero","category":"page"},{"location":"ch05/#今回のまとめ","page":"第5回：■ 条件式・■ 条件分岐","title":"★ 今回のまとめ","text":"","category":"section"},{"location":"ch05/","page":"第5回：■ 条件式・■ 条件分岐","title":"第5回：■ 条件式・■ 条件分岐","text":"数の大小比較\nif文\nif式\n3項演算子\n論理演算\n格子点による平面領域の塗り分け\n擬似乱数\n乱数による平面領域の塗り分け\nモンテカルロ法による平面図形の面積の推定\nユーザ定義関数（代入文の形式）\n「はさみうち」法による，方程式の求解","category":"page"},{"location":"ch11/#ch11","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"","category":"section"},{"location":"ch11/#画像と画像ファイル","page":"第11回：ファイル入出力","title":"▶ 画像と画像ファイル","text":"","category":"section"},{"location":"ch11/#描画寸法の調整","page":"第11回：ファイル入出力","title":"▶ 描画寸法の調整","text":"","category":"section"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"PyPlot パッケージで描くグラフの寸法を調整する方法を紹介する．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"描画範囲を指定するには，命令 plt.figure(figsize=(x,y)) を用いる． x と y には，横 x と 縦 y の寸法を，インチ単位で指定する． 1 inch = 25.4 mm である．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"以下の例では，描画範囲を，横と縦をどちらも 80 mm に変更する．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"using PyPlot\nplt.figure(figsize = (80.0 / 25.4, 80.0 / 25.4))\n\nplt.plot([0, 1, 2])\nplt.plot([2, 1, 0])\nplt.savefig(\"ch11-plot1.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"(Image: )","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"軸の位置，あるいは，軸の周囲の余白（margin）の割合を指定するのは少し手間がいる． まず，関数 plt.figure() を用いて fig オブジェクトを得てから， fig オブジェクトに対して fig[:subplots_adjust]() を適用する．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"fig[:subplots_adjust]() では， キーワード引数 left , right , top , bottom を用いる．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"横方向では，left= で左軸の位置（割合）を，right=で，右軸の位置（割合）を指定する． この指定では，描画範囲の左端を 0 ,右端を 1 とする．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"縦方向では，bottom= で下軸の位置（割合）を，top= で，上軸の位置（割合）を指定する． この指定では，描画範囲の下端を 0 ,上端を 1 とする．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"下の例では left=0.2, right=0.9, bottom=0.2, top=0.9 としたので， 左と下の軸を各々の端から 20 % に，右と上の軸を各々の端から 10 % に配置する．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"using PyPlot\nplt.subplots_adjust(left = 0.2, right = 0.9, bottom = 0.2, top = 0.9)\n# ax=fig.add_subplt.plot(111)\nfig, ax = plt.subplots()\nax.plot([0, 1, 2])\nax.plot([2, 1, 0])\nplt.savefig(\"ch11-plot2.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"(Image: )","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"描画寸法の指定と，余白の指定を組み合わせると，左右または上下の軸の間隔を寸法で指定できる．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"下の例では，左右および上下の軸の間隔を 80 mm と指定する．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"m_left = 0.2;\nm_right = 0.9;\nm_bottom = 0.2;\nm_top = 0.9;\nfx = 80.0 / (m_right - m_left)\nfy = 80.0 / (m_top - m_bottom)\nusing PyPlot\nplt.figure(figsize = (fx / 25.4, fy / 25.4))\nplt.subplots_adjust(\n   left = m_left,\n   right = m_right,\n   bottom = m_bottom,\n   top = m_top,\n)\nfig, ax = plt.subplots()\n\nax.plot([0, 1, 2])\nax.plot([2, 1, 0])\nax.set_xlim(0, 2)\nax.set_ylim(0, 2)\nplt.savefig(\"ch11-plot3.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"(Image: )","category":"page"},{"location":"ch11/#ファイル名・パス名・拡張子","page":"第11回：ファイル入出力","title":"▶ ファイル名・パス名・拡張子","text":"","category":"section"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"Windows, MacOS, Linux など，多くの「オペレーティング・システム（OS; Operating System） 」では， 「フォルダ（folder）」あるいは「ディレクトリ（directory）」と呼ばれる階層構造の中に，ファイルを格納する．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"ファイルが格納されたフォルダーは，「ファイルの属性」で調べることができる．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"Windows10 のデスクトップ・アプリケーション「ペイント」で適当な絵を描いて，PNG形式で image1.png という名前でデスクトップに保存しよう．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"ファイル image1.png をデスクトップ上で選んで右クリック，「プロパティ」メニューを選ぶと，そのファイルの属性（プロパティ，property）が表示される．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"「場所」という属性に，このファイルが格納されたフォルダが表示される． Windows 10 では c:¥Users¥hs¥Desktop というフォルダ名は，ユーザ名 hs のデスクトップである． このファイルの完全な名前（「絶対パス absolute path」; あるいは「フルパス full path」）は  c:¥Users¥hs¥Desktop¥image1.png である．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"このファイルの名前は，.png で終わっている．この部分は，ファイルの種類を示しており，拡張子と呼ばれる．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"(Image: )","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"note: Note\nデスクトップやエクスプローラでは，いくつかの拡張子が表示されない設定になっている場合がある． 拡張子を表示するには，次のようにする．「コントローラ・パネル」から「エクスプローラ・オプション」を開く\n「表示」タブを選択\n「登録されている拡張子は表示しない」のチェックを外す\n下の「OK」ボタンを押すと，この設定が適用される(Image: )","category":"page"},{"location":"ch11/#画像ファイルの保存","page":"第11回：ファイル入出力","title":"▶ 画像ファイルの保存","text":"","category":"section"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"関数 plt.savefig(fn) は，PyPlot パッケージで描いた直近のグラフをファイル名 fn として保存する命令である．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"以下では，ch11-image1.png という名前でファイルが作成・保存する． 拡張子 .png の指定で，PNG画像ファイルが作成される．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"同じ名前のファイル名が存在しても警告されず，上書きされる．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"using PyPlot\nplt.figure(figsize = (80.0 / 25.4, 80.0 / 25.4))\n\nplt.plot([0, 1, 2])\nplt.plot([2, 1, 0])\nplt.savefig(\"ch11-image1.png\")\nplt.close(\"all\") #hide","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"(Image: )","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"note: Note\n「相対パスと絶対パス」フォルダあるいはディレクトリの区切りに使われる文字は OS毎に異なるが， Julia言語では，OSに依らずスラッシュ文字 / で区切ることになっている．上の例のように，フォルダを指定せずに，ファイル名のみ指定する場合を「相対パス（relative path）」による指定という．相対パスでは，現在の作業フォルダ（working folder,あるいは，カレント・フォルダ，current folder）の下に，ファイルが保存される．現在の作業フォルダは，関数 Base.pwd() で得られる（print working directory）．Base.pwd()  # 各自異なる場合があるカレント・フォルダを変更するには，関数 Base.cd() を用いる（change working directory）．ユーザ名 hs のデスクトップは，Windows 10 や MacOS のどちらでも /Users/hs/Desktop というフォルダ名であるので， ユーザ名 hs のユーザが，作業フォルダーをデスクトップに変更するには，Base.cd(\"/Users/hs/Desktop\")  # 各自の環境に応じて書き換えることとする．これに対して，plt.savefig( \"/Users/hs/Desktop/ch11-image1.png\" ) のように， 「絶対パス（absolute path）」でファイル名を指定してもよい．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"note: Note\n「保守的なファイル名を使おう」ファイル名やフォルダー名（ディレクトリ名）に用いられる文字の種類は， OS やネットワーク・システムにより異なる． ファイル名の「文字化け」を避けるために，ファイル名は，以下のように選んでおくことを勧める．ファイル名を，半角の英数字およびマイナス記号 - のみで構成する．拡張子の直前の文字として ピリオド . を用いる．\n拡張子の前に半角のピリオド . を用いてもよい．\n半角の英大文字と英小文字は区別されないとする．","category":"page"},{"location":"ch11/#画像ファイルの種類","page":"第11回：ファイル入出力","title":"▶ 画像ファイルの種類","text":"","category":"section"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"画像ファイルの形式は，大きく分けてビットマップ画像とベクトル（またはベクタ）画像に大別できる．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"ビットマップ画像（bitmap image）は，画素（pixel）の集合として画像を格納するファイル形式である．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"JPEGファイル（拡張子 JPG）は，写真画像によく用いられる．圧縮率は高いが，元の画像を復元しない場合がある．\nGIFファイル．256 色までの画像を表現できる．複数の画像を格納でき，アニメーションを表示できる．\nPNGファイル．より多数の色を表現できる．元の画像に劣化がなく復元できる．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"「ベクトル画像（vector image）」は，直線や円などの図形の組合せとして画像を格納するファイル形式である．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"EPS（Encapsulated PostScript）\nPDF（Portable Document Format）\nSVG（Scalable Vector Graphics）\nWMF（Windows Metafile）","category":"page"},{"location":"ch11/#画像ファイルの保存オプション","page":"第11回：ファイル入出力","title":"▶ 画像ファイルの保存オプション","text":"","category":"section"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"関数 plt.savefig(fn) には，いくつかのキーワード引数がある．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"format=\"...\" : 画像ファイル形式を指定する（ファイル拡張子よりも，こちらの引数が優先される）\ndpi=数字 : 画像の解像度を，数字で指定する\ntransparent=true : 白背景を透明にする","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"using PyPlot\nplt.figure(figsize = (80.0 / 25.4, 80.0 / 25.4))\n\nplt.plot([0, 1, 2])\nplt.plot([2, 1, 0])\nplt.savefig(\"ch11-image2.png\", format = \"png\", dpi = 300, transparent = true)\nplt.close(\"all\") #hide","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"(Image: )","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"note: Note\n上の画像ファイル ch11-image2.png は，一つ上の画像ファイル ch11-image2.png  と同じ内容であるが，Webブラウザ上では，前者の方が大きく見える．これは，Webブラウザ上では，「画素（ピクセル，pixel）」の単位でしか，画像の寸法を指定できないためである．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"note: Note\ndpi（dots per inch）は，画像の解像度であり，1インチ内の画素数を示す．粗い Webページの画像は 100 dpi 程度である．\n低品位・中品位の印刷物の画像は 150 dpi 程度である．\nオフィス向けプリンタの解像度は 300 から 600 dpi 程度である．\n高品位な出版物では，最低 600 dpi を求められる．","category":"page"},{"location":"ch11/#テキストファイルの作成・書き込み","page":"第11回：ファイル入出力","title":"▶ テキストファイルの作成・書き込み","text":"","category":"section"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"この節では，テキストファイルを作成し，テキストを書き込む方法を説明する． 一般のテキストファイルの拡張子は，txt である．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"テキストファイルを作成するには，関数 open と close を組で用いる．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"関数 open( fn, \"w\") は，ファイル名 fn のファイルを作成し， テキストを書き込む準備を行う．ファイル fn は，既に存在していてもよい．その場合は，既に書き込まれた内容は廃棄される．ファイルが作成できない場合には例外が発生する．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"関数 open は，ファイル記述子 f を返す． 関数 print(f, s) は，ファイル記述子 f で指定されたファイルに文字列 s を書き込む． 関数 println(f, s) は，ファイル記述子 f で指定されたファイルに文字列 s を書き込んだ後に開業する．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"書き込みが終わったら，関数 close(f) を呼び出し，書き込みを終了する．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"f = open(\"hello1.txt\", \"w\")\nprint(f, \"Hello\")\nprintln(f, \" again.\")\nclose(f)","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"上のプログラムを実行したら，Windows10 のエクスプローラを用いて， ファイル hello1.txt が作成されたことを確かめよ． 更に，「メモ帳」アプリを起動し，テキストが正しく書き込まれていることを確認せよ． (※ MacOSの場合は，「ファインダー」アプリと，「テキスト・エディット」アプリに読み替えよ)","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"上と同じ処理は，do...end 構文を用いて書くこともできる． end が終わると関数 close(f) が暗黙的に呼ばれる．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"open(\"hello1.txt\", \"w\") do f\n   print(f, \"Hello\")\n   println(f, \" again.\")\nend","category":"page"},{"location":"ch11/#書式付き出力","page":"第11回：ファイル入出力","title":"▶ 書式付き出力","text":"","category":"section"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"書式を指定して，値を印字するには，Printf パッケージ内の関数 @printf を用いる． 関数 @printf を使う前に，using Printf で，このパッケージを読み込む．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"関数 @printf(fmt, x) は，x を 書式 fmt に従って印字する． 書式文字列 fmt は，C言語の printf 関数で用いられる書式と，ほぼ同じである．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"なお，Jupyter notebookでは，結果が右寄せされて表示されない場合がある．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"書式文字列 %i は，整数を印字する．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"i の前に整数（フィールドサイズ）を付けると，その整数の幅で右寄せされて印字される．指定されたフィールドサイズで収まらない場合には，幅を増やして印字される．\nフィールドサイズを 0 で始めると，空白が 0 で埋められる．\nフィールドサイズの前に + を付けると，非負の数の前に + 符号がつく．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"using Printf\n@printf(\"%5i\\n\", -41)\n@printf(\"%05i\\n\", 413)\n@printf(\"%+5i\\n\", 413)\n@printf(\"%+5i\\n\", -413)\n@printf(\"%+05i\\n\", -413)\n@printf(\"%+5i\\n\", -41131)","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"書式文字列 %f は，小数を印字する．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"f の前に整数（フィールドサイズ）を付けると，その整数の幅で右寄せされて印字される．指定されたフィールドサイズで収まらない場合には，幅を増やして印字される．\nフォールドサイズに続けて，ピリオド . と整数を付けると，小数点以下の桁数を指定する．指定された小数点以下桁数で表されない場合には，丸められる．\nフィールドサイズを 0 で始めると，頭の空白が 0 で埋められる．\nフィールドサイズの前に + を付けると，非負の数の前に + 符号がつく．\nInf と NaN は，その通り印字される．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"@printf(\"%8.3f\\n\", -2e-2)\n@printf(\"%08.0f\\n\", -0.252)\n@printf(\"%8.1f\\n\", -0.252)\n@printf(\"%08.2f\\n\", -0.252)\n@printf(\"%8.3f\\n\", -0.252)","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"書式文字列 %e は，指数形式で印字する．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"e の前に整数（フィールドサイズ）を付けると，その整数の幅で右寄せされて印字される．フィールドサイズで収まらない場合には，幅を増やして印字される．\nフォールドサイズに続けて，ピリオド . と整数を付けると，小数点以下の桁数を指定する．指定された小数点以下桁数で表されない場合には，丸められる．\nフィールドサイズを 0 で始めると，頭の空白が 0 で埋められる．\nフィールドサイズの前に + を付けると，非負の数の前に + 符号がつく．\nInf と NaN は，その通り印字される．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"@printf(\"%11.5e\\n\", -0.0078125)\n@printf(\"%12.4e\\n\", -0.0078125)\n@printf(\"%13.3e\\n\", -0.0078125)\n@printf(\"%13.2e\\n\", -0.0078125)\n@printf(\"%13.1e\\n\", -0.0078125)","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"書式文字列 %s は，文字列形式で印字する．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"s の前に整数（フィールドサイズ）を付けると，その整数の幅で右寄せされて印字される．フィールドサイズで収まらない場合には，幅を増やして印字される．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"@printf(\"%8s\\n\", \"Hello\")\n@printf(\"%8s\\n\", \"Hello world\")","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"書式は復数使用してもよい．書式があるのに，印字すべき値がないと例外が発生する．\n書式を指定しない文字は，そのまま印字される．\n\\n は改行文字を表す．\n\\t はタブ（TAB）文字を表す．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"@printf(\"%.1f %15.7e\\n\", 0.025, -0.0078125)\n@printf(\"x=%.1f        y=%15.7e\\n\", 0.025, -0.0078125)\n# 引数が足りない例\n@printf(\"%.1f %15.7e\\n\", 0.025)","category":"page"},{"location":"ch11/#書式を指定して，テキストファイルに書き込む．","page":"第11回：ファイル入出力","title":"▶ 書式を指定して，テキストファイルに書き込む．","text":"","category":"section"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"正規乱数 10 個からなるCSVファイルを書き出そう． 関数 @printf の第一引数に，ファイル記述子 f を入れると，f で示されたファイルに印字される．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"using Printf\nopen(\"test1.txt\", \"w\") do f\n   for i = 1:10\n      @printf(f, \"%15.7f\\n\", randn())\n   end\nend","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"上のプログラムを実行したら，「メモ帳」アプリを起動し，数字が指定された書式で正しく書き込まれたことを確認せよ． 更に，「Excel」アプリを起動し，このファイルを1列のデータとして読み込んでみよ．","category":"page"},{"location":"ch11/#CSVファイルへの書き込み","page":"第11回：ファイル入出力","title":"▶ CSVファイルへの書き込み","text":"","category":"section"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"カンマ , で区切られた値が並ぶ行から構成されるテキストファイルを CSV（Comma Separated Value） ファイルという． 表計算ソフトウエアとのデータの輸入輸出によく用いられる． 拡張子は csv である．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"関数 @printf を用いて，整数と浮動小数点数をカンマで区切った行を書き出そう．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"なお，CSVファイルの1行目に，カンマ , で区切られた文字列を，各列の表題として書くことが多い．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"using Printf\nopen(\"test2.csv\", \"w\") do f\n   println(f, \"i,x\")\n   for i = 1:10\n      @printf(f, \"%i,%15.7f\\n\", i, randn())\n   end\nend","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"上のプログラムを実行したら，「メモ帳」アプリを起動し，CSVファイルが正しく書き込まれていることを確認せよ． 更に，「Excel」アプリを起動し，2列のデータとして読み込んでみよ．","category":"page"},{"location":"ch11/#テキストファイルからの読み込み","page":"第11回：ファイル入出力","title":"▶ テキストファイルからの読み込み","text":"","category":"section"},{"location":"ch11/#テキストファイルからの行単位の読み込み","page":"第11回：ファイル入出力","title":"▶ テキストファイルからの行単位の読み込み","text":"","category":"section"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"関数 open( fn ) は，ファイル名 fn のファイルをテキストとして，読み込む準備を行う． ファイル fn が読み込めない場合には例外が発生する．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"テキストファイルを読み込むためにも，関数 open と close を組で用いる．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"以下のプログラムは，テキストファイルから，１行ずつ読み込み，それを印字する．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"関数 eachline(f) は，ファイル記述子 f からテキストを読み込み，行に分割する．このとき，行末の改行文字は取り除かれる．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"f = open(\"hello1.txt\")\nfor line in eachline(f)\n   print(line)\nend\nclose(f)","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"書き込みの場合と同様に，do...end 構文を用いて書くこともできる． end が終わると関数 close(f) が暗黙的に呼ばれる．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"open(\"hello1.txt\") do f\n   for line in eachline(f)\n      print(line)\n   end\nend","category":"page"},{"location":"ch11/#文字列から数に変換する","page":"第11回：ファイル入出力","title":"▶ 文字列から数に変換する","text":"","category":"section"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"文字列を数に変換するには，関数 parse(t, s)を用いる． 第一引数には変換先の型を，第二引数には，変換したい文字列を書く．文字列の前後の空白は無視される．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"parse(Float64, \" 12.3\")\nparse(Float64, \" 12.3e-2 \")\nparse(Int64, \" 123 \")\n# 変換できない例\nparse(Int64, \" 12.3 \")","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"上のプログラムで作成したファイル test1.txt から1行ずつ読み込み，浮動小数点数に変換して印字してみよう．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"open(\"test1.txt\") do f\n   for line in eachline(f)\n      x = parse(Float64, line)\n      @printf(\"%15.7f\\n\", x)\n   end\nend","category":"page"},{"location":"ch11/#文字列を分割する","page":"第11回：ファイル入出力","title":"▶ 文字列を分割する","text":"","category":"section"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"関数 split(s, c) は，文字列を分割する． 第一引数の文字列 s を，第二引数の文字列のどれか一つの文字が出現したら分割する．結果として，文字列を要素とする配列が返される．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"英文テキストを，空白で区切る．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"split(\"one cup of brown suger\", \" \")","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"行をカンマで区切って，それぞれ整数と浮動小数点数に変換する．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"line = \"   15  , 0.2401863\"\ns = split(line, \",\")\nparse(Int64, s[1])\nparse(Float64, s[2])","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"上のプログラムで作成した test2.csv を読み込み，各行を整数と浮動小数点数に変換し，印字する． ただし，1行目は読み飛ばす．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"using Printf\nopen(\"test2.csv\") do f\n   i = 0\n   for line in eachline(f)\n      i += 1\n      i == 1 && continue\n      s = split(line, \",\")\n      x = parse(Int64, s[1])\n      y = parse(Float64, s[2])\n      @printf(\"%5i %15.7f\\n\", x, y)\n   end\nend","category":"page"},{"location":"ch11/#配列に要素を加える","page":"第11回：ファイル入出力","title":"▶ 配列に要素を加える","text":"","category":"section"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"関数 push!(a,x) は，配列 a に，値 x を付け加える．配列 a は書き換えられる．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"# Int64 を要素とする配列\nxs = [1, 2]\npush!(xs, 3)\nxs\npush!(xs, 4)\nxs","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"要素がない配列を作るには 関数 zeros(t, 0) を使えばよい． 第一引数 t は，作成する配列の要素である．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"以下では，Float64 型の配列（要素数 0）を最初に作成した．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"xs = zeros(Float64, 0)\npush!(xs, 1.0)\nxs\npush!(xs, 2.0)\nxs","category":"page"},{"location":"ch11/#CSVファイルから配列を作る","page":"第11回：ファイル入出力","title":"▶ CSVファイルから配列を作る","text":"","category":"section"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"以上を組合せて，CSVファイルを読み込み，値を配列としてまとめることができる．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"using Printf\nxs = zeros(Int64, 0)\nys = zeros(Float64, 0)\n\nopen(\"test2.csv\") do f\n   i = 0\n   for line in eachline(f)\n      i += 1\n      i == 1 && continue\n      s = split(line, \",\")\n      x = parse(Int64, s[1])\n      push!(xs, x)\n      y = parse(Float64, s[2])\n      push!(ys, y)\n   end\nend\n@show xs\n@show ys","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"続けて，データを描くと，","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"plt.plot(ys, \".\")\nplt.savefig(\"ch11-csv1.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"(Image: )","category":"page"},{"location":"ch11/#CSVパッケージ","page":"第11回：ファイル入出力","title":"▶ CSVパッケージ","text":"","category":"section"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"CSV パッケージを用いると，CSVファイルを容易に扱うことができる．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"CSV パッケージを設置（インストール）していない場合は，次のように設置する．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"import Pkg;\nPkg.add(\"CSV\")","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"CSV パッケージに定義されている関数 CSV.read(fn, DataFrame) を用いると，CSVファイル fn を読み込むことができる． 結果として，拡張された配列（ DataFrame 型）が返される．","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"# CSV\nusing CSV, DataFrames\ndf = CSV.read(\"test2.csv\", DataFrame)\n# 1番目のデータ配列\n@show df[:,1]\n# 2番目のデータ配列\n@show df[:,2]\n#\nusing PyPlot\nplt.figure() #hide\nplt.plot(df[:,2], \".\")","category":"page"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"データを描いた結果は，上と同じである．","category":"page"},{"location":"ch11/#今回のまとめ","page":"第11回：ファイル入出力","title":"★ 今回のまとめ","text":"","category":"section"},{"location":"ch11/","page":"第11回：ファイル入出力","title":"第11回：ファイル入出力","text":"PyPlotパッケージで描いた画像\n画像寸法の調整\n画像のファイルへの保存\n文字列の扱い\n書式付き出力\n文字列の分割\n文字列から数への変換\n配列に要素を加える\nテキストファイル\n書き込み\n読み込み\nCSVファイル","category":"page"},{"location":"ch0a/#ch0a","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"","category":"section"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"※ 以下のプログラムは，Julia 1.1向けに書き直した．","category":"page"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"極座標 (r theta) で記述される曲線を描き，その類似点を考察せよ，という課題であった．","category":"page"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"ただし，動径 r は，以下の式で与えられるものとする．","category":"page"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"beginaligned\nr_1  = sin theta + cos theta \nr_2  = 2 + 2sin theta = 2 left(1 + sintheta right) \nr_3  = dfrac32 + sin theta \nr_4  = 1 + cos theta \nr_5  = dfrac12 + cos theta \nr_6  = cos dfractheta2 quad left( 0 le theta le 4pi right) \nr_7  = sin dfractheta2 quad left( 0 le theta le 6pi right) \nr_8  = sin^2theta = left(sin thetaright)^2 \nr_9  = 1 + 3 cos^2 (2theta) = 1 + 3 left(cos 2theta right)^2 \nr_10  = sin^2 (3theta) = left( sin 3theta right)^2 \nr_11  = tan theta \nr_12  = cot 2theta \nr_13  = dfrac11+cos theta \nr_14  = dfrac11+dfrac12cos theta \nr_15  = dfrac11+2cos theta \nr_16  = dfrac11-cos theta \nr_17  = dfrac11+sin theta\nendaligned","category":"page"},{"location":"ch0a/#分類","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"分類","text":"","category":"section"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"引数 theta に対する周期性から，以下のように分類できるであろう．","category":"page"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"周期 2pi を持つもの\n単純な余弦・正弦 cos theta sin theta を含む曲線\n曲線 r_1r_2r_3r_4r_5\n周期 4pi を持つもの\n半角の余弦，正弦 cos dfractheta2 sin dfractheta2 を含む曲線\n曲線 r_6r_7\n周期 pi を持つもの\n余弦・正弦の二乗 cos^2 theta sin^2 theta を含む\n三角関数の加法定理から cos 2theta sin 2theta に変形できる\n曲線 r_8r_9\n周期 dfrac4pi3\n余弦・正弦の二乗 sin^2 (3theta) を含む\n曲線 r_10\n直角 dfracpi2 の整数倍で不連続（正負の無限大に発散する）\n正接tan, 余接 cot を含む\n曲線 r_11r_12\n同式の形\n同じ式 r = dfrac11+ a cos theta の形である\n曲線 r_13 r_14 r_15\n分母が 0 になりうる\n曲線 r_13, r_15 r_16 r_17","category":"page"},{"location":"ch0a/#曲線-r_{1}","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"曲線 r_1","text":"","category":"section"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"以下，何も工夫せずに，曲線を描いてみる． ただし，描画範囲は適宜調整した．","category":"page"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"曲線 r_1 = r_1 = sin theta + cos theta を曲線 r_0 = sin theta と一緒に描く．","category":"page"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n\nts=0:pi/72:2pi\n#\nr0 = sin.(ts)\nx0 = r0 .* cos.(ts)\ny0 = r0 .* sin.(ts)\nplt.plot(x0,y0, label=\"r0\")\n#\nr1 = sin.(ts) .+ cos.(ts)\nx1 = r1 .* cos.(ts)\ny1 = r1 .* sin.(ts)\nplt.plot(x1,y1, label=\"r1\")\n#\nplt.legend()\nplt.xlim(-1,2)\nplt.ylim(-1,2)\nplt.axhline(0, c=\"k\", lw=0.5)\nplt.axvline(0, c=\"k\", lw=0.5)\nplt.savefig(\"ch0a-plot1.svg\"); nothing #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"(Image: )","category":"page"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"三角関数の合成の公式を用いると，r_1 は，以下のように変形できる．","category":"page"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"beginaligned\nr_1  = sin theta + cos theta\n= sqrt2 left sin theta dfrac1sqrt2 + cos theta dfrac1sqrt2 right \n = sqrt2 sin left( theta + dfracpi4 right)\nendaligned","category":"page"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"すなわち，曲線 r_0 を，時計方向に dfracpi4 だけ回転し， 原点を中心に sqrt2 だけ拡大したものが，曲線 r_1 である．","category":"page"},{"location":"ch0a/#曲線-r_{2},r_{3}","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"曲線 r_2r_3","text":"","category":"section"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"曲線 r_2 = 2 left(1 + sintheta right) r_3 = dfrac32 + sin theta は，y軸に対して対称である．","category":"page"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n\nts=0:pi/72:2pi\n#\nr2 = 2 * (1 .+sin.(ts))\nx2 = r2 .* cos.(ts)\ny2 = r2 .* sin.(ts)\nplt.plot(x2,y2, label=\"r2\")\n#\nr3 = 3/2 .+ sin.(ts)\nx3 = r3 .* cos.(ts)\ny3 = r3 .* sin.(ts)\nplt.plot(x3,y3, label=\"r3\")\n#\nplt.legend()\nplt.xlim(-3,3)\nplt.ylim(-2,5)\nplt.axhline(0, c=\"k\", lw=0.5)\nplt.axvline(0, c=\"k\", lw=0.5)\nplt.savefig(\"ch0a-plot1b.svg\"); nothing #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"(Image: )","category":"page"},{"location":"ch0a/#曲線-r_{4},r_{5}","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"曲線 r_4r_5","text":"","category":"section"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"曲線 r_2 = 2 left(1 + sintheta right) を時計方向に dfracpi2 だけ回転したものが，曲線 r_4 である．","category":"page"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"曲線 r_4 = 1 + cos theta r_5 = dfrac12 + cos theta は，x軸に対して対称である．","category":"page"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n\nts=0:pi/72:2pi\n#\nr4 = 1 .+ cos.(ts)\nx4 = r4 .* cos.(ts)\ny4 = r4 .* sin.(ts)\nplt.plot(x4,y4, label=\"r4\")\n#\nr5 = 1/2 .+ cos.(ts)\nx5 = r5 .* cos.(ts)\ny5 = r5 .* sin.(ts)\nplt.plot(x5,y5, label=\"r5\")\n#\nplt.legend()\nplt.xlim(-1,3)\nplt.ylim(-2,2)\nplt.axhline(0, c=\"k\", lw=0.5)\nplt.axvline(0, c=\"k\", lw=0.5)\nplt.savefig(\"ch0a-plot1c.svg\"); nothing #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"(Image: )","category":"page"},{"location":"ch0a/#曲線-r_{6},r_{7}","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"曲線 r_6r_7","text":"","category":"section"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"beginaligned\nr_6  = cos dfractheta2 quad left( 0 le theta le 4pi right) \nr_7  = sin dfractheta2 quad left( 0 le theta le 6pi right)\nendaligned","category":"page"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n\n#\nts4=0:pi/18:4pi\nr6 = cos.(ts4./2)\nx6 = r6 .* cos.(ts4)\ny6 = r6 .* sin.(ts4)\nplt.plot(x6,y6, label=\"r6\")\n#\nts6=0:pi/18:6pi\nr7 = sin.(ts6./2)\nx7 = r7 .* cos.(ts6)\ny7 = r7 .* sin.(ts6)\nplt.plot(x7,y7, \".\", label=\"r7\")\n#\nplt.legend()\nplt.xlim(-3/2,3/2)\nplt.ylim(-3/2,3/2)\nplt.axhline(0, c=\"k\", lw=0.5)\nplt.axvline(0, c=\"k\", lw=0.5)\nplt.savefig(\"ch0a-plot2.svg\"); nothing #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"(Image: )","category":"page"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"曲線 r_6 と r_7 は一致した．","category":"page"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"ちなみに，theta の定義域を狭めて描いてみよう．","category":"page"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n#\nts4=0:pi/18:pi        # <--\nr6 = cos.(ts4./2)\nx6 = r6 .* cos.(ts4)\ny6 = r6 .* sin.(ts4)\nplt.plot(x6,y6, label=\"r6\")\n#\nts6=0:pi/18:pi        # <--\nr7 = sin.(ts6./2)\nx7 = r7 .* cos.(ts6)\ny7 = r7 .* sin.(ts6)\nplt.plot(x7,y7, \".\", label=\"r7\")\n#\nplt.legend()\nplt.xlim(-3/2,3/2)\nplt.ylim(-3/2,3/2)\nplt.axhline(0, c=\"k\", lw=0.5)\nplt.axvline(0, c=\"k\", lw=0.5)\nplt.savefig(\"ch0a-plot2b.svg\"); nothing #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"(Image: )","category":"page"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"これをよく観察すると， 曲線 r_6 上の点と，曲線 r_7 上の点の対応関係が見えてくるであろう．","category":"page"},{"location":"ch0a/#曲線-r_{8},r_{9}","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"曲線 r_8r_9","text":"","category":"section"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"曲線 r_8 = = left(sin thetaright)^2 r_9 = 1 + 3 left(cos 2theta right)^2 の動径は，正である．","category":"page"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n#\nts=0:pi/72:2pi\n#\nr8 = (sin.(ts)).^2\nx8 = r8 .* cos.(ts)\ny8 = r8 .* sin.(ts)\nplt.plot(x8,y8, label=\"r8\")\n#\nr9 = 1 .+ 3* (cos.(2*ts)).^2\nx9 = r9 .* cos.(ts)\ny9 = r9 .* sin.(ts)\nplt.plot(x9,y9, label=\"r9\")\nplt.legend()\nplt.xlim(-5,5)\nplt.ylim(-5,5)\nplt.savefig(\"ch0a-plot3.svg\"); nothing #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"(Image: )","category":"page"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"ちなみに，t の定義域を狭めて描いてみよう．","category":"page"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n#\nts=0:pi/72:2pi *3/8 # <--\n#\nr8 = (sin.(ts)).^2\nx8 = r8 .* cos.(ts)\ny8 = r8 .* sin.(ts)\nplt.plot(x8,y8, label=\"r8\")\n#\nr9 = 1 .+ 3* (cos.(2*ts)).^2\nx9 = r9 .* cos.(ts)\ny9 = r9 .* sin.(ts)\nplt.plot(x9,y9, label=\"r9\")\nplt.legend()\nplt.xlim(-5,5)\nplt.ylim(-5,5)\nplt.savefig(\"ch0a-plot3b.svg\"); nothing #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"(Image: )","category":"page"},{"location":"ch0a/#曲線-r_{10}","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"曲線 r_10","text":"","category":"section"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"曲線 r_10 = left( sin 3theta right)^2 と 花曲線 r_10b = sin (3theta) とともに描いてみよう．","category":"page"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n\nts=0:pi/72:2pi\n#\nr10 = (sin.(3ts)).^2\nx10 = r10 .* cos.(ts)\ny10 = r10 .* sin.(ts)\nplt.plot(x10,y10, label=\"r10\")\n#\nr10b = sin.(3ts)\nx10b = r10b .* cos.(ts)\ny10b = r10b .* sin.(ts)\nplt.plot(x10b,y10b, label=\"r10b\")\n#\nplt.legend()\nplt.xlim(-5/4,5/4)\nplt.ylim(-5/4,5/4)\nplt.savefig(\"ch0a-plot4.svg\"); nothing #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"(Image: )","category":"page"},{"location":"ch0a/#曲線-r_{11},-r_{12}","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"曲線 r_11, r_12","text":"","category":"section"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"正接 tan theta は dfracpi2 の奇数倍で，正負の無限大に発散する．\n余接 cot theta は dfracpi2 の偶数倍で，正負の無限大に発散する．","category":"page"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"これらの曲線は，発散する theta で，x軸や y軸に平行な直線に漸近する．","category":"page"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"曲線 r_11 = tan theta は，x = pm 1 に漸近する．","category":"page"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"曲線 r_12 = cot 2theta は，x = pmdfrac12 または y = pmdfrac12 に漸近する．","category":"page"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n\nts=0:pi/72:2pi\n#\nr11 = tan.(ts)\nx11 = r11 .* cos.(ts)\ny11 = r11 .* sin.(ts)\nplt.plot(x11,y11, \".\", label=\"r11\")\n#\nr12 = cot.(2ts)\nx12 = r12 .* cos.(ts)\ny12 = r12 .* sin.(ts)\nplt.plot(x12,y12, \".\", label=\"r12\")\n#\nplt.legend()\nplt.xlim(-4,4)\nplt.ylim(-4,4)\nplt.savefig(\"ch0a-plot5.svg\"); nothing #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"(Image: )","category":"page"},{"location":"ch0a/#曲線-r_{13},-r_{14},-r_{15}","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"曲線 r_13, r_14, r_15","text":"","category":"section"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"（再掲）これらの曲線は r = dfrac11+a cos theta の形である．","category":"page"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"パラメータ a の範囲により，見かけが異なる","category":"page"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"範囲 0  a  1 : 楕円\n範囲 a = 1 : 放物線\n範囲 a  1 : 双曲線","category":"page"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"beginaligned\nr_13  = dfrac11+cos theta \nr_14  = dfrac11+dfrac12cos theta \nr_15  = dfrac11+2cos theta\nendaligned","category":"page"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n\nts=0:pi/144:2pi\n#\na=1\nr13 = 1 ./ (1 .+ a*cos.(ts))\nx13 = r13 .* cos.(ts)\ny13 = r13 .* sin.(ts)\nplt.plot(x13,y13, \".\", label=\"r13, a=\"*string(a))\n#\na=1/2\nr14 = 1 ./ (1 .+ a*cos.(ts))\nx14 = r14 .* cos.(ts)\ny14 = r14 .* sin.(ts)\nplt.plot(x14,y14, \".\", label=\"r14. a=\"*string(a))\n#\na=2\nr15 = 1 ./ (1 .+ a*cos.(ts))\nx15 = r15 .* cos.(ts)\ny15 = r15 .* sin.(ts)\nplt.plot(x15,y15, \".\", label=\"r15, a=\"*string(a))\n#\nplt.legend()\nplt.xlim(-4,4)\nplt.ylim(-4,4)\nplt.savefig(\"ch0a-plot6.svg\"); nothing #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"(Image: )","category":"page"},{"location":"ch0a/#曲線-r_{13},-r_{17}","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"曲線 r_13, r_17","text":"","category":"section"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"曲線 r_13 = dfrac11+cos theta と r_17 = dfrac11+sin theta は，sin と cos を入れ替えたものである．","category":"page"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n\nts=0:pi/144:2pi\n#\nr13 = 1 ./ (1 .+ cos.(ts))\nx13 = r13 .* cos.(ts)\ny13 = r13 .* sin.(ts)\nplt.plot(x13,y13, \".\", label=\"r13\")\n#\na=1/2\nr17 = 1 ./ (1 .+ sin.(ts))\nx17 = r17 .* cos.(ts)\ny17 = r17 .* sin.(ts)\nplt.plot(x17,y17, \".\", label=\"r17\")\n#\nplt.legend()\nplt.axhline(0, color=\"k\", lw=0.5)\nplt.axvline(0, color=\"k\", lw=0.5)\nplt.xlim(-4,4)\nplt.ylim(-4,4)\nplt.savefig(\"ch0a-plot7.svg\"); nothing #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"(Image: )","category":"page"},{"location":"ch0a/#曲線-r_{13},-r_{16}","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"曲線 r_13, r_16","text":"","category":"section"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"曲線 r_13 = dfrac11+cos theta と r_16 = dfrac11-cos theta は，y 軸に対して鏡像の関係にある．","category":"page"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n\nts=0:pi/144:2pi\n#\nr13 = 1 ./ (1 .+ cos.(ts))\nx13 = r13 .* cos.(ts)\ny13 = r13 .* sin.(ts)\nplt.plot(x13,y13, \".\", label=\"r13\")\n#\nr16 = 1 ./ (1 .- cos.(ts))\nx16 = r16 .* cos.(ts)\ny16 = r16 .* sin.(ts)\nplt.plot(x16,y16, \".\", label=\"r16\")\n#\nplt.legend()\nplt.axhline(0, color=\"k\", lw=0.5)\nplt.axvline(0, color=\"k\", lw=0.5)\nplt.xlim(-4,4)\nplt.ylim(-4,4)\nplt.savefig(\"ch0a-plot8.svg\"); nothing #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch0a/","page":"付録A：2018年度・定期レポートへのコメント（その1）","title":"付録A：2018年度・定期レポートへのコメント（その1）","text":"(Image: )","category":"page"},{"location":"LICENSEja/#MIT-License-参考和訳","page":"MIT License 参考和訳","title":"MIT License 参考和訳","text":"","category":"section"},{"location":"LICENSEja/","page":"MIT License 参考和訳","title":"MIT License 参考和訳","text":"Copyright (c) 2018–2023  菅原 宏治 (Hiroharu Sugawara)","category":"page"},{"location":"LICENSEja/","page":"MIT License 参考和訳","title":"MIT License 参考和訳","text":"以下に定める条件に従い，本ソフトウェアおよび関連文書のファイル（以下「ソフトウェア」）の複製を取得するすべての人に対し，ソフトウェアを無制限に扱うことを無償で許可します．これには，ソフトウェアの複製を使用，複写，変更，結合，掲載，頒布，サブライセンス，および/または販売する権利，およびソフトウェアを提供する相手に同じことを許可する権利も無制限に含まれます．","category":"page"},{"location":"LICENSEja/","page":"MIT License 参考和訳","title":"MIT License 参考和訳","text":"上記の著作権表示および本許諾表示を，ソフトウェアのすべての複製または重要な部分に記載するものとします．","category":"page"},{"location":"LICENSEja/","page":"MIT License 参考和訳","title":"MIT License 参考和訳","text":"ソフトウェアは「現状のまま」で，明示であるか暗黙であるかを問わず，何らの保証もなく提供されます．ここでいう保証とは，商品性，特定の目的への適合性，および権利非侵害についての保証も含みますが，それに限定されるものではありません． 作者または著作権者は，契約行為，不法行為，またはそれ以外であろうと，ソフトウェアに起因または関連し，あるいはソフトウェアの使用またはその他の扱いによって生じる一切の請求，損害，その他の義務について何らの責任も負わないものとします．","category":"page"},{"location":"ch03/#ch03","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"","category":"section"},{"location":"ch03/#Jupyter-notebook-によるテキストの入力","page":"第3回：▼ 連続な曲線を描く","title":"■ Jupyter notebook によるテキストの入力","text":"","category":"section"},{"location":"ch03/#Markdownセルと-Markdown-記法","page":"第3回：▼ 連続な曲線を描く","title":"Markdownセルと Markdown 記法","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"Jupyter notebook のセルには，複数の種類（Cell type）がある．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"既定のセルの Cell type は，Code である． プログラム片を入力して，SHIFT キーと ENTER キーを同時に押して実行すると， 出力セルに実行結果が表示される．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"Cell type を Markdown に変更すると， Markdown 記式によるテキストを入力できる．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"Markdown 記式でテキストを入力し， SHIFT+ENTERを押して実行すると， Markdown記式で整形された文書が表示される．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"Markdown Cells","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"Markdown記法では，段落の区切りは空行である． 空行をはさまない行替えは，前の行に続けて，同じ段落に配置される．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"文字列の飾り記法は省略する（たくさん使用しない方がよい）．","category":"page"},{"location":"ch03/#URLリンク","page":"第3回：▼ 連続な曲線を描く","title":"URLリンク","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"URLリンクを書くには，次のように記述する．→ [ 表示名 ]( URL )","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"例","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"[Julia 1.8 Documentation](https://docs.julialang.org/en/v1.8/)","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"Julia 1.8 Documentation","category":"page"},{"location":"ch03/#数式","page":"第3回：▼ 連続な曲線を描く","title":"数式","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"Markdown記法では，数式を挿入することができる． ダラー記号 $ 1つで囲まれた数式は行内数式（inline math）， ダラー記号 $ 2つで囲まれた数式は別行立て数式（display math）である． 数式そのものは LaTeX 記法で記述する． いくつか例を示す．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"数式内の文字は変数とみなされ，斜体で表される． $x+1$ → x+1\n上付き $x^{2}$ → x^2\n下付き $x_{3}$ → x_3\n分数 $\\dfrac{a}{b}$ → dfracab\n関数 $f(x) = x^{2}+1$ → f(x) = x^2+1\n三角関数 $\\sin{x}, \\tan{x}$ → sinx tanx\n指数対数関数 $\\exp{x}, \\log{x}$ → expx logx\nテキスト内の直立体（roman style） $a\\;\\mathrm{over}\\;b$ → amathrmoverb\n総和 $\\sum_{i=0}^{m}i$ → sum_i=0^mi\n総和を「行立て」する $$\\sum_{i=0}^{m}i$$ →","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"sum_i=0^mi","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"積分 $\\int_{0}^{1}x dx$ → int_0^1x dx\n積分を「行立て」する $$\\int_{0}^{1}x dx$$ →","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"int_0^1 x dx","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"カッコのペア\n$\\left( \\dfrac{1}{2} \\right)$ → ","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"left( dfrac12 right)","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"$\\left\\{\\left( \\dfrac{1}{2} \\right)\\right\\}$ → ","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"leftleft( dfrac12 right)right","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"$\\left[\\left\\{\\left( \\dfrac{1}{2} \\right)\\right\\}\\right]$ → ","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"leftleftleft( dfrac12 right)rightright","category":"page"},{"location":"ch03/#定義域・値域","page":"第3回：▼ 連続な曲線を描く","title":"▼ 定義域・値域","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"関数 y=f(x) の定義域（domain）とは， 独立変数（independent variable）x の取りうる値からなる集合である． ちなみに，従属変数（dependent variable） y が取りうる値からなる集合を，値域（range）という","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"本章では， 定義域が実数全体，あるいは，正の数の集合である関数について， グラフを描いてみる．","category":"page"},{"location":"ch03/#定数-pi","page":"第3回：▼ 連続な曲線を描く","title":"▶ 定数 pi","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"定数 pi は円周率である．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"pi","category":"page"},{"location":"ch03/#正弦関数・余弦関数を描く","page":"第3回：▼ 連続な曲線を描く","title":"▼ 正弦関数・余弦関数を描く","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"正弦 y = sinx\n余弦 y = cosx","category":"page"},{"location":"ch03/#ラジアン単位","page":"第3回：▼ 連続な曲線を描く","title":"ラジアン単位","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"Base.cos - Function\nBase.sin - Function","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"引数がラジアン単位の正弦，余弦 sin , cos","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"sin(pi / 6)\ncos(pi / 6)","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"cos.() や sin.() のように，関数名の直後にピリオド . を入れると， ベクトルや範囲を引数にとり，計算結果をベクトルで返す．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"xs = [pi / 4, pi / 6, pi / 2];\nsin.(xs)\ncos.(xs)","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"範囲型の引数を与えて，グラフを描く．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"using PyPlot\nplt.figure() #hide\nxs = -2pi:pi/360:2pi\nplt.plot(xs, cos.(xs), label = \"cos\")\nplt.plot(xs, sin.(xs), label = \"sin\")\nplt.xlabel(\"radian\")\nplt.legend()\nplt.savefig(\"ch03-sin1-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"(Image: )","category":"page"},{"location":"ch03/#円周率単位","page":"第3回：▼ 連続な曲線を描く","title":"円周率単位","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"Base.Math.cospi - Function\nBase.Math.sinpi - Function","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"引数が円周率単位の正弦，余弦 sinpi , cospi","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"using PyPlot\nplt.figure() #hide\n\nxs = -2:1/360:2\nplt.plot(xs, cospi.(xs), label = \"cospi\")\nplt.plot(xs, sinpi.(xs), label = \"sinpi\")\nplt.xlabel(\"pi\")\nplt.legend()\nplt.savefig(\"ch03-sin2-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"(Image: )","category":"page"},{"location":"ch03/#角度単位","page":"第3回：▼ 連続な曲線を描く","title":"角度単位","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"Base.Math.cosd - Function\nBase.Math.sind - Function","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"引数が角度単位の正弦，余弦 sind , cosd","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"using PyPlot\nplt.figure() #hide\nxs = -360:1:360\nplt.plot(xs, cosd.(xs), label = \"cosd\")\nplt.plot(xs, sind.(xs), label = \"sind\")\nplt.xlabel(\"degree\")\nplt.legend()\nplt.savefig(\"ch03-sin3-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"(Image: )","category":"page"},{"location":"ch03/#ラジアンと角度との相互変換","page":"第3回：▼ 連続な曲線を描く","title":"ラジアンと角度との相互変換","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"Base.Math.rad2deg - Function\nBase.Math.deg2rad - Function","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"# rad2deg\nrad2deg(pi / 4)\nrad2deg(pi / 2)\nrad2deg(pi)\nrad2deg(-pi / 4)\n# deg2rad\ndeg2rad(45)\ndeg2rad(90)\ndeg2rad(180)\ndeg2rad(-45)","category":"page"},{"location":"ch03/#楕円を描く","page":"第3回：▼ 連続な曲線を描く","title":"▼ 楕円を描く","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"楕円を陰関数で表示すると","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"left(dfracxaright)^2+left(dfracybright)^2 = 1","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"楕円を媒介変数表示（パラメータ曲線）すると","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"beginaligned\nx  = a cos theta \ny  = b sin theta\nendaligned","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"媒介変数表示を用いて，楕円上の各点の座標を計算する．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"アスペクト比を等しくして，正しい図形を表示しよう．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n\nts = 0:pi/18:2pi\nxs = 2 * cos.(ts)\nys = sin.(ts)\nplt.plot(xs, ys)\nplt.xlim(-3, 3)\nplt.ylim(-3, 3)\nplt.savefig(\"ch03-ell1-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"(Image: )","category":"page"},{"location":"ch03/#アルキメデスの渦を描く","page":"第3回：▼ 連続な曲線を描く","title":"▼ アルキメデスの渦を描く","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"平面座標上の点 (xy)は，極座標 (r theta) でも表示できる． 平面座標 (x y)と極座標 (r theta) との対応は","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"beginaligned\nx  = r cos theta \ny  = r sin theta\nendaligned","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"である．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"次の関係で結ばれた曲線を，アルキメデスの渦という．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"r = theta","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"これを描いてみよう．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\nts = 0:pi/1800:2pi\nxs = ts .* cos.(ts)\nys = ts .* sin.(ts)\nplt.plot(xs, ys)\nplt.savefig(\"ch03-arch1-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"(Image: )","category":"page"},{"location":"ch03/#練習","page":"第3回：▼ 連続な曲線を描く","title":"▲ 練習","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"上では theta ge 0 の範囲で，曲線を描いた． パラメータ theta  0 の範囲まで含めたら，どのような曲線になるか？ 予想した上で，プログラムを書き実行し，確かめてみよ． 予想と一致していたか？","category":"page"},{"location":"ch03/#花曲線を描く","page":"第3回：▼ 連続な曲線を描く","title":"▼ 花曲線を描く","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"整数 n に対して，以下の式で表される曲線を，花曲線（flower curve）という．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"r = cos(n theta)","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"次のプログラムは，n = 3 の花曲線を描く．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\nn = 3\nts = 0:pi/1800:2pi\nrs = cos.(n * ts)\nxs = rs .* cos.(ts)\nys = rs .* sin.(ts)\nplt.plot(xs, ys)\nplt.savefig(\"ch03-flo1-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"(Image: )","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"整数 n を変えると，色々な花曲線が得られる．参考 → ▼ 描画領域を縦横に分割する","category":"page"},{"location":"ch03/#練習-2","page":"第3回：▼ 連続な曲線を描く","title":"▲ 練習","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"上の式の代わりに","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"r = sin(n theta)","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"としたら，どのような曲線になるか？ 予想した上で，プログラムを書き実行し，確かめてみよ． 予想と一致していたか？","category":"page"},{"location":"ch03/#指数関数を描く","page":"第3回：▼ 連続な曲線を描く","title":"▼ 指数関数を描く","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"正の数 a  0 を底（exponent）とする指数関数（exponential function）","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"y = a^x","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"底 a = 2 の場合．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"using PyPlot\nplt.figure() #hide\nxs = -10:0.01:10\nplt.plot(xs, 2.0 .^ xs)\nplt.savefig(\"ch03-exp1-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"(Image: )","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"底を 2 3 4 5 と増やす．x  0 の範囲のみ描く．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"plt.plot(xs, 2.0 .^ xs)\nplt.plot(xs, 3.0 .^ xs)\nplt.plot(xs, 4.0 .^ xs)\nplt.plot(xs, 5.0 .^ xs)\nplt.xlim(0, 3)\nplt.ylim(0, 100)\nplt.savefig(\"ch03-exp2-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"(Image: )","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"凡例（legend）を加える．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"clf() #hide\nplt.plot(xs, 2.0 .^ xs, label = \"a=\" * string(2))\nplt.plot(xs, 3.0 .^ xs, label = \"a=\" * string(3))\nplt.plot(xs, 4.0 .^ xs, label = \"a=\" * string(4))\nplt.plot(xs, 5.0 .^ xs, label = \"a=\" * string(5))\nplt.plot(xs, 6.0 .^ xs, label = \"a=\" * string(6))\nplt.legend()\nplt.xlim(0, 3)\nplt.ylim(0, 100)\nplt.savefig(\"ch03-exp3-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"(Image: )","category":"page"},{"location":"ch03/#練習：指数関数：繰り返しで底を変える","page":"第3回：▼ 連続な曲線を描く","title":"▲ 練習：指数関数：繰り返しで底を変える","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"上のプログラムを，for 文を用いた繰り返しとして書き直してみよ． すなわち，plt.plot() 文を1つにしてみよ．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"参考→ ■ for 文","category":"page"},{"location":"ch03/#自然対数の底","page":"第3回：▼ 連続な曲線を描く","title":"▶ 自然対数の底","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"定数  ℯ は，自然対数の底である．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"ℯ","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"note: Note\nℯ は e とは異なる文字である． 「ℯ」は，バックスラッシュ \\ に続けて euler と入力してから，TABキーを押すことによって入力できる．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"定数 Base.MathConstants.e も，自然対数の底である．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"Base.MathConstants.e","category":"page"},{"location":"ch03/#軸のスケールを変える","page":"第3回：▼ 連続な曲線を描く","title":"▶ 軸のスケールを変える","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"x 軸，y 軸のスケールを指定するには，関数 xscale , yscale を用いる． 何も指定しない場合（既定値）は，線形 linear である． 引数に log を指定すると，10 の対数で，その軸を描く．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"y 軸だけ対数スケール yscale(\"log\") に指定したグラフが，よく見る片対数グラフである．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"using PyPlot\nplt.figure() #hide\nxs = -4:0.01:4\nfor a in [2.0, ℯ, 3.0, 4.0, 5.0, 6.0]\n   plt.plot(xs, a .^ xs, label = \"a=\" * string(a))\nend\nplt.yscale(\"log\")\nplt.xlim(-1, 3)\nplt.ylim(1e-1, 1e3)\nplt.legend()\nplt.savefig(\"ch03-exp4-plot.svg\"); nothing; #hide\nnothing #hide","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"(Image: )","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"すべての底について，指数関数は a^0 = 1 = 10^0 で交わることを観察するために補助線を引こう．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"以下の文を追加する．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"plt.axvline(0, color = \"k\", lw = 0.5)\nplt.axhline(1, color = \"k\", lw = 0.5)\nplt.savefig(\"ch03-exp4b-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"(Image: )","category":"page"},{"location":"ch03/#関数-exp,-exp2,-exp10","page":"第3回：▼ 連続な曲線を描く","title":"▶ 関数 exp, exp2, exp10","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"底 2 e 10 については，exp で始まる関数が定義されている．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"exp2 : 底が 2 の指数関数\nexp : 自然対数（底は，自然対数の底 e ）\nexp10 : 底が 10 の指数関数","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"using PyPlot\nplt.figure() #hide\nxs = -4:0.01:4\nplt.plot(xs, exp2.(xs), label = \"exp2\")\nplt.plot(xs, exp.(xs), label = \"exp\")\nplt.plot(xs, exp10.(xs), label = \"exp10\")\nplt.yscale(\"log\")\nplt.xlim(-1, 3)\nplt.ylim(1e-1, 1e3)\nplt.legend()\nplt.axvline(0, color = \"k\", lw = 0.5)\nplt.axhline(1, color = \"k\", lw = 0.5)\nplt.savefig(\"ch03-exp7-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"(Image: )","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"関数も名前であり，名前をつけること（＝変数に代入すること）ができる． 関数のリストを作って for 文で繰り返してみよう． 関数名を string 関数に与えると，関数名の文字列を返す．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"using PyPlot\nplt.figure() #hide\nxs = -4:0.01:4\nfor f in [exp2, exp, exp10]\n   plt.plot(xs, f.(xs), label = string(f))\nend\nplt.yscale(\"log\")\nplt.xlim(-1, 3)\nplt.ylim(1e-1, 1e3)\nplt.legend()\nplt.axvline(0, color = \"k\", lw = 0.5)\nplt.axhline(1, color = \"k\", lw = 0.5)\nplt.savefig(\"ch03-exp8-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"(Image: )","category":"page"},{"location":"ch03/#平方根を描く","page":"第3回：▼ 連続な曲線を描く","title":"▼ 平方根を描く","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"Base.sqrt - Function","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"二乗すると x になる数を，x の平方根（square root of x ）という． 関数 sqrt(x) は x の平方根を求める関数である．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"sqrt(0)\nsqrt(2)\nsqrt(3)","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"平方と平方根を同じグラフに描いてみよう． 直線 y=x に対して，鏡の関係になっている．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\nxs = 0:0.01:3\nplt.plot(xs, xs .^ 2, label = \"square\")\nplt.plot(xs, sqrt.(xs), label = \"square root\")\nplt.plot(xs, xs, \"k\", lw = 0.5, label = \"y=x\")\nplt.xlim(-0.2, 2.2)\nplt.ylim(-0.2, 2.2)\nplt.xlabel(\"x\")\nplt.ylabel(\"y\")\nplt.legend()\nplt.axvline(1, color = \"k\", lw = 0.5)\nplt.axhline(1, color = \"k\", lw = 0.5)\nplt.savefig(\"ch03-sr1-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"(Image: )","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"note: Note\n負の数 x  0 を関数 sqrt の引数（ひきすう)に与えると，例外（exception）が発生する．が，複素数を引数として与えると，複素数として計算できる（複素数は，もっと後の回で説明する）．→ ▶ 負の数に対する平方根","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"sqrt(-1) # DomainError\nsqrt(complex(-1))  # 複素数を引数に与える","category":"page"},{"location":"ch03/#立方根を描く","page":"第3回：▼ 連続な曲線を描く","title":"▼ 立方根を描く","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"Base.Math.cbrt - Function","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"三乗すると x になる数を，x の立方根（cube root of x ）という． 関数 cbrt(x) は x の立方根を求める関数である．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"立方と立方根を同じグラフに描いてみよう． 直線 y=x に対して，鏡の関係になっている．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\nxs = 0:0.01:3\nplt.plot(xs, xs .^ 3, label = \"cubic\")\nplt.plot(xs, cbrt.(xs), label = \"cube root\")\nplt.plot(xs, xs, \"k\", lw = 0.5, label = \"y=x\")\nplt.xlim(-0.2, 2.2)\nplt.ylim(-0.2, 2.2)\nplt.xlabel(\"x\")\nplt.ylabel(\"y\")\nplt.legend()\nplt.axvline(1, color = \"k\", lw = 0.5)\nplt.axhline(1, color = \"k\", lw = 0.5)\nplt.savefig(\"ch03-cr1-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"(Image: )","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"平方と平方根，立方と立方根を，同じグラフに描こう． 点 (11) で，曲線が交差している．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n\nxs = 0:0.01:3\nplt.plot(xs, xs .^ 2, label = \"square\")\nplt.plot(xs, sqrt.(xs), label = \"square root\")\nplt.plot(xs, xs .^ 3, label = \"cube\")\nplt.plot(xs, cbrt.(xs), label = \"cube root\")\nplt.plot(xs, xs, \"k\", lw = 0.5, label = \"y=x\")\nplt.legend()\nplt.xlim(-0.2, 2.2)\nplt.ylim(-0.2, 2.2)\nplt.xlabel(\"x\")\nplt.ylabel(\"y\")\nplt.axvline(1, color = \"k\", lw = 0.5)\nplt.axhline(1, color = \"k\", lw = 0.5)\nplt.savefig(\"ch03-pr1-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"(Image: )","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"平方根と立方根の関数のリストを作って for 文で繰り返してみよう． （結果のグラフは，上と同じなので省略する）","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"using PyPlot\nplt.figure();  #hide\nplt.axes().set_aspect(\"equal\")\nxs = 0:0.01:3\nfor f in [sqrt, cbrt]\n   plt.plot(xs, f.(xs), label = string(f))\nend\nplt.legend()\nplt.xlim(-0.2, 2.2)\nplt.ylim(-0.2, 2.2)\nplt.xlabel(\"x\")\nplt.ylabel(\"y\")\nplt.axvline(1, color = \"k\", lw = 0.5)\nplt.axhline(1, color = \"k\", lw = 0.5)\nplt.savefig(\"ch03-pr2-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch03/#冪乗根を描く","page":"第3回：▼ 連続な曲線を描く","title":"▼ 冪乗根を描く","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"一般に，正数 x  0 と 2 以上の整数 n に対して，y^n = x の解， すなわち，y = sqrtnx = x^dfrac1n を，x の n 乗根（root of n-th power, n-th root）という．n を指定せずに，冪乗根（べきじょうこん）あるいは冪根（べきこん）と総称する． 「冪」の代わりに「巾」の略字を当てることもある．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"PyPlotパッケージに用意された関数 axvline() で垂直線（vertical line）を描く． 引数は，前回説明した関数 axhline（水平線を描く）と同じである．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\nxs = 0:0.01:3\nplt.plot(xs, xs .^ (1 / 2), label = \"n=2\")\nplt.plot(xs, xs .^ (1 / 3), label = \"n=3\")\nplt.plot(xs, xs .^ (1 / 4), label = \"n=4\")\nplt.plot(xs, xs .^ (1 / 5), label = \"n=5\")\nplt.legend()\nplt.xlim(-0.2, 2.2)\nplt.ylim(-0.2, 2.2)\nplt.axhline(1, color = \"k\", lw = 0.5)\nplt.axvline(1, color = \"k\", lw = 0.5)\nplt.savefig(\"ch03-pr3-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"(Image: )","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"指数 n で繰り返してみる．縦軸・横軸とも対数表示にする．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"using PyPlot\nplt.figure() #hide\nxs = 0:0.01:10\nfor n = 2:5\n   plt.plot(xs, xs .^ (1 / n), label = \"y=x^(1/\" * string(n) * \")\")\nend\nplt.legend()\nplt.xlabel(\"x\")\nplt.ylabel(\"y\")\nplt.xlim(0.1, 10.0)\nplt.ylim(0.1, 10.0)\nplt.xscale(\"log\")\nplt.yscale(\"log\")\nplt.axhline(1, color = \"k\", lw = 0.5)\nplt.axvline(1, color = \"k\", lw = 0.5)\nplt.savefig(\"ch03-pr4-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"(Image: )","category":"page"},{"location":"ch03/#自然対数","page":"第3回：▼ 連続な曲線を描く","title":"▼ 自然対数","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"Base.log — Method","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"正の数 x0 に対して，x=e^y を満たす数 y を，x の自然対数（natural logarithm of x,Napierian logarithm,あるいは単に，logarithm）といい，logx と書く．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"$e$ は，自然対数の底，あるいはネピア（Napier）の数である．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"関数 log(x)は，自然対数を求める関数である．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"log(1)\nlog(ℯ)\nlog(ℯ^2)","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"指数関数を，まず線形なグラフで描く．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"using PyPlot\nplt.figure() #hide\nxs = 0.1:0.01:100\nplt.plot(xs, log.(xs))\nplt.savefig(\"ch03-log1-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"(Image: )","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"今度は，片対数グラフで描く． x 軸を対数で表示すると，直線で表示される．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"plt.plot(xs, log.(xs))\nplt.xscale(\"log\")\nplt.savefig(\"ch03-log2-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"(Image: )","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"note: Note\n数学と同様，負の数に対する対数関数は定義されていない．引数に負数を与えると例外が起こる．julia> log(-1) # DomainError\nERROR: DomainError with -1.0:が，負数を複素数を引数として与えると計算できる．何故このような結果になるのか，複素関数論で学ぶ．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"log(complex(-1))  # 複素数を引数に与える","category":"page"},{"location":"ch03/#対数関数","page":"第3回：▼ 連続な曲線を描く","title":"▼ 対数関数","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"Base.log — Method","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"正の数 a  0 に対して，x=a^y を満たす数 y を， 底 a に対する x の対数（logarithm of a to base b; base a logarithm of x ）といい，log_ay と書く．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"関数 log(a,y) のように，引数（ひきすう）2つを与えると， 底 a に対する x の対数が得られる．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"片対数グラフを描く．log_a1=0 で曲線が交差する．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"using PyPlot\nplt.figure() #hide\nxs = 0.1:0.01:100\nplt.plot(xs, log.(2, xs), label = string(2))\nplt.plot(xs, log.(xs), label = string(ℯ))\nplt.plot(xs, log.(3, xs), label = string(3))\nplt.plot(xs, log.(10, xs), label = string(10))\nplt.xscale(\"log\")\nplt.axhline(0, color = \"k\", lw = 0.5)\nplt.axvline(1, color = \"k\", lw = 0.5)\nplt.legend()\nplt.savefig(\"ch03-log3-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"(Image: )","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"底を for 文で変えてみる．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"using PyPlot\nplt.figure() #hide\nxs = 0.1:0.01:100\nfor a in [2, ℯ, 3, 10]\n   plt.plot(xs, log.(a, xs), label = string(a))\nend\nplt.xscale(\"log\")\nplt.axhline(0, color = \"k\", lw = 0.5)\nplt.axvline(1, color = \"k\", lw = 0.5)\nplt.legend()\nplt.savefig(\"ch03-log4-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"(Image: )","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"Base.log2 - Function\nBase.log10 - Function","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"底 2 と 10 に対しては，それぞれ関数 log2 と log10 が用意されている．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"clf() #hide\nplt.plot(xs, log2.(xs), label = \"log2\")\nplt.plot(xs, log.(xs), label = \"log\")\nplt.plot(xs, log10.(xs), label = \"log10\")\nplt.xscale(\"log\")\nplt.legend()\nplt.axhline(0, color = \"k\", lw = 0.5)\nplt.axvline(1, color = \"k\", lw = 0.5)\nplt.savefig(\"ch03-log5-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"(Image: )","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"関数名で繰り返してみる．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"clf() #hide\nfor f in [log2, log, log10]\n   plt.plot(xs, f.(xs), label = string(f))\nend\nplt.xscale(\"log\")\nplt.legend()\nplt.axhline(0, color = \"k\", lw = 0.5)\nplt.axvline(1, color = \"k\", lw = 0.5)\nplt.savefig(\"ch03-log6-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"(Image: )","category":"page"},{"location":"ch03/#ダブルYグラフを描く","page":"第3回：▼ 連続な曲線を描く","title":"▼ ダブルYグラフを描く","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"ダブルYグラフは， x軸を共通として，左と右に，2つの y軸を配置するグラフである．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"using PyPlot\nplt.figure() #hide\nxs = -2:0.1:2\nfig, ax1 = plt.subplots()\nax1.plot(xs, -xs, \"r\")\nax2 = ax1.twinx()\nax2.plot(xs, xs .^ 2, \"b\")\nplt.savefig(\"ch03-tw1-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"(Image: )","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"これを描くには，次の手順をとる．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"まず，plt.subplots() 関数を用いて，2つのデータ（オブジェクト）を取得する．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"fig, ax1=plt.subplots()","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"最初の返り値 fig は，図の情報をオブジェクトである．\n次の返り値 ax は，軸の情報を含むオブジェクトである．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"using PyPlot\nfig, ax1 = plt.subplots()\nax1.set_aspect(\"equal\")","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"次に，以下のように，x 軸が共通な， 新しい座標系（右 y 軸）のデータ（オブジェクト） ax2 を作成する．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"ax2=ax1.twinx()","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"座標系 ax に対して描画するには，ax.plot(<<plot引数>>) の形式を用いる．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"using PyPlot\nplt.figure() #hide\nfig, ax1 = plt.subplots()\nax1.set_aspect(\"equal\")\n\nxs = -2:0.1:2\nax1.plot(xs, -xs, \"r\")\nax2 = ax1.twinx()\nax2.plot(xs, xs .^ 2, \"b\")\nplt.savefig(\"ch03-tw1-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch03/#鉛直上投げ自由落下運動を描く","page":"第3回：▼ 連続な曲線を描く","title":"▼ 鉛直上投げ自由落下運動を描く","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"（力学の問題）","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"鉛直上向きに投げられた球が，重力のみを感じて自由落下するとする． 時刻 t=0において，高さ y=0, 鉛直上向きの速度 v_0 とすると， 時刻 tにおける，高さ yと 鉛直上向きの速度 v は，以下のように表される．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"beginaligned\nv  = v_0 - gt \ny  = v_0 t - dfrac12gt^2\nendaligned","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"各時刻の速度を描く． 長さの単位としてメートル m , 時間の単位として秒 s を（組立て単位を含めて）一貫して用いる．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"重力加速度 g = 98mathrmms^2","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"初速度を v_0 = 10mathrmms としよう．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"各時刻の速度を描く．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"using PyPlot\nplt.figure() #hide\nv0 = 10 # m/s\ng = 9.8 # m/s^2\n\nts = 0:0.1:3 # s\nvs = v0 .- g * ts\nplt.plot(ts, vs)\nplt.savefig(\"ch03-gy1-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"(Image: )","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"各時刻の高さを描く．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"ys = v0 * ts .- g * ts .^ 2 / 2\nplt.plot(ts, ys)\nplt.savefig(\"ch03-gy2-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"(Image: )","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"この2つのグラフを，時刻を，共通の横軸にとって描こう．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"clf() #hide\nfig, ax1 = plt.subplots()\nax1.plot(ts, vs)\nax2 = ax1.twinx()\nax2.plot(ts, ys)\nplt.savefig(\"ch03-gy3-plot.svg\"); nothing; #hide\n# DoNt close : plt.close(\"all\") #hide","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"(Image: )","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"各軸に対して，描画範囲を指定する． 各軸オブジェクトに対して関数 set_xlim( または set_ylim( を用いる（関数 plt.xlim( または plt.ylim( は，軸オブジェクトに対して用いない）．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"共通な下軸に対しては，元の軸オブジェクト ax1 に対して指定する． 左軸，右軸は，各軸のオブジェクトに対して指定する．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"各軸にラベルをつけるには， 各軸オブジェクトに対して関数 set_xlabel( または set_ylabel( を用いる（関数 plt.xlabel( または plt.ylabel( は，軸オブジェクトに対して用いない）．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"ax1.set_xlabel(\"time / s\")\nax1.set_xlim(-0.3, 2.3)\nax1.set_ylim(-12, 12)\nax2.set_ylim(-6, 6)\nax1.set_ylabel(\"velocity / m s^-1\")\nax2.set_ylabel(\"height / m\")\nplt.savefig(\"ch03-gy4-plot.svg\"); nothing; #hide\n# DoNt close : plt.close(\"all\") #hide","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"(Image: )","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"各軸に対して，水平線 axvline や垂直線 axvline を描く．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"時刻 dfracv_0g で，速度が 0 となり，最大の高さを取る様子が見える．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"ax1.axvline(v0 / g, color = \"k\", lw = 0.5)\nax1.axvline(0, color = \"k\", lw = 0.5)\nax1.axhline(0, color = \"k\", lw = 0.5)\nplt.savefig(\"ch03-gy5-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"(Image: )","category":"page"},{"location":"ch03/#練習：鉛直上投げ自由落下運動","page":"第3回：▼ 連続な曲線を描く","title":"▲ 練習：鉛直上投げ自由落下運動","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"初速度 v0 を増減して描いてみよ．","category":"page"},{"location":"ch03/#ダブルYグラフに共通な凡例の作成","page":"第3回：▼ 連続な曲線を描く","title":"●▼ ダブルYグラフに共通な凡例の作成","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"複数軸に共通な凡例を描くには，技巧が少々必要である．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"まず，前節のプログラムをまとめて書こう． 2つの曲線に，色を指定しよう．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"using PyPlot\nplt.figure() #hide\nfig, ax1 = plt.subplots()\nax2 = ax1.twinx()\nax1.plot(ts, vs, \"b\", label = \"velocity\")\nax2.plot(ts, ys, \"r\", label = \"height\")\nax1.set_xlabel(\"time / s\")\nax1.set_xlim(-0.3, 2.3)\nax1.set_ylim(-12, 12)\nax2.set_ylim(-6, 6)\nax1.set_ylabel(\"velocity / m s^-1\")\nax2.set_ylabel(\"height / m\")\nax1.axvline(10 / 9.8, color = \"k\", lw = 0.5)\nax1.axvline(0, color = \"k\", lw = 0.5)\nax1.axhline(0, color = \"k\", lw = 0.5)\n# don' close #hide","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"各軸に含まれる曲線の形状と凡例を， get_legend_handles_labels 関数を用いて，取り出す．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"2つの軸に含まれる形状と凡例を，それぞれ結合する． 片方の軸に対して，結合した形状と凡例を追加する．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"lns1, lbl1 = ax1.get_legend_handles_labels()\nlns2, lbl2 = ax2.get_legend_handles_labels()\nlns = [lns1; lns2]\nlbls = [lbl1; lbl2]\n\nax2.legend(lns, lbls, loc = 0)\nplt.savefig(\"ch03-gy6-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"(Image: )","category":"page"},{"location":"ch03/#練習：ダブルYグラフ：鉛直上投げ自由落下運動","page":"第3回：▼ 連続な曲線を描く","title":"▲ 練習：ダブルYグラフ：鉛直上投げ自由落下運動","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"初速度 v0 を，色々変えて描け．","category":"page"},{"location":"ch03/#描画領域を縦横に分割する","page":"第3回：▼ 連続な曲線を描く","title":"▼ 描画領域を縦横に分割する","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"グラフの描画領域を縦横に分割するには，plt.subplots(i,j) 関数を用いて，2つのデータ（オブジェクト）を取得する．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"fig, axs=plt.subplots(i,j)","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"第1引数 i は縦方向の分割数， 第2引数 j は横報告の分割数を指定する． 左から右へ，上から下へ，1から順番に軸オブジェクトが作成される．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"最初の返り値 fig は，図の情報をオブジェクトである．\n次の返り値 axs は，軸オブジェクトの配列である．axs[k] は， k 番目の軸オブジェクトを表す．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"▼ 花曲線を描くの例で n  0 を増減して，各描画範囲に描画する．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"using PyPlot\nfig, axs = plt.subplots(2, 3)\nts = 0:pi/1800:2pi\nfor i = 1:6\n   ax = axs[i]\n   ax.set_aspect(\"equal\")\n   local n = i + 2\n   local rs = cos.(n * ts)\n   local xs = rs .* cos.(ts)\n   local ys = rs .* sin.(ts)\n   ax.plot(xs, ys)\n   ax.set_xlim(-1.1, 1.1)\n   ax.set_ylim(-1.1, 1.1)\n   ax.set_xticks([])\n   ax.set_yticks([])\nend\nplt.savefig(\"ch03-flo2-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"(Image: )","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"note: Note\n上のプログラムでは，軸オブジェクトの配列を表すのに axs と表記した．英語の軸 axis の複数形である axes という綴りも PyPlot パッケージで定義された名前であり，axes を書き換えてしまうと，描画の指令が期待通りにならなくなる．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"note: Note\nax.set_xticks([]) は，ax のx軸の目盛位置を消去する．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"軸を消去するには ax.axis(\"off\") を使う．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"using PyPlot\nfig, axs = plt.subplots(2, 3)\nts = 0:pi/1800:2pi\nfor i = 1:6\n   ax = axs[i]\n   ax.set_aspect(\"equal\")\n   local n = i + 2\n   local rs = cos.(n * ts)\n   local xs = rs .* cos.(ts)\n   local ys = rs .* sin.(ts)\n   ax.plot(xs, ys)\n   ax.set_xlim(-1.1, 1.1)\n   ax.set_ylim(-1.1, 1.1)\n   ax.axis(\"off\")\nend\nplt.savefig(\"ch03-flo3-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"(Image: )","category":"page"},{"location":"ch03/#練習：斜めに飛ばした球の軌跡","page":"第3回：▼ 連続な曲線を描く","title":"▲ 練習：斜めに飛ばした球の軌跡","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"（力学の問題）","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"鉛直上向きに対して 角度 bをつけて投げた球が，重力のみを感じて運動するとき，その球の軌跡を描け．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"最初は b = 15^circとして描け．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"次に，角度bを変えた場合を，1つのグラフに示せ．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"余裕があれば，Jupyter NotebookのMarkdownセルを用いて，解き方や式などの文飾を加えよ．","category":"page"},{"location":"ch03/#練習：色々な連続曲線を描く","page":"第3回：▼ 連続な曲線を描く","title":"▲ 練習：色々な連続曲線を描く","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"ここまで紹介した関数を使って，色々な連続曲線を描いてみよ． Jupyter notebookの Markdown セルを用いて，説明文も加えよ．","category":"page"},{"location":"ch03/#今回のまとめ","page":"第3回：▼ 連続な曲線を描く","title":"★ 今回のまとめ","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"Jupyter Notebookを用いたテキスト入力（Markdownセル）\n実数全域で定義された関数\n正弦・余弦関数\n楕円\n極座標で著された曲線\nアルキメデスの渦\n花曲線\n指数関数\n正数を定義域とする関数\n平方根・立方根・冪乗根\n対数関数\n複数のグラフを描く方法\nダブルYグラフ\nダブルYグラフに共通な凡例の作成\n描画領域の分割","category":"page"},{"location":"ch04/#ch04","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"","category":"section"},{"location":"ch04/#plot関数のフォーマット・パラメータ","page":"第4回：▼ 不連続な曲線を描く","title":"■ plot関数のフォーマット・パラメータ","text":"","category":"section"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"PyPlot パッケージに含まれる関数 plot は， 複数回起動する毎に曲線の見た目を変える．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"見た目を個別に変えるには，plot 関数のデータを指定した直後に， 文字列（ fmt パラメータ）を指定する．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"fmt パラメータは， 色，マーカー種類，線の見た目を，1文字ないし2文字で指定する． 指定しなければ，規定値が選ばれる．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"・色を変える例","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"using PyPlot\nplt.figure() #hide\nxs = -10:0.1:10\nplt.plot(xs, 9.0 .^ xs, \"b\", label = \"b\") # blue\nplt.plot(xs, 8.0 .^ xs, \"g\", label = \"g\") # green\nplt.plot(xs, 7.0 .^ xs, \"r\", label = \"r\") # red\nplt.plot(xs, 6.0 .^ xs, \"c\", label = \"c\") # cyan\nplt.plot(xs, 5.0 .^ xs, \"m\", label = \"m\") # magenda\nplt.plot(xs, 4.0 .^ xs, \"y\", label = \"y\") # yellow\nplt.plot(xs, 3.0 .^ xs, \"k\", label = \"k\") # black\nplt.plot(xs, 2.0 .^ xs, \"w\", label = \"w\") # white (白背景では見えない)\nplt.xlim(0, 3)\nplt.ylim(0, 100)\nplt.legend()\nplt.savefig(\"ch04-pyplot1-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"(Image: )","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"・マーカーの形を変える例． マーカーの色はすべて青とした","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"using PyPlot\nplt.figure() #hide\nxs = -2:0.2:2\nys = xs .^ 2\nplt.plot(xs, ys, \"b.\", label = \".\") # point\nplt.plot(xs, ys .- 2, \"b,\", label = \",\") # pixel\nplt.plot(xs, ys .- 4, \"bo\", label = \"o\") # circle\nplt.plot(xs, ys .- 6, \"bs\", label = \"s\") # square\nplt.plot(xs, ys .- 8, \"b*\", label = \"*\") # star\nplt.plot(xs, ys .- 10, \"b+\", label = \"+\") # plus\nplt.plot(xs, ys .- 12, \"bx\", label = \"x\") # x\nplt.plot(xs, ys .- 14, \"bD\", label = \"D\") # diamond\nplt.plot(xs, ys .- 16, \"bd\", label = \"d\") # thin diamond\nplt.xlim(-3, 5)\nplt.legend(loc=\"upper right\")\nplt.savefig(\"ch04-pyplot2-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"(Image: )","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"note: Note\nplt.legend() 命令は，最適と考える位置に凡例を描く．キーワード引数 loc を用いると，凡例を描画する位置を指定できる。以下の整数または文字列で，大まかな位置を指定できる．（試してみよ） ・ 0 ，\"best\" ・ 1 ，\"upper right\" ・ 2 ，\"upper left\" ・ 3 ，\"lower left\" ・ 4 ，\"lower right\" ・ 5 ，\"right\" ・ 6 ，\"center left\" ・ 7 ，\"center right\" ・ 8 ，\"lower center\" ・ 9 ，\"upper center\" ・10 ，\"center\"","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"・線のスタイルを変える例","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"using PyPlot\nplt.figure() #hide\nxs = -2:0.2:2\nys = xs .^ 3 - xs .^ 2\nplt.plot(xs, ys .- 0, \"r-\", label = \"-\")  # solid line\nplt.plot(xs, ys .- 2, \"r--\", label = \"--\") # dashed line\nplt.plot(xs, ys .- 4, \"r-.\", label = \"-.\") # dash-dot line\nplt.plot(xs, ys .- 6, \"r:\", label = \":\")  # dotted line plt.xlim(-2.2,2.2)\nplt.savefig(\"ch04-pyplot3-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"(Image: )","category":"page"},{"location":"ch04/#0による除算","page":"第4回：▼ 不連続な曲線を描く","title":"■ 0による除算","text":"","category":"section"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"筆算では 0 による除算の結果は未定義である．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"Julia では，0 による除算は，例外は発生せず， 「数でない数」 Inf, -Inf, NaN のどれかが得られる．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"Inf は，無限大 Infinity に由来する． NaN は，数でない Not a Number に由来する．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"1 / 0\n-1 / 0\n0 / 0","category":"page"},{"location":"ch04/#関数が連続とは","page":"第4回：▼ 不連続な曲線を描く","title":"▼ 関数が連続とは","text":"","category":"section"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"関数が連続であるとは， 関数のグラフがつながっている，ちぎれていないことをいう．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"「関数 f(x) は x=a で連続」とは，","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"lim_x longrightarrow a f(x)","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"が存在して，その値が f(a) に等しいと定義される．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"不連続とは，連続でないことである． ただし，不連続な関数の多くは，連続な部分（枝，branch）を含む，","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"この章では，主に，連続ではない関数のグラフを描く．","category":"page"},{"location":"ch04/#逆数関数を描く","page":"第4回：▼ 不連続な曲線を描く","title":"▼ 逆数関数を描く","text":"","category":"section"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"逆数関数 y=dfrac1x を描いてみよう．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"note: Note\n逆数関数 reciprocal function という．逆関数 inverse function と区別されたい．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"さて，dfrac10 の値は Inf であるが，plot 関数は「数でない数」をスキップして何も描かない．分母 0 の除算を特別扱いする必要はない．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"逆数関数は，x=0 で不連続であり，x の正負に対応して2つの枝を持つ．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n\nxs = -3:0.1:3\nplt.plot(xs, 1.0 ./ xs)\nplt.xlim(-3, 3)\nplt.ylim(-3, 3)\nplt.savefig(\"ch04-recipro1-plot.svg\"); nothing; #hide\n# DoNt close: plt.close(\"all\") #hide","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"(Image: )","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"続けて，y=x，y=-x，水平線 y = 0，垂直線 x = 0，を追加しよう．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"plt.plot(xs, xs, color = \"k\", lw = 0.5)\nplt.plot(xs, -1 * xs, color = \"k\", lw = 0.5)\nplt.axhline(0, color = \"k\", lw = 0.5)\nplt.axvline(0, color = \"k\", lw = 0.5)\nplt.savefig(\"ch04-recipro2-plot.svg\"); #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"(Image: )","category":"page"},{"location":"ch04/#練習","page":"第4回：▼ 不連続な曲線を描く","title":"▲ 練習","text":"","category":"section"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"（プログラミングでなく，数学の話題）","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"数学では「何らかの操作を行った結果が，元と重なること」を， その操作に対して対称である（symmetric）という．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"上のグラフを観察すると，逆数関数は，いくつかの操作に対して対称であることがわかる．どのような操作か？","category":"page"},{"location":"ch04/#不連続な有理式を描く","page":"第4回：▼ 不連続な曲線を描く","title":"▼ 不連続な有理式を描く","text":"","category":"section"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"有理関数とは，多項式（分子）を多項式（分母）で割った関数である．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"以下の有理関数を描こう．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"y = dfracx^3+8x^3+3x^2-4x-12","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"まず，分母を描く．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"using PyPlot\nplt.figure() #hide\nxs = -10:0.1:10\nqs = xs .^ 3 .+ 3xs .^ 2 .- 4xs .- 12\nplt.plot(xs, qs)\nplt.ylim(-20, 20)\nplt.xlim(-4, 4)\nplt.axhline(0, color = \"k\", lw = 0.5)\nplt.axvline(-3, color = \"k\", lw = 0.5)\nplt.axvline(-2, color = \"k\", lw = 0.5)\nplt.axvline(2, color = \"k\", lw = 0.5)\nplt.savefig(\"ch04-dis1-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"(Image: )","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"分母は x=-3 -2 2 で 0 となるから， 上の有理関数は，この三点で不連続となる「可能性」がある．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"では，上の有理関数を描いてみる． 逆数関数の描画と同じように，分母 0 となる場合を特別扱いする必要はない．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"using PyPlot\nplt.figure() #hide\nxs = -10:0.05:10\nps = xs .^ 3 .+ 8\nqs = xs .^ 3 .+ 3xs .^ 2 .- 4xs .- 12\nys = ps ./ qs\nplt.plot(xs, ys)\nplt.ylim(-10, 10)\nplt.xlim(-4, 4)\nplt.axhline(0, color = \"k\", lw = 0.5)\nplt.axvline(-3, color = \"k\", lw = 0.5)\nplt.axvline(2, color = \"k\", lw = 0.5)\nplt.savefig(\"ch04-dis2-plot.svg\"); #hide\nplt.close(\"all\"); #hide","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"(Image: )","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"実際には，x=-2 では不連続ではない． 分子・分母を共通項 (x+2) で割れるからである．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"もう少し，横軸の範囲を狭めて描く．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"using PyPlot\nplt.figure() #hide\nxs = -10:0.05:10\nps = xs .^ 3 .+ 8\nqs = xs .^ 3 .+ 3xs .^ 2 .- 4xs .- 12\nys = ps ./ qs\nplt.plot(xs, ys)\nplt.ylim(-10, 10)\nplt.xlim(-3, 3)\nplt.axhline(0, color = \"k\", lw = 0.5)\nplt.axvline(-3, color = \"k\", lw = 0.5)\nplt.axvline(-2, color = \"k\", lw = 0.5)\nplt.axvline(2, color = \"k\", lw = 0.5)\nplt.savefig(\"ch04-dis3-plot.svg\"); #hide\nplt.close(\"all\"); #hide","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"(Image: )","category":"page"},{"location":"ch04/#練習-2","page":"第4回：▼ 不連続な曲線を描く","title":"▲ 練習","text":"","category":"section"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"上の有理関数で，x=-2 に対する値を求めよ．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"分子・分母は共通項 (x+2) で割った関数のグラフを描き， 上のグラフと重なることを確かめよ．2つの曲線を比較するための描き方は，下の ▼ 周期関数 を参考にせよ（本章を通読してから取り組め）．","category":"page"},{"location":"ch04/#正接関数・余接関数を描く","page":"第4回：▼ 不連続な曲線を描く","title":"▼ 正接関数・余接関数を描く","text":"","category":"section"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"正接 y = tanx =dfracsinxcosx\n余接 y = cotx =dfraccosxsinx","category":"page"},{"location":"ch04/#ラジアン単位","page":"第4回：▼ 不連続な曲線を描く","title":"ラジアン単位","text":"","category":"section"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"Base.tan - Function\nBase.Math.cot - Function","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"正接 tanxは，dfracpi2 の奇数倍で不連続である．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"余接 cotxは，dfracpi2 の偶数倍で不連続である．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"using PyPlot\nplt.figure() #hide\nxs = -2pi:pi/360:2pi\nplt.plot(xs, tan.(xs), label = \"tan\")\nplt.plot(xs, cot.(xs), label = \"cot\")\nplt.ylim(-1e1, 1e1)\nplt.xlabel(\"radian\")\nplt.legend()\nplt.savefig(\"ch04-tan1-plot.svg\"); #hide\nplt.close(\"all\"); #hide","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"(Image: )","category":"page"},{"location":"ch04/#角度単位","page":"第4回：▼ 不連続な曲線を描く","title":"角度単位","text":"","category":"section"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"Base.Math.tand - Function\nBase.Math.cotd - Function","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"using PyPlot\nplt.figure() #hide\nxs = -360:1:360\nplt.plot(xs, tand.(xs), label = \"tand\")\nplt.plot(xs, cotd.(xs), label = \"cotd\")\nplt.xlabel(\"degree\")\nplt.ylim(-1e1, 1e1)\nplt.legend()\nplt.savefig(\"ch04-tan2-plot.svg\"); #hide\nplt.close(\"all\"); #hide","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"(Image: )","category":"page"},{"location":"ch04/#周期関数","page":"第4回：▼ 不連続な曲線を描く","title":"▼ 周期関数","text":"","category":"section"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"f(t+T) = f(t)","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"上式のように，横軸を T だけ平行移動しても， 元の形に重なる関数を周期関数（periodic function）という． T は，周期（period） と呼ばれる．","category":"page"},{"location":"ch04/#周期関数を確認する","page":"第4回：▼ 不連続な曲線を描く","title":"●▼ 周期関数を確認する","text":"","category":"section"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"ラジアン単位の正接関数 tan は，周期 2pi である． 平行移動して重なることを，図示してみよう．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"比較の基準となる曲線は fmt=\"bo\"（blue, circle, 青い円）で描いた．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"比較される曲線は fmt=\"r.\" （red, point, 赤い点）で描いた．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"青い円の真ん中に，赤い点が描かれている．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"using PyPlot\nplt.figure(); #hide\n\nxs = -2pi:pi/18:2pi\nplt.plot(xs, tan.(xs), \"bo\", label = \"tan\")\nplt.plot(xs, tan.(xs .+ 2 * pi), \"r.\", label = \"tan, shifted by 2pi\")\nplt.ylim(-1e1, 1e1)\nplt.xlim(-1.2 * pi, 1.2 * pi)\nplt.xlabel(\"radian\")\nplt.legend()\nplt.savefig(\"ch04-tan1t-plot.svg\"); #hide\nplt.close(\"all\"); #hide","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"(Image: )","category":"page"},{"location":"ch04/#符号関数を描く","page":"第4回：▼ 不連続な曲線を描く","title":"▼ 符号関数を描く","text":"","category":"section"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"Base.sign - Function","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"関数 sign(x) は，","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"条件 x  0 なら 1 を，\n条件 x = 0 なら 0 を，\n条件 x  0 なら -1 を，","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"それぞれ返す．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"using PyPlot\nplt.figure() #hide\nxs = -6.4:0.1:6.4\nplt.plot(xs, sign.(xs), \".\")\nplt.savefig(\"ch04-sign1-plot.svg\"); #hide\nplt.close(\"all\"); #hide","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"(Image: )","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"三角関数と関数 sign とを組み合わると， 不連続な周期関数を作ることができる．","category":"page"},{"location":"ch04/#方形波を描く","page":"第4回：▼ 不連続な曲線を描く","title":"▶ 方形波を描く","text":"","category":"section"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"2つの一定値を交互にとる周期関数を方形波（square wave）という．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"using PyPlot\nplt.figure() #hide\nplt.plot(xs, cos.(xs), \"r\", label = \"cos(x)\")\nplt.plot(xs, sign.(cos.(xs)), \"b.\", label = \"sign(cos(x))\")\nplt.legend()\nplt.savefig(\"ch04-sign2-plot.svg\"); #hide\nplt.close(\"all\"); #hide","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"(Image: )","category":"page"},{"location":"ch04/#練習-3","page":"第4回：▼ 不連続な曲線を描く","title":"▲ 練習","text":"","category":"section"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"上の例の周期はいくつか？\n周期が 1 になるように，変更してみよ．グラフを描け．","category":"page"},{"location":"ch04/#絶対値関数","page":"第4回：▼ 不連続な曲線を描く","title":"▼ 絶対値関数","text":"","category":"section"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"Base.abs - Function","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"関数 abs(x)は，x の絶対値を返す．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\nxs = -1:0.1:1\nplt.plot(xs, abs.(xs))\nplt.savefig(\"ch04-abs1-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"(Image: )","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"絶対値関数の符号を変えたり，平行移動すると，色々な山や谷の形を描くことができる．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n\nxs = -2pi:pi/18:2pi\n# 符号を変える．山の形\nplt.plot(xs, -abs.(xs), label = \"-abs(x)\")\n# 縦軸の平行移動\nplt.plot(xs, pi .- abs.(xs), label = \"pi-abs(x)\")\n# さらに，横軸の平行移動\nplt.plot(xs, pi .- abs.(xs .- pi), label = \"pi-abs(x-pi)\")\nplt.legend()\nplt.xlabel(\"x\")\nplt.axhline(0, color = \"k\", lw = 0.5)\nplt.axvline(0, color = \"k\", lw = 0.5)\nplt.axvline(pi, color = \"k\", lw = 0.5)\nplt.savefig(\"ch04-abs2-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"(Image: )","category":"page"},{"location":"ch04/#クランプ関数","page":"第4回：▼ 不連続な曲線を描く","title":"▼ クランプ関数","text":"","category":"section"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"Base.Math.clamp","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"関数 clamp(x, lo, hi) は，上限と下限で制限する関数である． すなわち，x の値が hi よりも大きければ hi を，lo よりも大きければ lo を返す． どちらでもなければ，そのままの値を返す．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\nxs = -5:0.1:5\nplt.plot(xs, clamp.(xs, -1, 2))\nplt.xlim(-5, 5)\nplt.ylim(-5, 5)\nplt.savefig(\"ch04-clamp1-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"(Image: )","category":"page"},{"location":"ch04/#床関数・天井関数","page":"第4回：▼ 不連続な曲線を描く","title":"■ 床関数・天井関数","text":"","category":"section"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"Base.floor\nBase.ceil","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"床関数 floor(x) は，x 以下の最大の整数を返す．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"天井関数 ceil(x) は，x 以上の最小の整数を返す．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"下のグラフで，整数 x に対する関数の値を，よく観察せよ．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"これらの関数は，■ 浮動小数点数から整数への変換 で用いられる．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n\nxs = -2.4:0.2:2.4\nplt.plot(xs, ceil.(xs), \"o\", label = \"ceil\")\nplt.plot(xs, floor.(xs), \".\", label = \"floor\")\nfor x = -2:2\n   plt.axvline(x, color = \"k\", lw = 0.5)\n   plt.axhline(x, color = \"k\", lw = 0.5)\nend\nplt.xlim(-3.2, 3.2)\nplt.ylim(-3.2, 3.2)\n\nplt.legend()\nplt.savefig(\"ch04-floorceil1-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"(Image: )","category":"page"},{"location":"ch04/#練習-4","page":"第4回：▼ 不連続な曲線を描く","title":"▲ 練習","text":"","category":"section"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"床関数または天井関数を用いて， 正の数を 1 ので四捨五入するには，どうしたらよいか？ 1 の位での四捨五入とは，その数の小数点第一桁目が 5 以上であれば元の数に 1 を加え，5 未満であれば何もしない操作である．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"プログラムを書いて，グラフを描き，確認してみよ． とくに，小数点以下が 05 に等しい場合の結果を観察せよ．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"note: Note\n数字のおおよその値を表すために用いられる「四捨五入」は，科学技術分野では適当ではない．「数字の丸め方」は，日本工業規格 JIS Z8401 : 1999 （国際規格 ISO 31-0 : 1992 に相当）に定められている．JIS規格の全文は，たとえば，ここで読める．→ kikakurui Z8401-1999-01","category":"page"},{"location":"ch04/#練習-5","page":"第4回：▼ 不連続な曲線を描く","title":"▲ 練習","text":"","category":"section"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"ここまで紹介した関数を使って，色々な不連続曲線や周期関数を描いてみよ． Jupyter notebookの Markdown セルを用いて，説明文も加えよ．","category":"page"},{"location":"ch04/#今回のまとめ","page":"第4回：▼ 不連続な曲線を描く","title":"★ 今回のまとめ","text":"","category":"section"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"plot 関数のフォーマットパラメータ\n0 による除算\n逆数関数\n不連続な有理関数\n正接・余接関数\n周期関数\n符号関数\n絶対値関数\n床関数・天井関数","category":"page"},{"location":"ch13/#ch13","page":"第13回：複素数","title":"第13回：複素数","text":"","category":"section"},{"location":"ch13/#複素数を作る","page":"第13回：複素数","title":"■ 複素数を作る","text":"","category":"section"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"以下では，x, y は Int64 型または Float64 型の数とする．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"関数 complex(x) は，実数部が x の複素数を作る．\n関数 complex(x,y) は，実数部（実部）が x ，虚数部（虚部）が y の複素数を作る．\n複素数の型は，実数部と虚数部の型に合わせて Complex{Int64} または Complex{Float64} となる．x y で Int64 と Float64 型が混在した場合には．後者になる．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"complex(1)\ncomplex(1.0)\ncomplex(1.0, -1.0)","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"定数 im は虚数単位である．これは，complex(0,1) または complex(0.0,1.0) と同じ意味である． 複素数 x+iy を作るのに，以下のように書いてもよい （が，乗算と加算の演算を含むので，関数 complex を使うほうが好ましい )．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"1 - 1im\n1.0 - 1.0im","category":"page"},{"location":"ch13/#複素数と整数・浮動小数点数との四則演算","page":"第13回：複素数","title":"▶ 複素数と整数・浮動小数点数との四則演算","text":"","category":"section"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"複素数と整数または浮動小数点数との四則演算は，演算子 +, -, *, / を用いる．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"z = complex(1, -1)\nz + 2\nz - 2\nz * 2\nz / 2","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"零 0 による除算は，実数部と虚数部の各々で行われ，Inf ないし NaN の値となる．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"complex(1, 0) / 0","category":"page"},{"location":"ch13/#複素数どうしの四則演算","page":"第13回：複素数","title":"▶ 複素数どうしの四則演算","text":"","category":"section"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"複素数どうしの四則演算にも，演算子 +, -, *, / を用いる．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"z = complex(1,-1)\nw = complex(2,-2)\nz + w\nz - w\nz * w\nz / w","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"複素数を値とする変数に対して，更新演算子 +=, -=, *=, /= も使える．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"z *= w","category":"page"},{"location":"ch13/#複素数のベクトル","page":"第13回：複素数","title":"▶ 複素数のベクトル","text":"","category":"section"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"整数または浮動小数点数のベクトルを作るのと同様な方法で，複素数のベクトルを作ることができる．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"[complex(0, 0), complex(1, 0), complex(1, 1)]\n[complex(i, 2i) for i = -2:2]","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"複素数の零 complex(0.0,0.0) を 5 個含むベクトルを作るには，以下のように書けばよい．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"zeros(Complex{Float64}, 5)","category":"page"},{"location":"ch13/#複素数の実数部・虚数部・共役複素数","page":"第13回：複素数","title":"▶ 複素数の実数部・虚数部・共役複素数","text":"","category":"section"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"関数 real(z) は複素数 z の実数部（実部，real part）を返す．\n関数 imag(z) は複素数 z の虚数部（虚部，imaginary part）を返す．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"z = complex(1, -1)\nreal(z)\nimag(z)","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"複素数ベクトルの各要素の実数部ないし虚数部を計算するには，dot記法を用いる．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"zs = [complex(0, 0), complex(1, 0), complex(1, 1), complex(0, 1), complex(0, 0)]\nreal.(zs)\nimag.(zs)","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"関数 conj(z) は複素数 z の「共役（きょうえき）複素数（conjugate complex number）」を返す．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"z = complex(1, -1)\nconj(z)","category":"page"},{"location":"ch13/#負の数に対する平方根","page":"第13回：複素数","title":"▶ 負の数に対する平方根","text":"","category":"section"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"Base.sqrt - Function","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"平方根 sqrt(x)は，負の実数 x に対して例外を出すが，引数を複素数の引数を与えれば計算できる．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"# 例外を出す\nsqrt(-1)\n# 計算できる\nsqrt(complex(-1))","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"正負の実数に対して，平方根の実数部と虚数部を描け．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n\nxs = -1:0.05:1\nzs = complex.(xs)\nsqzs = sqrt.(zs)\nplt.plot(xs, real.(sqzs), label = \"real part\")\nplt.plot(xs, imag.(sqzs), label = \"imaginary part\")\nplt.xlabel(\"x\")\nplt.ylabel(\"sqrt of x\")\nplt.legend()\nplt.xlim(-1.5, 1.5)\nplt.ylim(-1.5, 1.5)\nplt.axhline(0, lw = 0.5, color = \"k\")\nplt.axvline(0, lw = 0.5, color = \"k\")\nplt.savefig(\"ch13-sqrt1-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"(Image: )","category":"page"},{"location":"ch13/#2次方程式の解：一般の場合","page":"第13回：複素数","title":"◀ 2次方程式の解：一般の場合","text":"","category":"section"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"2次方程式 x^2 -bx + c = 0 の解を求める方法について，▼ 2次方程式 で紹介したが， 実数解のみに留めていた． 以下では，複素数解を含めて求めてみる． 一方の解 x_1 を，2次方程式の解の公式で求め， 他方の解を，係数と解の関係により求める．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"beginaligned\nx_1 = dfracb+sqrtb^2-4c2 \nx_2 = dfraccx_1\nendaligned","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"係数 b=1 を一定とし，係数 c を -1 から 1 の範囲で動かす．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"実数部を実線で，虚数部を点線で表した．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n\nb = 1\ncs = range(-2, 2, length = 200)\nds = complex(b .* b .- 4cs)\nx1s = (b .+ sqrt.(ds)) / 2;\nx2v = cs ./ x1s;\nplt.plot(cs, real.(x1s), \"b-\", label = \"x1, real part\")\nplt.plot(cs, imag.(x1s), \"b:\", label = \"x1, imag part\")\nplt.plot(cs, real.(x2v), \"g-\", label = \"x2, real part\")\nplt.plot(cs, imag.(x2v), \"g:\", label = \"x2, imag part\")\nplt.legend()\nplt.xlabel(\"c\")\nplt.xlim(-2.5, 2.5)\nplt.ylim(-2.5, 2.5)\nplt.axhline(0, lw = 0.5, color = \"k\")\nplt.axvline(0, lw = 0.5, color = \"k\")\nplt.savefig(\"ch13-sqrt2-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"(Image: )","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"定数 c の値により，解の形が異なる様子が観察できる．すなわち，","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"範囲 c lt dfrac14 では実数解（虚数部は零 0 ）\n範囲 c = dfrac14 では重解 dfrac12\n範囲 c gt dfrac14 では複素解（共役複素数）","category":"page"},{"location":"ch13/#ガウス平面","page":"第13回：複素数","title":"▶ ガウス平面","text":"","category":"section"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"複素数 x + i y は，平面上の点 (xy) と一対一に対応する．複素数を平面に表したものをガウス平面という．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\nz = complex(1, 1)\nw = complex(-2, 1)\n\nplt.plot(real(z), imag(z), \"b.\", label = \"z\")\nplt.plot(real(w), imag(w), \"r.\", label = \"w\")\nplt.legend()\nplt.xlabel(\"real part\")\nplt.ylabel(\"imag part\")\nplt.xlim(-3, 3)\nplt.ylim(-3, 3)\nplt.axhline(0, lw = 0.5, color = \"k\")\nplt.axvline(0, lw = 0.5, color = \"k\")\nplt.savefig(\"ch13-gauss1-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"(Image: )","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"複素数ベクトルで表された図形を，ガウス平面に描こう．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n\nzs = [complex(0, 0), complex(1, 0), complex(1, 1), complex(0, 1), complex(0, 0)]\n\nplt.plot(real.(zs), imag.(zs), \".-\")\nplt.xlabel(\"real part\")\nplt.ylabel(\"imag part\")\nplt.xlim(-2, 2)\nplt.ylim(-2, 2)\nplt.axhline(0, lw = 0.5, color = \"k\")\nplt.axvline(0, lw = 0.5, color = \"k\")\nplt.savefig(\"ch13-gauss2-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"(Image: )","category":"page"},{"location":"ch13/#複素数の絶対値と偏角","page":"第13回：複素数","title":"▶ 複素数の絶対値と偏角","text":"","category":"section"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"関数 abs(z) は，複素数 z の絶対値 leftvertzrightvert を返す．\n関数 abs2(z) は，複素数 z の絶対値の2乗 leftvertzrightvert^2 を返す．\n関数 angle(z) は，複素数 z の偏角 anglez をラジアンで返す．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"結果（値域）は -pi から pi である．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"これは，ガウス平面上で，複素数を極座標で表示したものに対応している．次の ▶ オイラーの公式 も参照．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"for z in [\n   0,   complex(1, 1), 1im, complex(-1, 1),\n   -1, complex(-1, -1), -im, complex(1, -1), ]\n   @show z, abs(z), angle(z)\nend","category":"page"},{"location":"ch13/#オイラーの公式","page":"第13回：複素数","title":"▶ オイラーの公式","text":"","category":"section"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"実数 theta に対して，指数関数 expitheta は，以下のように書き表される．これをオイラーの公式という．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"expitheta = costheta+ i sintheta","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"指数関数は，複素数を引数とするように拡張されている． expitheta をガウス平面上に描く．これは，単位円（半径 1 ）の円を描く．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"plt.axes().set_aspect(\"equal\")\n\nzs = [exp(im * t) for t = 0:pi/18:2pi]\n\nplt.plot(real.(zs), imag.(zs), \".\")\nplt.xlabel(\"real part\")\nplt.ylabel(\"imag part\")\nplt.axhline(0, lw = 0.5, color = \"k\")\nplt.axvline(0, lw = 0.5, color = \"k\")\nplt.savefig(\"ch13-cis1-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"(Image: )","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"関数 cis(x) は，数 x に対して expi x を計算する．同じ結果が得られることを確認しよう．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n\nzs = [cis(t) for t = 0:pi/18:2pi]\nplt.plot(real.(zs), imag.(zs), \"o\")\n\nzs = [exp(im * t) for t = 0:pi/18:2pi]\nplt.plot(real.(zs), imag.(zs), \".\")\n\nplt.xlabel(\"real part\")\nplt.ylabel(\"imag part\")\n\nplt.axhline(0, lw = 0.5, color = \"k\")\nplt.axvline(0, lw = 0.5, color = \"k\")\nplt.savefig(\"ch13-cis2-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"(Image: )","category":"page"},{"location":"ch13/#ガウス平面内で回転する","page":"第13回：複素数","title":"◀ ガウス平面内で回転する","text":"","category":"section"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"複素数に exp(i theta) を乗ずることは，ガウス平面上で，原点に対して，反時計方向に角度 theta だけ回転することに相当する．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n\nr15 = cis(pi * 15 / 180)\nzs = complex(1, 1)\n\nfor i = 1:10\n   global zs\n   plt.plot([0, real.(zs)], [0, imag.(zs)], \".-\")\n   zs *= r15\nend\n\nplt.xlabel(\"real part\")\nplt.ylabel(\"imag part\")\nplt.axhline(0, lw = 0.5, color = \"k\")\nplt.axvline(0, lw = 0.5, color = \"k\")\n\nplt.xlim(-2, 2)\nplt.ylim(-2, 2)\nplt.savefig(\"ch13-cis0-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"(Image: )","category":"page"},{"location":"ch13/#アルキメデスの渦を描く（複素数版）","page":"第13回：複素数","title":"◀ アルキメデスの渦を描く（複素数版）","text":"","category":"section"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"実数 t に対して，複素数 z=t exp(i t) の軌跡を，ガウス平面上に描いてみよう． これは，アルキメデスの渦である．参考 →  ▼ アルキメデスの渦を描く","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n\nts = range(0, 4pi, length = 200)\nzs = ts .* exp.(im * ts)\nplt.plot(real.(zs), imag.(zs))\nplt.savefig(\"ch13-cis4-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"(Image: )","category":"page"},{"location":"ch13/#花曲線（複素数版）","page":"第13回：複素数","title":"●▼ 花曲線（複素数版）","text":"","category":"section"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"実数 t に対して， 複素数 z= cos(nt) exp(i t) の軌跡をガウス平面上に描いてみよ． これは，花曲線となる． 参考 → ▼ 花曲線を描く","category":"page"},{"location":"ch13/#複素数どうしの乗算の意味","page":"第13回：複素数","title":"◀ 複素数どうしの乗算の意味","text":"","category":"section"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"複素数どうしの乗算は，極座標で表示すると，その意味が明らかになる．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"オイラーの公式を使うと，複素数 z w は，その絶対値と偏角を用いて，以下のように書いて，","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"beginaligned\nz = leftvertzrightvert exp(i anglez) \nw = leftvertwrightvert exp(i anglew)\nendaligned","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"複素数 z と w の積を求めると，次のようになる．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"zw = leftvertzrightvert leftvertwrightvert expleft( i left(anglez+anglewright)right)","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"つまり，積 zw の絶対値は，2つの複素数の絶対値の積である． また，積 zw の偏角は，2つの複素数の偏角の和である．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"まとめると，複素数どうしの積は，ガウス平面上で拡大縮小と回転を同時に行う演算である．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n\nz = 1 * cis(pi / 3)\nw = 2 * cis(pi / 4)\nzw = z * w\n\nplt.plot([0, real(z)], [0, imag(z)], \"r.-\", label = \"z\")\nplt.plot([0, real(w)], [0, imag(w)], \"b.-\", label = \"w\")\nplt.plot([0, real(zw)], [0, imag(zw)], \"g.-\", label = \"z*w\")\n\nzs = [cis(t) for t = 0:pi/18:2pi]\nplt.plot(real.(zs), imag.(zs), \"r\", lw = 0.5)\nplt.plot(real.(2zs), imag.(2zs), \"g\", lw = 0.5)\n\nplt.legend()\nplt.xlabel(\"real part\")\nplt.ylabel(\"imag part\")\n\nplt.axhline(0, lw = 0.5, color = \"k\")\nplt.axvline(0, lw = 0.5, color = \"k\")\nplt.xlim(-3, 3)\nplt.ylim(-3, 3)\nplt.savefig(\"ch13-gauss3-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"(Image: )","category":"page"},{"location":"ch13/#複素数の平方根とは","page":"第13回：複素数","title":"◀ 複素数の平方根とは","text":"","category":"section"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"上の特別な場合として，z の二乗を検討する． w=z として，以下を得る．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"z^2 = leftvertzrightvert^2 expleft( i 2 anglez right)","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"これから，z の平方根 sqrtz は，以下のように求められる．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"z = sqrtleftvertzrightvert expleft( i dfracanglez2 right)","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"すなわち，複素数の平方根は，","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"絶対値が，元の複素数の絶対値の平方根\n偏角が，元の複素数の偏角の半分","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"となる．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"以下に，数値例を示す．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"beginaligned\nz  = -1 + i sqrt3 = 2 left( -dfrac12 + i dfracsqrt32 right) = 2 expleft(i dfracpi3right) \nsqrtz  = sqrt2 expleft(i dfracpi6 right) =  sqrt2 left( dfracsqrt32 + i dfrac12 right)\nendaligned","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"z = complex(-1, sqrt(3));\n@show z, abs(z), angle(z);\nw = sqrt(z);\n@show w, abs(w), angle(w);","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n\nz = complex(-1, sqrt(3))\nw = sqrt(z)\n\nplt.plot([0, real(z)], [0, imag(z)], \"r.-\", label = \"z\")\nplt.plot([0, real(w)], [0, imag(w)], \"b.-\", label = \"sqrt(z)\")\n\nzs = [cis(t) for t = 0:pi/18:2pi]\nplt.plot(real.(zs) * 2, imag.(zs) * 2, \"r\", lw = 0.5)\nplt.plot(real.(zs) * sqrt(2), imag.(zs) * sqrt(2), \"b\", lw = 0.5)\n\nplt.legend()\nplt.xlabel(\"real part\")\nplt.ylabel(\"imag part\")\n\nplt.axhline(0, lw = 0.5, color = \"k\")\nplt.axvline(0, lw = 0.5, color = \"k\")\nplt.xlim(-3, 3)\nplt.ylim(-3, 3)\nplt.savefig(\"ch13-gauss4-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"(Image: )","category":"page"},{"location":"ch13/#図形を回転する","page":"第13回：複素数","title":"◀ 図形を回転する","text":"","category":"section"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"複素数に exp(i theta) を乗ずることは， ガウス平面上で，原点に対して，反時計方向に角度 theta だけ回転することに相当する． 平面図形を複素数ベクトルとして表して，図形を回転しよう．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n\nr15 = cis(pi * 15 / 180)\nzs = [complex(0, 0), complex(1, 0), complex(1, 2), complex(0, 0)]\n\nfor i = 1:10\n   global zs\n   plt.plot(real.(zs), imag.(zs), \".-\")\n   zs *= r15\nend\n\nplt.xlabel(\"real part\")\nplt.ylabel(\"imag part\")\n\nplt.xlim(-3, 3)\nplt.ylim(-3, 3)\nplt.axhline(0, lw = 0.5, color = \"k\")\nplt.axvline(0, lw = 0.5, color = \"k\")\nplt.savefig(\"ch13-cis3-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"(Image: )","category":"page"},{"location":"ch13/#伝達関数","page":"第13回：複素数","title":"◀ 伝達関数","text":"","category":"section"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"制御工学や電気電子回路では「線形システム」に着目する． これは，入力と出力が，時刻 t に対する定数係数の微積分方程式で表されるようなものである． 線形システムでは，","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"角振動数 omega=2pif の正弦波 x(t) = x_0 cos left(omegat+phi angleXright) を入力に与えると，\n同じ角振動数の正弦波 y(t) = y_0 cos left(omegat+angleY right) が出力として得られること","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"が知られている．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"そこで，","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"複素数 X = x_0 exp(iangleX) を入力の正弦波 x(t) と同一視し（＝同じものと考え），\n複素数 Y = y_0 exp(iangleY) を出力の正弦波 y(t) と同一視すると，","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"入力と出力との比は，複素数 H になる．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"Y = H X","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"ここで，X Y H は，一般に， 角振動数 omega または 周波数 f の関数である．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"Y(omega) = H(omega) X(omega)","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"複素数 H(omega) を，「伝達関数（transfer function）」という．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"伝達関数の絶対値は，入力と出力の振幅の比（振幅比）を与える．\n伝達関数の偏角は，入力の位相と出力の位相の「ズレ」（位相差）を与える．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"beginaligned\nleftvertH(omega)rightvert = dfracleftvertY(omega)rightvertleftvertX(omega)rightvert = dfracy_0x_0 \nangleH(omega) = angleY(omega) - angleX(omega)\nendaligned","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"「周波数応答（frequency response）」とは， 角振動数 omega または 周波数 f の関数として 伝達関数の振幅 leftvertH(omega)rightvert と 位相 angleH(omega) を描いた図である． 線形システムの振る舞いを観察するのに便利である．","category":"page"},{"location":"ch13/#共振回路","page":"第13回：複素数","title":"◀ 共振回路","text":"","category":"section"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"(Image: )","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"自己インダクタンス（コイル） L, 電気容量（コンデンサ） C,  電気抵抗 R を直列に接続した LCR 直列回路の電源に正弦波電圧 e(t) を加える． 抵抗 R の両端子間の電圧 v(t) は，同じ角振動数を持つ正弦波 v(t) となる． 正弦波 e(t) と v(t) を複素数 E(omega) と V(omega) で表したとき， 両者の比は，以下の複素数 H(omega) で表される．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"H(omega) = dfracV(omega)E(omega) \n= dfrac11 + i Q left(dfracomegaomega_0 - dfracomega_0omegaright)","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"ここで，omega_0 = 2pif_0 と Q は，回路素子 L C R の値から 決まる正の定数である．f_0 は周波数の次元，omega_0 は角振動数の次元を持ち，Q は無次元である．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"まず，f_0= 1mathrmkHz Q = 1 として，H(omega) の 振幅 leftvertH(omega)rightvert を描く．横軸 周波数は対数で表示する．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"f0 = 1e3\nw0 = 2pi * f0\n\nfs = exp10.(range(1, 5, length = 200))\n\nws = 2pi * fs\n\nq = 1\nh1 = 1 ./ (1 .+ im * q * (ws / w0 - w0 ./ ws))\n\nusing PyPlot\nplt.figure() #hide\nplt.plot(fs, abs.(h1))\nplt.xscale(\"log\")\nplt.ylabel(\"Amplitude\")\nplt.xlabel(\"f / Hz\")\nplt.axvline(f0, lw = 0.5, color = \"k\")\nplt.savefig(\"ch13-lcr1-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"(Image: )","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"振幅は，単峰性の極大値 1 をとる．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"極大となる周波数 f_0 を「共振周波数（resonance frequency）」， これに対応する角振動数 omega_0=2pif_0 を 「共振角振動数（resonance angular frequency）」という．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"今度は，振幅の二乗 leftvertH(omega)rightvert^2 と 位相 angleH(omega) を同時に描こう．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"f0 = 1e3\nw0 = 2pi * f0\n\nfs = exp10.(range(1, 5, length = 200))\n\nws = 2pi * fs\n\nq = 1\nh1 = 1 ./ (1 .+ im * q * (ws / w0 - w0 ./ ws))\n\nusing PyPlot\nplt.figure() #hide\nfig, axs = plt.subplots(2, 1)\nax1 = axs[1]\nax1.plot(fs, abs2.(h1))\nax1.set_ylabel(\"Amplitude\")\nax1.set_xscale(\"log\")\nax1.axvline(f0, lw = 0.5, color = \"k\")\nax1.axhline(1 / sqrt(2), lw = 0.5, color = \"k\")\n\nax2 = axs[2]\nax2.plot(fs, angle.(h1) * 180 / pi)\n\nax2.set_xscale(\"log\")\nax2.set_xlabel(\"f / Hz\")\nax2.set_ylabel(\"Phase\")\nax2.set_ylim(-100, 100)\nytics = [-90, -45, 0, 45, 90]\nax2.set_yticks(ytics)\nfor y in ytics\n   ax2.axhline(y, lw = 0.5, color = \"k\")\nend\nax2.axvline(f0, lw = 0.5, color = \"k\")\nplt.savefig(\"ch13-lcr2-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"(Image: )","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"位相は 90^circ から始まり -90^circ に単調減少する． 振幅が極大となる周波数 f_0 で位相は 0 となる．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"さらに，leftvertH(omega)rightvert^2 = dfrac12 となる周波数（２つある）で， 位相は pm 45^circ をとる．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"次に，f_0 omega_0 を変えずに，Q の値を増減して， 振幅の二乗 leftvertH(omega)rightvert^2 を描く．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"f0 = 1e3\nw0 = 2pi * f0\n\nfs = exp10.(range(1, 5, length = 200))\n\nws = 2pi * fs\n\nusing PyPlot\nplt.figure() #hide\nfor q in [0.5, 1, 2]\n   h1 = 1 ./ (1 .+ im * q * (ws / w0 - w0 ./ ws))\n   plt.plot(fs, abs2.(h1), label = \"Q=\" * string(q))\nend\nplt.legend()\nplt.xscale(\"log\")\nplt.xlabel(\"f / Hz\")\n\nplt.axhline(1 / sqrt(2), lw = 0.5, color = \"k\")\nplt.axvline(f0, lw = 0.5, color = \"k\")\nplt.savefig(\"ch13-lcr3-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"(Image: )","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"定数 Q が小さくなると，峰が鋭くなる（幅が狭くなる）様子が観察される．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"さらに，位相のグラフを加えよう．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"f0 = 1e3\nw0 = 2pi * f0\n\nfs = exp10.(range(1, 5, length = 200))\n\nws = 2pi * fs\n\nusing PyPlot\nplt.figure() #hide\nfig, axs = plt.subplots(2, 1)\nax1 = axs[1]\nax2 = axs[2]\n\nfor q in [0.5, 1, 2]\n   h1 = 1 ./ (1 .+ im * q * (ws / w0 - w0 ./ ws))\n   ax1.plot(fs, abs.(h1), label = \"Q=\" * string(q))\n   ax2.plot(fs, angle.(h1) * 180 / pi)\nend\nax1.legend()\nax1.set_xscale(\"log\")\nax1.set_ylabel(\"Amplitude\")\nax1.axvline(f0, lw = 0.5, color = \"k\")\nax1.axhline(1 / sqrt(2), lw = 0.5, color = \"k\")\n\nax2.set_xscale(\"log\")\nax2.set_ylabel(\"Phase\")\nax2.set_xlabel(\"f / Hz\")\nax2.set_ylim(-100, 100)\nytics = [-90, -45, 0, 45, 90]\nax2.set_yticks(ytics)\nfor y in ytics\n   ax2.axhline(y, lw = 0.5, color = \"k\")\nend\nax2.axvline(f0, lw = 0.5, color = \"k\")\nplt.savefig(\"ch13-lcr4-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"(Image: )","category":"page"},{"location":"ch13/#練習：共振回路","page":"第13回：複素数","title":"●◀ 練習：共振回路","text":"","category":"section"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"複素数 H(omega) の分母の虚数部分","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"Q left( dfracomegaomega_0 - dfracomega_0omega right)","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"を，角振動数 omega の関数として描け． その特徴を記せ．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"振幅の二乗が最大値の半分 leftvertH(omega)rightvert^2 = dfrac12 になる角振動数は2つある． その周波数 omega_1 omega_2 を数値的に求めてみよ． 参考 → ▼ 「はさみうち」法による，方程式の求解","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"２つの角振動数の差 Deltaomega = omega_2 - omega_1 を， 角振動数の半値全幅（FWHM; full width of half maximum）という．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"定数 Q は，半値全幅 Deltaomega と共振角振動数 omega_0 の比に，ほぼ等しい．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"Q simeq dfracomega_0Deltaomega = dfracf_0Deltaf","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"これを，数値的に確かめてみよ．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"ヒント： 半値全幅を与える角振動数 omega_1 omega_2 では，以下が成り立つ． 複号 pm が，omega_1 omega_2 のどちらかに対応するかを考えよ．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"H(omega_12 ) = dfrac11 pm i","category":"page"},{"location":"ch13/#低域通過フィルタ","page":"第13回：複素数","title":"◀ 低域通過フィルタ","text":"","category":"section"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"(Image: )","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"自己インダクタンス L と電気抵抗 R を直列に接続したLR直列回路の電源に正弦波電圧 e(t) を加える． 抵抗 R の両端子間の電圧 v(t) は，同じ角振動数を持つ正弦波 v(t) となる． 正弦波 e(t) と v(t) を複素数 E(omega) と V(omega) で表したとき， 両者の比は，以下の複素数 H(omega) で表される．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"H(omega) = dfracV(omega)E(omega) = dfrac11+idfracomegaomega_0","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"ここで，omega_0 = 2pif_0 は，回路素子 L R の値から 決まる正の定数である．f_0 は周波数の次元，omega_0 は角振動数の次元を持つ．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"まず，f_0 = 1mathrmkHz として，H(omega) の 振幅 leftvertH(omega)rightvert を，描く．横軸の周波数は対数で表示する．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"f0 = 1e3\nw0 = 2pi * f0\n\nfs = exp10.(range(1, 5, length = 100))\n\nws = 2pi * fs\nh1 = 1 ./ (1 .+ im * ws / w0)\n\nusing PyPlot\nplt.figure() #hide\nplt.plot(fs, abs.(h1))\nplt.xscale(\"log\")\nplt.xlabel(\"f / Hz\")\nplt.ylabel(\"Amplitude\")\n\nplt.axhline(1, lw = 0.5, color = \"k\")\nplt.axhline(1 / sqrt(2), lw = 0.5, color = \"k\")\nplt.axvline(f0, lw = 0.5, color = \"k\")\nplt.savefig(\"ch13-lpf1-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"(Image: )","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"振幅は，周波数が低いとき 1 にほぼ等しく，周波数の増加に伴い，単調減少する． 周波数が低い正弦波をそのまま通し，周波数の高い正弦波を減衰させるので，「低域通過フィルタ（Low Pass Filter; LPF）」と呼ばれる．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"周波数 f_0 における振幅は dfrac1sqrt2 である． 周波数 f_0 は，振幅が減衰する周波数の目安であり，「遮断（しゃだん）周波数（cut-off frequecy）」と呼ばれる．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"振幅 A の常用対数（底が 10 の対数）をとり，20 倍したものを「利得（gain）」という． 利得の「単位」はデシベル（dB）である．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"G = 20 log_10 A","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"上のグラフを，縦軸を利得に変換して描く．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"f0 = 1e3\nw0 = 2pi * f0\n\nfs = exp10.(range(1, 5, length = 100))\n\nws = 2pi * fs\nh1 = 1 ./ (1 .+ im * ws / w0)\n\nusing PyPlot\nplt.figure() #hide\nplt.plot(fs, 20 * log10.(abs.(h1)))\nplt.xscale(\"log\")\nplt.xlabel(\"f / Hz\")\nplt.ylabel(\"gain / dB\")\n\nplt.axhline(0, lw = 0.5, color = \"k\")\nplt.axhline(-3, lw = 0.5, color = \"k\")\nplt.axvline(f0, lw = 0.5, color = \"k\")\n\nplt.savefig(\"ch13-lpf2-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"(Image: )","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"振幅 1 は 利得 0mathrmdB である． 減衰動作の周波数領域では，周波数が 10 倍になると利得は -20mathrmdB 減少する． この傾きを -20mathrmdBmathrmdecade と称する（decade は 10 倍の意味）．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"さらに，位相を加えて描く．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"f0 = 1e3\nw0 = 2pi * f0\n\nfs = exp10.(range(1, 5, length = 100))\n\nws = 2pi * fs\nh1 = 1 ./ (1 .+ im * ws / w0)\n\nusing PyPlot\nplt.figure() #hide\nfig, axs = plt.subplots(2, 1)\n#\nax1 = axs[1]\nax1.plot(fs, 20 * log10.(abs.(h1)))\nax1.set_xscale(\"log\")\nax1.set_xlabel(\"f / Hz\")\nax1.set_ylabel(\"gain / dB\")\n\nax1.axvline(f0, lw = 0.5, color = \"k\")\nax1.axhline(0, lw = 0.5, color = \"k\")\nax1.axhline(-3, lw = 0.5, color = \"k\")\n#\nax2 = axs[2]\nax2.plot(fs, rad2deg.(angle.(h1)))\nax2.set_ylim(-100, 10)\nax2.set_yticks([-90, -75, -60, -45, -30, -15, 0]) # y軸の刻みを指定する\nax2.set_xscale(\"log\")\nax2.set_xlabel(\"f / Hz\")\nax2.set_ylabel(\"phase / degree\")\nax2.axvline(f0, lw = 0.5, color = \"k\")\nax2.axhline(-45, lw = 0.5, color = \"k\")\nax2.axhline(0, lw = 0.5, color = \"k\")\nax2.axhline(-90, lw = 0.5, color = \"k\")\n\nplt.savefig(\"ch13-lpf3-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"(Image: )","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"位相は 周波数の増加に伴い単調減少する． 低い周波数では 0^circ に，高い周波数では -90^circ にそれぞれ漸近する．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"遮断周波数 f_0 では伝達関数は H(omega_0) = dfrac11+i である． したがって，遮断周波数 f_0 での利得は -3mathrmdB ，位相は -45^circ である （註: log_10 2 simeq 03 ）．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"以下の伝達関数に対して，周波数応答を描け．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"H(omega) = dfrac-A1+idfracomegaomega_0","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"まず，A = 1 を保ったまま f_0 = 100 1000 10000mathrmHz と増やしてみよ．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"次に，A = 1 10 100 と増やしてみよ．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"それぞれ，どのように変化するか，言葉で記述してみよ．","category":"page"},{"location":"ch13/#複素数に拡張された関数","page":"第13回：複素数","title":"■ 複素数に拡張された関数","text":"","category":"section"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"平方根や指数関数以外でも，実数を引数とする関数の多くが，複素数を引数とするように拡張されている．","category":"page"},{"location":"ch13/#対数関数（複素数）","page":"第13回：複素数","title":"▶ 対数関数（複素数）","text":"","category":"section"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"複素数 z = rexp(itheta) と極座標表示したとき，その自然対数は，以下のように計算できる． すなわち，実数部は絶対値の自然対数，虚数部は偏角である．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"logz = log rexp(itheta) = logr + i theta","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"複素数 z = 1 + i y の自然対数 logz の実数部と虚数部を描く．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n\nys = range(-2pi, 2pi, length = 101)\nzs = complex.(1, ys)\ncs = log.(zs)\nplt.plot(ys, real.(cs), label = \"real log (1+i*y)\")\nplt.plot(ys, imag.(cs), label = \"imag log (1+i*y)\")\nplt.legend()\n\nplt.xlabel(\"y\")\nplt.legend(loc = 4)\nplt.ylim(-3, 3)\nplt.xlim(-3, 3)\n\nplt.axhline(0, lw = 0.5, color = \"k\")\nplt.axvline(0, lw = 0.5, color = \"k\")\nplt.axhline(pi / 2, lw = 0.5, color = \"c\")\nplt.axhline(-pi / 2, lw = 0.5, color = \"c\")\n#\nplt.axhline(log(sqrt(2)), lw = 0.5, color = \"m\")\nplt.axhline(pi / 4, 0.6, 1, lw = 0.5, color = \"m\")\nplt.axhline(-pi / 4, 0, 0.4, lw = 0.5, color = \"m\")\nplt.axvline(1, lw = 0.5, color = \"m\")\nplt.axvline(-1, lw = 0.5, color = \"m\")\n\nplt.savefig(\"ch13-log1-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"(Image: )","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"変数 y の増加に伴い，logz の虚数部は -dfracpi2 から dfracpi2 へ単調に増加する（シアン色の補助線） ． 実数部は下に凸で，y=0 で極小値 log1 = 0 をとる．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"特に，y = pm1 において，虚数部は pmdfracpi4 ，実数部は logsqrt2 をとる（マゼンダ色の補助線）．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"上のグラフは，ガウス平面上の z = 1 + i y の軌跡から理解できるであろう．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n\nplt.xlim(-3, 3)\nplt.ylim(-3, 3)\nplt.xlabel(\"real part\")\nplt.ylabel(\"imag part\")\nplt.axhline(0, lw = 0.5, c = \"k\")\nplt.axvline(0, lw = 0.5, c = \"k\")\nplt.axvline(1, lw = 0.5, c = \"k\")\nfor y in [-2, -1, 1, 2]\n   plt.plot([0, 1], [0, y], \"b.-\")\n   text(1.1, y, \"1+i \" * string(y))\nend\n\nplt.savefig(\"ch13-log2-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"(Image: )","category":"page"},{"location":"ch13/#練習：対数関数（複素数）","page":"第13回：複素数","title":"◀ 練習：対数関数（複素数）","text":"","category":"section"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"複素数 z = x + i の自然対数 logz の実数部と虚数部を描け． その結果を，ガウス平面上の z の軌跡を描いて，考察せよ．","category":"page"},{"location":"ch13/#三角関数と双曲線関数","page":"第13回：複素数","title":"▶ 三角関数と双曲線関数","text":"","category":"section"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"双曲線関数 cosht sinht や三角関数 cost sint は，指数関数 exp(z) を用いて，定義されることもある．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"beginaligned\ncosh x = dfracexp(x)+exp(-x)2 \nsinh x = dfracexp(x)-exp(-x)2 \ncos x = dfracexp(ix)+exp(-ix)2 \nsin x = dfracexp(ix)-exp(-ix)2i\nendaligned","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"したがって，三角関数に純虚数を与えると，双曲線関数となる．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"beginaligned\ncos ix  = cosh x \nsin ix  = i sinh x\nendaligned","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"上の等式がなりたつことを，グラフで観察しよう．","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n\nxs = range(-1, 1, length = 21)\ncz = cos.(im * xs)\nplt.plot(xs, real.(cz), \"r-\", label = \"real cos(ix)\")\nplt.plot(xs, cosh.(xs), \"ro\", label = \"cosh(x)\")\n#\nsz = sin.(im * xs)\nplt.plot(xs, imag.(sz), \"b-\", label = \"imag sin(ix)\")\nplt.plot(xs, sinh.(xs), \"bo\", label = \"sinh(x)\")\n#\nplt.xlabel(\"x\")\nplt.xlim(-1.8, 1.8)\nplt.ylim(-1.8, 1.8)\nplt.legend()\nplt.axhline(0, lw = 0.5, color = \"k\")\nplt.axvline(0, lw = 0.5, color = \"k\")\nplt.savefig(\"ch13-tri1-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"(Image: )","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"## ■ 複素数を定義域とする関数","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"（案）微分方程式の境界値問題\n\n## ★ 今回のまとめ","category":"page"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"（案）微分方程式の初期値問題","category":"page"},{"location":"ch13/#今回のまとめ","page":"第13回：複素数","title":"★ 今回のまとめ","text":"","category":"section"},{"location":"ch13/","page":"第13回：複素数","title":"第13回：複素数","text":"複素数\n複素数のベクトル・行列\n複素数の加減乗除\nガウス平面\nオイラーの公式\n極座標表示\n複素数に拡張された関数\n応用：伝達関数","category":"page"},{"location":"ch08/#ch08","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"","category":"section"},{"location":"ch08/#級数和の公式（繰り返しで加算)","page":"第8回： ▼ 総和・数値積分","title":"▼ 級数和の公式（繰り返しで加算)","text":"","category":"section"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"自然数の級数和の結果がいくつか知られている． これらのグラフを描いて，結果を確認しよう．","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"sum_k=1^n k = 1 + 2 + cdots + k + cdots + n = dfracn(n+1)2","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"using PyPlot\nplt.figure() #hide\nnmax = 25\nxs1 = 0:0.2:nmax\nplt.plot(xs1, xs1 .* (xs1 .+ 1) / 2, label = \"sum i\", \"b\")\n\nns = 0:nmax\nfor n in ns\n   s1 = 0.0\n   for i = 1:n\n      s1 += i\n   end\n   plt.plot(n, s1, \"bo\")\nend\n\nplt.xlabel(\"n\")\nplt.ylabel(\"sum i up to n\")\n\nplt.savefig(\"ch08-sum1-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"(Image: )","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"sum_k=1^n k^2 = 1^2 + 2^2 + cdots + k^2 + cdots + n^2 = dfracn(n+1)(2n+1)6","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"using PyPlot\nplt.figure(); #hide\n\nnmax = 25\nxs1 = 0:0.2:nmax\nplt.plot(xs1, xs1 .* (xs1 .+ 1) .* (2 * xs1 .+ 1) / 6, \"b\")\n\nns = 0:nmax\nfor n in ns\n   s = 0.0\n   for i = 1:n\n      s += i^2\n   end\n   plt.plot(n, s, \"bo\")\nend\nplt.xlabel(\"n\")\nplt.ylabel(\"sum i^2 up to n\")\n\nplt.savefig(\"ch08-sum2-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"(Image: )","category":"page"},{"location":"ch08/#ベクトルのインデックス","page":"第8回： ▼ 総和・数値積分","title":"■ ベクトルのインデックス","text":"","category":"section"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"Base.length — Method","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"参考 → ■ ベクトル","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"ベクトル a の寸法は，関数 length(a) で得られる．","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"v = [11, 21, 31, 41, 51]\nlength(v)","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"Indexing (section)","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"ベクトル a ，整数 i に対して a[i] と書くと， ベクトル a の i 番目の要素の値が得られる． 要素の番号（「インデックス，index」） i は 1 から数える． end というインデックスは，ベクトルの最後の要素を指す．","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"v[1]\nv[2]\nv[end] # 末尾の要素\nv[end-1] # 末尾の一つ前の要素","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"存在しないインデックスを指定すると，例外が発生する．","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"v[0] # => ERROR: BoundsError","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"インデックスとして，整数 i の代わりに，範囲を指定すると， その範囲のインデックスを持つベクトルが得られる．（参考 ■ 範囲）","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"v[2:3]\nv[1:end-1] # 最初から，末尾の一つ前の要素\nv[4:6] # => ERROR: BoundsError","category":"page"},{"location":"ch08/#ベクトルの生成","page":"第8回： ▼ 総和・数値積分","title":"■ ベクトルの生成","text":"","category":"section"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"ベクトルを作る方法は，いくつかある．","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"これまでに，以下の方法を紹介した．","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"要素を列挙する方法（■ ベクトル）\n範囲を用いる方法（■ 範囲）\n関数 range を用いる方法．結果は範囲となる．（■ 等差数列）","category":"page"},{"location":"ch08/#要素が-0のベクトルを作る","page":"第8回： ▼ 総和・数値積分","title":"■ 要素が 0のベクトルを作る","text":"","category":"section"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"Base.zero — Function","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"数 x に対して，関数 zero(x) は，x と同じ型の値 1 を作る．","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"zero(0)\nzero(1)\nzero(0.0)\nzero(1.0)","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"型を指定してもよい．","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"zero(Int64)\nzero(Float64)","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"Base.zeros — Function","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"関数 zeros は，要素が零 0 のベクトルを作る．","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"関数 zeros(n) は，要素の型が浮動小数点で，寸法 n のベクトルを作る．\n関数 zeros(T, n) は，要素の型が T で，寸法 n のベクトルを作る．","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"zeros(5) # 要素は浮動小数点\nzeros(Float64, 5) # 上と同じ\nzeros(Int64, 5) # 要素は整数","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"ベクトル v と同じ寸法の 0 ベクトルを作るには，","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"v = [1, 2, 3, 4, 5]\nzeros(length(v))\nzeros(Float64, length(v))","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"関数 zero.() を以下のように用いれば v の要素の型と同じ要素の型を持ち，v と寸法が等しい 0 ベクトルを作れる．","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"zero.([1, 2, 3, 4, 5])\nzero.(1.0:5.0)","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"note: Note\n関数 zeros と zero とを混同しないように．","category":"page"},{"location":"ch08/#要素が-1-のベクトルを作る","page":"第8回： ▼ 総和・数値積分","title":"■ 要素が 1 のベクトルを作る","text":"","category":"section"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"Base.one — Function","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"数 x に対して，関数 one(x) は，x と同じ型の値 1 を作る．","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"one(0)\none(1)\none(0.0)\none(1.0)","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"型を指定してもよい．","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"one(Int64)\none(Float64)","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"Base.ones — Function","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"関数 ones は，要素が零 0 のベクトルを作る．","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"関数 ones(n) は，要素の型が浮動小数点で，寸法 n のベクトルを作る．\n関数 ones(T, n) は，要素の型が T で，寸法 n のベクトルを作る．","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"ones(5) # 要素は浮動小数点\nones(Float64, 5) # 上と同じ\nones(Int64, 5) # 要素は整数","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"ベクトル v と同じ寸法の 0 ベクトルを作るには，","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"v = [1, 2, 3, 4, 5]\nones(length(v))\nones(Float64, length(v))","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"関数 one.() を以下のように用いれば 要素が v の要素と同じで，寸法が等しい 1 ベクトルを作れる．","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"one.([1, 2, 3, 4, 5])\none.(1.0:5.0)","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"note: Note\n関数 ones と one とを混同しないように．","category":"page"},{"location":"ch08/#疑似乱数を要素とするベクトルを作る","page":"第8回： ▼ 総和・数値積分","title":"■ 疑似乱数を要素とするベクトルを作る","text":"","category":"section"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"Random.rand — Function","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"rand(10) # => 10-elements\nrand([1, 2, 3], 10) # [1,2,3]からランダムに10個選ぶ","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"ヒストグラムを描く．分割数 10","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"using PyPlot\nplt.figure() #hide\nxs = rand(1000)\nplt.hist(xs, bins = 10)\nplt.xlim(-0.2, 1.2)\nplt.savefig(\"ch08_hist1-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"(Image: )","category":"page"},{"location":"ch08/#正規乱数を要素とするベクトルを作る","page":"第8回： ▼ 総和・数値積分","title":"■ 正規乱数を要素とするベクトルを作る","text":"","category":"section"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"Base.Random.randn — Function","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"平均 0，標準偏差 1 の正規分布の疑似乱数を作る","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"randn(10) # => 10-elements","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"ヒストグラムを描く．分割数 50","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"using PyPlot\nplt.figure() #hide\nxs = randn(1000)\nplt.hist(xs, bins = 50)\nplt.xlim(-4, 4)\nplt.savefig(\"ch08_hist2-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"(Image: )","category":"page"},{"location":"ch08/#内包表記","page":"第8回： ▼ 総和・数値積分","title":"● 内包表記","text":"","category":"section"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"[x^2 for x = 0:10]\n[x^2 for x in [-3, 0, 2]]\n[x^2 for x in -10:2:10 if rem(x, 3) != 2]","category":"page"},{"location":"ch08/#フーリエ級数の和","page":"第8回： ▼ 総和・数値積分","title":"フーリエ級数の和","text":"","category":"section"},{"location":"ch08/#フーリエ級数の和（繰り返しで加算)","page":"第8回： ▼ 総和・数値積分","title":"▼ フーリエ級数の和（繰り返しで加算)","text":"","category":"section"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"周期波形 f(t+T) = f(t) は， 以下のように，三角関数の級数和として表される． ここで，a_0 a_1 cdots, b_1 b_2 cdots は実数の定数である． これを，実フーリエ級数和という．","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"beginaligned\nf(t)  = a_0 \n + a_1 cos omegat  + b_1 sin omegat \n + a_2 cos 2omegat + b_2 sin 2omegat \n + a_3 cos 3omegat + b_3 sin 3omegat + cdots\nendaligned","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"ここで omega は基本周波数である．","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"omega=dfrac2piT","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"以下の例では，すでに知られているフーリエ級数和から，元の関数が近似される様子を観察するのに留める．","category":"page"},{"location":"ch08/#方形波：フーリエ級数の有限和","page":"第8回： ▼ 総和・数値積分","title":"▼ 方形波：フーリエ級数の有限和","text":"","category":"section"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"方形波は，▶ 方形波を描く で紹介した．","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"基本周波数 omega=1，数 -1 と 1 とを往復する方形波を描こう．","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"using PyPlot\nplt.figure() #hide\nts = -3pi:pi/36:3pi\nplt.plot(ts, sign.(sin.(ts)))\nplt.yticks([-1, 0, 1], [\"-1\", \"0\", \"1\"])\nplt.xticks(\n   [-3pi, -2pi, -pi, 0, pi, 2pi, 3pi],\n   [L\"-3\\pi\", L\"-2\\pi\", L\"-\\pi\", \"0\", L\"\\pi\", L\"2\\pi\", L\"3\\pi\"],\n)\nplt.savefig(\"ch08_sq1-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"(Image: )","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"この方形波のフーリエ級数和は，以下のように与えられる．","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"f(t) = dfrac4pileftsint+dfracsin3t3+dfracsin5t5+cdotsright","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"この式の sin t, sin 3t, sin 5t の３つを加えると，方形波に近くなることを観察する．","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"using PyPlot\nplt.figure() #hide\n\nts = -3pi:pi/36:3pi\nys = sin.(ts) * 4 / pi\nplt.plot(ts, ys, label = \"n=1\")\nplt.yticks([-1, 0, 1], [\"-1\", \"0\", \"1\"])\nplt.xticks(\n   [-3pi, -2pi, -pi, 0, pi, 2pi, 3pi],\n   [L\"-3\\pi\", L\"-2\\pi\", L\"-\\pi\", \"0\", L\"\\pi\", L\"2\\pi\", L\"3\\pi\"],\n)\nys += sin.(3ts) / 3 * 4 / pi\nplt.plot(ts, ys, label = \"n=1,3\")\nys += sin.(5ts) / 5 * 4 / pi\nplt.plot(ts, ys, label = \"n=1,3,5\")\nplt.legend()\nplt.savefig(\"ch08-fo-sq2-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"(Image: )","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"今度は sin 13t まで加えた結果を観察しよう．","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"using PyPlot\nplt.figure() #hide\nts = -3pi:pi/36:3pi\nn = 13\nys = zero.(ts)\nfor i = 1:2:n\n   global ys\n   ys += sin.(i * ts) / i * 4 / pi\nend\nplt.plot(ts, ys)\nplt.plot(ts, sign.(sin.(ts)), label = \"up to\" * string(n))\n\nplt.yticks([-1, 0, 1], [\"-1\", \"0\", \"1\"])\nplt.xticks(\n   [-3pi, -2pi, -pi, 0, pi, 2pi, 3pi],\n   [L\"-3\\pi\", L\"-2\\pi\", L\"-\\pi\", \"0\", L\"\\pi\", L\"2\\pi\", L\"3\\pi\"],\n)\nplt.savefig(\"ch08-fo-sq4-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"(Image: )","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"note: Note\n","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"上のフーリエ級数和が方形波を近似すると説明したが，なめらかな三角関数の級数和をいくら加えていっても，なめらかでない方形波に一致することはない． 級数和が元の関数に近づくのは 「各点収束（pointwise convergence）」ではなく 「一様収束（uniform convergence）」に相当する．","category":"page"},{"location":"ch08/#三角波：フーリエ級数の有限和","page":"第8回： ▼ 総和・数値積分","title":"▼ 三角波：フーリエ級数の有限和","text":"","category":"section"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"一定の正の傾きで増加，一定の負の傾きで減少を繰り返す周期関数を， 三角波（triangular wave）という．","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"傾き 1 と -1 で，周期 2pi の三角波を描こう． この関数は， 絶対値関数 abs （参考: ▼ 絶対値関数）と 関数 mod2pi （参考: ▶ 2piで割った剰余）とを組み合わせて定義できる． 参考→ ■ 関数の定義（代入文形式）","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"triangular(t) = pi - abs.(mod2pi.(t) - pi)\n\nusing PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n\nts = -3.5pi:pi/6:3.5pi\nplt.plot(ts, triangular.(ts))\nplt.xlim(-pi * 2.5, pi * 2.5)\nplt.ylim(-pi * 0.1, pi * 1.1)\nplt.savefig(\"ch08_fo_tri1-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"(Image: )","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"上の三角波のフーリエ級数展開は，以下の通りである．","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"f(t) = dfracpi2 - dfrac4pileft cos t + dfraccos 3t3^2 + dfraccos 5t5^2 + cdotsright","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n\nts = -3.5pi:pi/6:3.5pi\nys = one.(ts) * (pi / 2)\nfor n = 1:2:5\n   global ys\n   ys -= cos.(n * ts) * (4 / pi / n^2)\nend\nplt.plot(ts, ys, \"o\")\nplt.plot(ts, triangular.(ts))\nplt.ylim(-pi * 0.1, pi * 1.1)\nplt.savefig(\"ch08-fo-tri3-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"(Image: )","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"勾配が不連続に変化する点（キンク，kink）を拡大して描画しよう．","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n\nts = -3.5pi:pi/6:3.5pi\nfor nmax = 1:2:9\n   local ys = one.(ts) * (pi / 2)\n   for n = 1:2:nmax\n      ys -= cos.(n * ts) * (4 / n^2 / pi)\n   end\n   plt.plot(ts, ys, label = nmax)\nend\nplt.xlim(-pi * 0.1, pi * 2.1)\nplt.ylim(-pi * 0.1, pi * 1.1)\nplt.legend()\nplt.savefig(\"ch08-fo-tri4-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"(Image: )","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"キンク付近をさらに拡大しよう． 以下のコードでは凡例をグラフの外に描くため工夫した．","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"using PyPlot\nfig, axs=plt.subplots(1,2)\n\nts = -3.5pi:pi/360:3.5pi\naxs[2].axis(\"off\")\nax1 = axs[1]\nax1.set_aspect(\"equal\")\nax1.plot(ts, triangular.(ts), label=\"triangular\")\nfor nmax = 11:2:21\n   local ys = one.(ts) * (pi / 2)\n   for n = 1:2:nmax\n      ys .-= cos.(n * ts) * (4 / n^2 / pi)\n   end\n   ax1.plot(ts, ys, label= nmax)\nend\nax1.set_xlim( pi - 0.1, pi + 0.1 )\nax1.set_ylim( pi - 0.15, pi + 0.05 )\nax1.legend(loc=(1.04, 0))\nplt.savefig(\"ch08-fo-tri5-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"(Image: )","category":"page"},{"location":"ch08/#練習：フーリエ級数の有限和","page":"第8回： ▼ 総和・数値積分","title":"◀ 練習：フーリエ級数の有限和","text":"","category":"section"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"次の級数和で表される曲線を描け．","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"f(t) = dfrac4pileft sin t - dfracsin 3t3^2 + dfracsin 5t5^2 - cdotsright","category":"page"},{"location":"ch08/#数値積分","page":"第8回： ▼ 総和・数値積分","title":"▼ 数値積分","text":"","category":"section"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"定積分の近似値を，級数和として求めることができる（数値積分）．","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"以下では，連続関数の，有限な区間に対する定積分の近似値を求めてみる． 参考→ ▼ 関数が連続とは","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"例として，関数 g(x)","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"g(x) = dfrac11+x","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"を，x = 0 から 1 の範囲で積分しよう．","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"関数 g(x) は，この範囲で単調減少である．","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"using PyPlot\nplt.figure() #hide\nxmin = 0\nxmax = 1\nm = 6\nn = 2^m\nxs = range(xmin, xmax, length = n + 1)\ng(x) = 1 / (1 + x)\nplt.plot(xs, g.(xs), \"b\")\nplt.ylim(0, 1.2)\nplt.savefig(\"ch08-rie0-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"(Image: )","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"定積分の値は，","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"int_0^1dfrac11+xdx = leftlogleftvert1+xrightvertright_x=0^x=1 = log2","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"である．","category":"page"},{"location":"ch08/#Riemann和（繰り返しで加算)","page":"第8回： ▼ 総和・数値積分","title":"▼ Riemann和（繰り返しで加算)","text":"","category":"section"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"積分すべき関数を，等間隔の短冊に区切り，短冊の面積の総和をとろう．","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"短冊の幅を d とすると，","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"s_1 = sum_i=1^n g(x_i)cdotd","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"という，総和（「Riemann和」）をとることになる．","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"以下のグラフは，8 枚の短冊に分けた様子を示す． ここで，短冊の高さは，各短冊の左端の関数の値をとった．","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"using PyPlot\nplt.figure() #hide\nxmin = 0\nxmax = 1\nm = 3\nn = 2^m\nxs = range(xmin, xmax, length = n + 1)  # n個の短冊に分割する\nd = (xmax - xmin) / n  # 短冊の刻み\ng(x) = 1 / (1 + x)\nplt.plot(xs, g.(xs), \"b\")\nplt.ylim(0, 1.2)\n\nfor x in xs[1:end-1]\n   plt.plot([x, x, x + d, x + d], [0, g(x), g(x), 0], \"k\", lw = 0.5)\nend\nplt.savefig(\"ch08-rie1-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"(Image: )","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"では，短冊を 2^4 = 16 枚に分けて，短冊の面積の総和をとろう．","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"se = log(2)\nm = 4\nn = 2^m\nxs = range(xmin, xmax, length = n + 1)\nd = (xmax - xmin) / n\ns1 = 0\nfor i = 1:n\n   global s1\n   x = xs[i]\n   s1 += g(x) * d\nend\n#\n@show s1, se, (s1 - se) / se;","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"16 分割でも，相対誤差 23 を達成した．","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"分割数を増やせば，この和は，正しい定積分の値に近づいていくであろう．","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"分割数を 2^m で増やして，絶対誤差を描こう． 横軸の分割数は，対数で示した．","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"using PyPlot\nplt.figure() #hide\n\nse = log(2)\nfor m = 0:12\n   local n = 2^m\n   local xs = range(xmin, xmax, length = n + 1)\n   local d = (xmax - xmin) / n\n   local s1 = 0\n   for i = 1:n\n      x = xs[i]\n      s1 += g(x) * d\n   end\n   plt.plot(n, abs(s1 - se), \".\", color = \"b\")\nend\nplt.xscale(\"log\")\nplt.xlabel(\"n\")\nplt.ylabel(\"absolute error\")\nplt.savefig(\"ch08-rie2-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"(Image: )","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"今度は，相対誤差を，両対数グラフで描く．","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"using PyPlot\nplt.figure() #hide\nfor m = 0:12\n   local n = 2^m\n   local xs = range(xmin, xmax, length = n + 1)\n   local d = (xmax - xmin) / n\n   local s1 = 0\n   for i = 1:n\n      x = xs[i]\n      s1 += g(x) * d\n   end\n   plt.plot(n, abs(s1 - se) / se, \".\", color = \"g\")\nend\nplt.xlabel(\"n\")\nplt.ylabel(\"relative error (absolute value)\")\nplt.xscale(\"log\")\nplt.yscale(\"log\")\nplt.savefig(\"ch08-rie3-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"(Image: )","category":"page"},{"location":"ch08/#総和関数-sum","page":"第8回： ▼ 総和・数値積分","title":"■ 総和関数 sum","text":"","category":"section"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"Base.sum — Function","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"関数 sum(xs) は，数のコレクション v を引数にとり，v のすべての要素の総和を求める．","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"sum([1, 2, 3, 4, 5])\nsum(1:5)","category":"page"},{"location":"ch08/#級数和の公式（関数-sumを用いる)","page":"第8回： ▼ 総和・数値積分","title":"▼ 級数和の公式（関数 sumを用いる)","text":"","category":"section"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"sum_k=1^n k = 1 + 2 + cdots + k + cdots + n^2 = dfracn(n+1)2","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"using PyPlot\nplt.figure() #hide\nnmax = 25\nxs1 = 0:0.2:nmax\nplt.plot(xs1, xs1 .* (xs1 .+ 1) / 2, label = \"sum i\", \"b\")\n\nns = 0:nmax\nfor n in ns\n   local xs = 1:n\n   local s1 = sum(xs)\n   plt.plot(n, s1, \"bo\")\nend\n\nplt.xlabel(\"n\")\nplt.ylabel(\"sum i up to n\")\n\nplt.savefig(\"ch08-sum3-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"(Image: )","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"sum_k=1^n k^2 = 1^2 + 2^2 + cdots + k^2 + cdots + n^2 = dfracn(n+1)(2n+1)6","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"using PyPlot\nplt.figure() #hide\nnmax = 25\nxs1 = 0:0.2:nmax\nplt.plot(xs1, xs1 .* (xs1 .+ 1) .* (2 * xs1 .+ 1) / 6, \"b\")\n\nns = 0:nmax\nfor n in ns\n   # 各要素を二乗\n   local xs = (1:n) .^ 2\n   s = sum(xs)\n   plt.plot(n, s, \"bo\")\nend\nplt.xlabel(\"n\")\nplt.ylabel(\"sum i^2 up to n\")\n\nplt.savefig(\"ch08-sum4-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"(Image: )","category":"page"},{"location":"ch08/#Riemann和（関数-sumを用いる)","page":"第8回： ▼ 総和・数値積分","title":"▼ Riemann和（関数 sumを用いる)","text":"","category":"section"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"Riemann和において， 刻み幅 d はすべての短冊に共通であるから，d をくくりだして","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"s_1 = sum_i=1^n g(x_i)cdotd = dcdotsum_i=1^n g( x_i)","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"のようにまとめることができる．すなわち，関数の値の和 sum_i=1^n g( x_i) をとってから d 倍すればよい．関数の値の和を取るのに，関数 sum を使うことができる．","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"下のプログラムで g.(xs[1:end-1]) は，ベクトル xs[1:end-1] の各要素に関数 g() を適用したベクトルである．","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"ループで和を計算した場合と，関数 sum を用いる場合との両方で，相対誤差を描く． 計算結果が一致していることが見える． (参考: 結果が一致することを確かめるグラフの描画   → ●▼ 周期関数を確認する","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"using PyPlot\nplt.figure() #hide\nse = log(2)\nfor m = 0:12\n   local n = 2^m\n   local xs = range(xmin, xmax, length = n + 1)\n   local d = (xmax - xmin) / n\n\n   # 和を取る\n   local s1 = 0\n   for i = 1:n\n      x = xs[i]\n      s1 += g(x) * d\n   end\n   plt.plot(n, abs(s1 - se) / se, \"ro\")\n\n   # sum を使う\n   s2 = sum(g.(xs[1:end-1])) * d\n   plt.plot(n, abs(s2 - se) / se, \"b.\")\nend\nplt.xscale(\"log\")\nplt.yscale(\"log\")\nplt.xlabel(\"n\")\nplt.ylabel(\"absolute error\")\nplt.savefig(\"ch08-rie4-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"(Image: )","category":"page"},{"location":"ch08/#台形則（関数-sumを用いる)","page":"第8回： ▼ 総和・数値積分","title":"▼ 台形則（関数 sumを用いる)","text":"","category":"section"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"今度は，短冊を台形として計算してみる．","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"using PyPlot\nplt.figure() #hide\nm = 2\nn = 2^m\nxmin = 0\nxmax = 1\nxs = range(xmin, xmax, length = n + 1)\nd = (xmax - xmin) / n\n\ng(x) = 1 / (1 + x)\nplt.plot(xs, g.(xs), \"b\")\nplt.ylim(0, 1.2)\n\nfor i = 1:n\n   x = xs[i]\n   plt.plot([x, x, x + d, x + d], [0, g(x), g(x + d), 0], \"k\", lw = 0.5)\nend\n\nplt.savefig(\"ch08-tra1-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"(Image: )","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"総和をとるとき，隣り合う台形の面積をまとめることができることに注目しよう．","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"s_t = sum_i=1^n dfracg(x_i)+g(x_i+1) 2cdotd = dcdotleft dfracg(x_1)2 + sum_i=2^n-1 g(x_i)  + dfracg(x_n)2 right","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"先の Riemann和と台形則の値を両方計算してみよう．","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"se = log(2)\n\n# Riemann和\ns1 = 0\nfor x in xs[1:end-1]\n   global s1\n   s1 += g(x) * d\nend\n\n# 台形則\nst = (g(xs[1]) + g(xs[end])) / 2\nfor i = 2:n\n   global st\n   x = xs[i]\n   st += g(x)\nend\nst *= d\n#\n@show s1, st, (s1 - se) / se, (s1 - se) / se;","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"関数 sum を使って簡潔に書こう．","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"se = log(2)\nm = 4\nn = 2^m\nxs = range(xmin, xmax, length = n + 1)\nd = (xmax - xmin) / n\ns1 = sum(g.(xs[1:end-1])) * d\n\nst = (g(xs[1]) + g(xs[end])) / 2\nst += sum(g.(xs[2:end-1]))\nst *= d\n#\n@show s1, st, (s1 - se) / se, (s1 - se) / se;","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"相対誤差を描く．","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"using PyPlot\nplt.figure() #hide\nse = log(2)\nfor m = 0:12\n   local n = 2^m\n   local xs = range(xmin, xmax, length = n + 1)\n   local d = (xmax - xmin) / n\n\n   local s1 = sum(g.(xs[1:end-1])) * d\n\n   local st = (g(xs[1]) + g(xs[end])) / 2\n   st += sum(g.(xs[2:end-1]))\n   st *= d\n\n   plt.plot(n, abs(s1 - se) / se, \".\", color = \"g\")\n   plt.plot(n, abs(st - se) / se, \".\", color = \"r\")\nend\n\nplt.xlabel(\"n\")\nplt.ylabel(\"relative error (absolute value)\")\nplt.xscale(\"log\")\nplt.yscale(\"log\")\nplt.savefig(\"ch08-tra3-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"(Image: )","category":"page"},{"location":"ch08/#練習：Riemann和・台形則","page":"第8回： ▼ 総和・数値積分","title":"◀ 練習：Riemann和・台形則","text":"","category":"section"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"以下の定積分の近似値を，Riemann和と台形則でそれぞれ評価してみよ． （注記されていない）定積分の理論値は各自計算せよ．","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"begingathered\nint^1_0 3x^2dx \nint^1_0 3 left(x+1 right)^2dx \nint^1_0 expxdx \nint^2_0 dfrac1(1+x)^2dx=dfrac23 \nint^pi_0 sinxdx \nint^1_-1 dfrac21+x^2dx = pi\nendgathered","category":"page"},{"location":"ch08/#繰返し内部からの脱出","page":"第8回： ▼ 総和・数値積分","title":"■ 繰返し内部からの脱出","text":"","category":"section"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"Repeated Evaluation: Loops","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"for 文の繰り返し（「 for ブロック」）の内部で，「 break 文」を使うと，現在繰り返し中のループから直ちに抜けることができる．","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"for i = 1:1000\n   println(i)\n   if i >= 5\n      break\n   end\nend","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"乱数の値が 08 を超えるまで繰り返す．","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"for i = 1:10\n   r = rand()\n   println(r)\n   if r > 0.8\n      break\n   end\nend","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"二重ループ，内側のループからの脱出","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"for j = 1:3\n   for i = 1:5\n      println(\"i=\" * string(i) * \" j=\" * string(j))\n      if i >= 3\n         break\n      end\n   end\nend","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"一つの for 文に二つの繰り返しを書いた場合，break で for 文全体から抜けてしまう．","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"for j = 1:3, i = 1:5\n   println(\"i=\" * string(i) * \" j=\" * string(j))\n   if i >= 3\n      break\n   end\nend","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"for ブロックの内部で，continue 文を使うと，次の繰り返しに直ちに移動できる． 以下で，i % 3 は rem(i,3) と同じである． 参考→ ■ 残余 rem と整商 div","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"for i = 1:10\n   if i % 3 != 0\n      continue\n   end\n   println(i)\nend","category":"page"},{"location":"ch08/#練習：-条件が成り立つまで繰り返す：数値積分","page":"第8回： ▼ 総和・数値積分","title":"◀● 練習： 条件が成り立つまで繰り返す：数値積分","text":"","category":"section"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"(少し難しいので，後回しにしてもよい)","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"分割数 n を 2^20 まで，2 の冪乗で増やしていけ， ただし，相対誤差が 10^-4 以下になったら，そこで終了せよ．","category":"page"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"▼ Riemann和（関数 sumを用いる) ，または， ▼ 台形則（関数 sumを用いる) の，どちらを用いてもよい．","category":"page"},{"location":"ch08/#今回のまとめ","page":"第8回： ▼ 総和・数値積分","title":"今回のまとめ","text":"","category":"section"},{"location":"ch08/","page":"第8回： ▼ 総和・数値積分","title":"第8回： ▼ 総和・数値積分","text":"ベクトルのインデックス\n要素が 0 または 1 のベクトルの生成\nベクトルの総和 sum\n級数和\nフーリエ級数の和\n数値積分：Riemann和\n数値積分：台形則\n繰返し内部からの脱出","category":"page"},{"location":"ch09/#ch09","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"","category":"section"},{"location":"ch09/#ベクトルを引数とする関数","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"■ ベクトルを引数とする関数","text":"","category":"section"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"■ 総和関数 sum のように，ベクトルを引数とする関数がある．","category":"page"},{"location":"ch09/#積","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"■ 積","text":"","category":"section"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"Base.prod — Function","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"v = [2, 3, 4];\nprod(v)\n\nr = 1;\nfor i = 1:length(v)\n   global r\n   r *= v[i]\nend\nr","category":"page"},{"location":"ch09/#ノルム","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"■ ノルム","text":"","category":"section"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"LinearAlgebra.norm — Function","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"「ノルム（norm）」は，ベクトル（や行列）の「大きさ」を一般化した関数である．","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"LinearAlgebra パッケージの中で，関数 norm() が定義されている．","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"ノルムにはいくつかの定義がある． 単なる norm(v) は，2-norm を意味し，各要素の２乗平均値の和の平方根である．","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"v = [1, 2, 3, 4, 5, 6, 7];\n\nusing LinearAlgebra\nnorm(v)\n@show sqrt(sum(v .^ 2))\n\nr = 0;\nfor i = 1:length(v)\n   global r\n   r += v[i]^2\nend\nsqrt(r)","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"note: Note\n関数 abs.(v) は，ベクトルの各要素の絶対値からなるベクトルである．","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"v = [1, 2, 3, 4, 5, 6, 7];\nabs.(v)","category":"page"},{"location":"ch09/#平均値・標準偏差","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"■ 平均値・標準偏差","text":"","category":"section"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"Statistics.mean — Function\nStatistics.stdm — Function","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"ベクトルに格納されたデータの平均値や標準偏差を計算できる．","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"Statistics パッケージの関数 mean(v) は，ベクトル v の平均値を算出する．平均値は，各要素の総和 sum(v) を要素の数 n で除したものである．","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"Statistics パッケージの関数 std(v) は，ベクトル v の標準偏差を算出する．","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"単なる std(v) は，(n-1) で割った「偏りがない（unbiased）」標準偏差を算出する． 平均値を算出する． std(v, corrected=false) とすると，n で割った「偏った（biased）」標準偏差を算出する．","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"v = [1, 2, 3, 4, 5, 6, 7];\n# Statistics パッケージの読み込み\nusing Statistics\n# 平均値\nmean(v)\nsum(v) / length(v)\n# 偏りがない標準分散，n-1 で割る\nstd(v)\nsqrt(sum((v .- mean(v)) .^ 2) / (length(v) - 1))\n# 偏った標準分散，n で割る\nstd(v, corrected = false)\nsqrt(sum((v .- mean(v)) .^ 2) / (length(v)))","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"note: Note\n標準分散の計算には，「偏りのない」定義を用いるのがよい．例えば，こちらを参照．→ 分散は n で割るか n − 1 で割るか","category":"page"},{"location":"ch09/#複数の数を引数とする関数","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"■ 複数の数を引数とする関数","text":"","category":"section"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"Base.min — Function\nBase.max — Function","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"min(5, 1, 4, 2, 3)\nmax(5, 1, 4, 2, 3)","category":"page"},{"location":"ch09/#splatting-演算子","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"■ splatting 演算子","text":"","category":"section"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"... splits one argument into many different arguments in function calls","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"...演算子は，関数呼び出しにおいて，ベクトルを，複数の引数に分けてから呼び出す．","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"min([5, 1, 4, 2, 3]) # => exception\nmin([5, 1, 4, 2, 3]...) # min(5,1,4,2,3) と同じ","category":"page"},{"location":"ch09/#ベクトル要素への代入","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"■ ベクトル要素への代入","text":"","category":"section"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"v = collect(1:10)\n# インデックス：整数\nv[4] = 0\nv","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"演算子 .= は，ベクトルの各要素に対する代入である． ベクトルの要素を，整数の等差数列で指定して，一度に更新できる．","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"# インデックス：範囲\nv[3:2:10] .= 0\nv\n# `=` では例外を発生する\nv[3:2:10] = 1 # => Exception","category":"page"},{"location":"ch09/#素数の生成：エラトステネスの篩","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"■ 素数の生成：エラトステネスの篩","text":"","category":"section"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"エラトステネスの篩（ふるい）は，素数を算出する方法の一つである． 以下の手順による．","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"数 2 から n までの整数を並べる\n生き残っている中で最も小さい数 p を素数として残す．\n素数 p 自身を除く p の倍数をすべて消す\n以上の手順を，n まで調べたら終わり．","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"以下のプログラムでは，配列 sieve を篩とする． 篩の初期値を 1:n とすると，数字 i の篩は sieve[i] である． 篩で消された数 i には sieve[i] に 0 を格納することにする．","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"nmax = 100\nsieve = collect(1:nmax);\nsieve[1] = 0;\nfor i = 2:nmax\n   if sieve[i] > 0\n      println(i)\n      for j = i*2:i:nmax\n         sieve[j] = 0\n      end\n   end\nend","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"上のプログラムで，変数 j に関する繰り返しは，1行で書ける．","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"nmax = 100\nsieve = collect(1:nmax);\nsieve[1] = 0;\nfor i = 2:nmax\n   if sieve[i] > 0\n      # println(i)\n      sieve[i*2:i:nmax] .= 0\n   end\nend\n\nfor i = 1:nmax\n   if sieve[i] > 0\n      println(i)\n   end\nend","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"ここで，sieve[i*2:i:nmax].=0 の文は， 等差数列 i*2:i:nmax で表される添字で示される配列 sieve のすべてに 0 を代入することを意味する． 等差数列 i*2:i:nmax は，i*2から始まり，i 飛びに nmax まで増える等差数列である．","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"note: Note\nJulia には，素数を高速に計算する関数を含むパッケージが用意されている．Primes.primes — Function\nPrimes.isprime — Functionprimes(n) は，数 n までの素数を計算する．isprime(x)は，数 x が素数であるかどうかを判定する．","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"# import Pkg; Pkg.add(\"Primes\") # コメントを外してパッケージを設置する．一度だけ行えばよい\nusing Primes\nisprime(2)\nisprime(3)\nisprime(4)\nisprime.([2, 3, 4])\nprimes(100)","category":"page"},{"location":"ch09/#常微分方程式の初期値問題","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"▶ 常微分方程式の初期値問題","text":"","category":"section"},{"location":"ch09/#常微分方程式の初期値問題:Euler法","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"▶ 常微分方程式の初期値問題:Euler法","text":"","category":"section"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"微分方程式","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"dfracdxdt =f(xt)","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"の解 x(t) （の近似値）を求めたい．","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"Euler 法による数値解法は，以下のような手順である．","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"時刻 t_1 t_2 ldots を一定間隔 h とする． 上の式を，以下のように離散化する．","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"beginaligned\ndfracx_n+1-x_nh  = f(x_nt_n) \nx_n+1  = x_n + h f(x_nt_n)\nendaligned","category":"page"},{"location":"ch09/#例題：Euler法による解法","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"例題：Euler法による解法","text":"","category":"section"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"以下の微分方程式を解いてみる．","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"beginaligned\ndfracdxdt  = 1-x^2 \nx(0)  = 0 \n 0  leq t leq 16\nendaligned","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"刻み h = 04 とする．","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"f(x, t) = 1 - x^2\n#\ntmin = 0\ntmax = 1.6\nh = 0.4\nts = tmin:h:tmax\nn = length(ts)\n#\nx_now = 0 # initial condition\nfor i = 1:n\n   global x_now\n   t = ts[i]\n   x_next = x_now + h * f(x_now, t)\n   @show t, x_next\n   x_now = x_next\nend","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"解析解は，x = tanht である．","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"using PyPlot\nplt.figure(); #hide\n\nx_now = 0 # initial condition\nfor i = 1:n\n   global x_now\n   t = ts[i]\n   plt.plot(t, x_now, \"b.\")\n   x_next = x_now + h * f(x_now, t)\n   @show t, x_next\n   x_now = x_next\nend\nplt.plot(ts, tanh.(ts), \"r\")\nplt.xlabel(\"t\")\nplt.ylabel(\"x\")\nplt.savefig(\"ch09-euler1-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"(Image: )","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"配列に計算結果を入れて，一気に描画する．","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"using PyPlot\nplt.figure(); #hide\n\ntmin = 0\ntmax = 1.6\nh = 0.4\nts = tmin:h:tmax\nn = length(ts)\nxs = zeros(n)\nxs[1] = 0 # initial condition\n\nfor i = 1:n-1\n   local x_now = xs[i]\n   t = ts[i]\n   x_next = x_now + h * f(x_now, t)\n   xs[i+1] = x_next\nend\nplt.plot(ts, xs, \".\")\nplt.plot(ts, tanh.(ts), \"r\")\nplt.xlabel(\"t\")\nplt.ylabel(\"x\")\nplt.savefig(\"ch09-euler2-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"(Image: )","category":"page"},{"location":"ch09/#刻みを狭くする","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"刻みを狭くする","text":"","category":"section"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"刻み h を 04 02 01 005 と小さくしてみる． 刻みを小さくすると，近似解が厳密解に近づいていくことが観察できる．","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"using PyPlot\nplt.figure(); #hide\n\ntmin = 0\ntmax = 1.6\nh = 0.4\nfor k = 1:4\n   global h\n   local ts = tmin:h:tmax\n   local n = length(ts)\n   local xs = zeros(n)\n   xs[1] = 0 #  initial condition\n\n   for i = 1:n-1\n      t = ts[i]\n      local x_now = xs[i]\n      x_next = x_now + h * f(x_now, t)\n      xs[i+1] = x_next\n   end\n   plt.plot(ts, xs, \".\", label = \"h=\" * string(h))\n\n   h /= 2\nend\nplt.xlabel(\"t\")\nplt.ylabel(\"x\")\nplt.plot(ts, tanh.(ts), \"b\", label = \"tanh(t)\", lw = 0.5)\nplt.legend()\nplt.savefig(\"ch09-euler3-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"(Image: )","category":"page"},{"location":"ch09/#正確な解との誤差評価","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"正確な解との誤差評価","text":"","category":"section"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"using LinearAlgebra\nusing PyPlot\nplt.figure(); #hide\n\ntmin = 0\ntmax = 1.6\nh = 0.4\nfor k = 1:5\n   global h\n   local ts = tmin:h:tmax\n   local n = length(ts)\n   local xs = zeros(n)\n   xs[1] = 0 #  initial condition\n\n   for i = 1:n-1\n      t = ts[i]\n      local x_now = xs[i]\n      x_next = x_now + h * f(x_now, t)\n      xs[i+1] = x_next\n   end\n   xtrue = tanh.(ts)\n   e = norm(xs .- xtrue) / n\n   @show h, e\n   plt.plot(h, e, \".\")\n   h /= 2\nend\nplt.xlabel(\"h\")\nplt.xscale(\"log\")\nplt.yscale(\"log\")\nplt.xlim(1e-2, 1)\nplt.ylim(1e-4, 1e-1)\nplt.savefig(\"ch09-euler4-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"(Image: )","category":"page"},{"location":"ch09/#常微分方程式の初期値問題:修正Euler法","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"▶ 常微分方程式の初期値問題:修正Euler法","text":"","category":"section"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"修正Euler 法では，微分方程式","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"dfracdxdt =f(xt)","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"を，次のように離散化する．","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"beginaligned\nf_n  = f(x_n t_n) \noverlinex_n+1  = x_n + h f(x_nt) \noverlinef_n+1  = f(overlinex_n+1 t_n+1) \nx_n+1  = x_n + dfrach2 left(f_n + overlinef_n+1right)\nendaligned","category":"page"},{"location":"ch09/#例題：修正Euler法による解法","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"例題：修正Euler法による解法","text":"","category":"section"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"（再掲）Euler法と同じ微分方程式を解いてみる．","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"beginaligned\ndfracdxdt  = 1-x^2 \nx(0)  = 0 \n 0  leq t leq 16\nendaligned","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"刻み h = 04 とする．","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"#\ntmin = 0\ntmax = 1.6\nh = 0.4\nts = tmin:h:tmax\nn = length(ts)\nx_now = 0 # initial condition\n\nfor i = 1:n-1\n   global x_now\n   t = ts[i]\n   t_next = ts[i+1]\n   f_now = f(x_now, t)\n   x_mid = x_now + h * f_now\n   f_mid = f(x_mid, t_next)\n   x_next = x_now + (f_now + f_mid) * h / 2\n   @show t, x_next\n   x_now = x_next\nend","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"配列に計算結果を入れて，一気に描画する．","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"using PyPlot\nplt.figure(); #hide\n\nn = length(ts)\nxs = zeros(n)\n\nxs[1] = 0 # initial condition\nfor i = 1:n-1\n   global xs\n   local x_now = xs[i]\n   t_next = ts[i+1]\n   t = ts[i]\n   f_now = f(x_now, t)\n   x_mid = x_now + h * f_now\n   f_mid = f(x_mid, t_next)\n   xs[i+1] = x_now + (f_now + f_mid) * h / 2\nend\nplt.plot(ts, xs, \".\")\nplt.plot(ts, tanh.(ts))\nplt.xlabel(\"t\")\nplt.ylabel(\"x\")\nplt.savefig(\"ch09-meuler1-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"(Image: )","category":"page"},{"location":"ch09/#刻みを狭くする-2","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"刻みを狭くする","text":"","category":"section"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"刻み h を 04 02 01 005 と小さくしてみる． 刻みを小さくすると，近似解が厳密解に近づいていくことが観察できる．","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"using LinearAlgebra\nusing PyPlot\nplt.figure(); #hide\n\nh = 0.4\nfor k = 1:4\n   global h\n   local ts = tmin:h:tmax\n   local n = length(ts)\n   local xs = zeros(n)\n   xs[1] = 0 # initial condition\n   for i = 1:n-1\n      t = ts[i]\n      local x_now = xs[i]\n      t_next = ts[i+1]\n      f_now = f(x_now, t)\n      x_mid = x_now + h * f_now\n      f_mid = f(x_mid, t_next)\n      xs[i+1] = x_now + (f_now + f_mid) * h / 2\n   end\n   xtrue = tanh.(ts)\n   e = norm(xs .- xtrue)\n   @show h, e\n   plt.plot(ts, xs, \".\", label = \"h=\" * string(h))\n   h /= 2\nend\nplt.xlabel(\"t\")\nplt.ylabel(\"x\")\nplt.plot(ts, tanh.(ts), \"b\", label = \"tanh(t)\", lw = 0.5)\nplt.legend()\nplt.savefig(\"ch09-meuler2-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"(Image: )","category":"page"},{"location":"ch09/#正確な解との誤差評価-2","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"正確な解との誤差評価","text":"","category":"section"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"using LinearAlgebra\nusing PyPlot\nplt.figure(); #hide\n\nh = 0.4\nfor k = 1:4\n   global h\n   local ts = tmin:h:tmax\n   local n = length(ts)\n   local xs = zeros(n)\n   xs[1] = 0 # initial condition\n   for i = 1:n-1\n      t = ts[i]\n      local x_now = xs[i]\n      t_next = ts[i+1]\n      f_now = f(x_now, t)\n      x_mid = x_now + h * f_now\n      f_mid = f(x_mid, t_next)\n      xs[i+1] = x_now + (f_now + f_mid) * h / 2\n   end\n   xtrue = tanh.(ts)\n   e = norm(xs .- xtrue) / n\n   @show h, e\n   plt.plot(h, e, \".\")\n   h /= 2\nend\nplt.xlabel(\"h\")\nplt.xscale(\"log\")\nplt.yscale(\"log\")\nplt.xlim(1e-2, 1)\nplt.ylim(1e-5, 1e-1)\nplt.savefig(\"ch09-meuler4-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"(Image: )","category":"page"},{"location":"ch09/#練習：常微分方程式の数値解の誤差","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"◀● 練習：常微分方程式の数値解の誤差","text":"","category":"section"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"上の常微分方程式の数値解法の例について， Euler法による絶対誤差と，修正Euler法による絶対誤差を， 刻み幅 h に対する関数として，一つのグラフの上に表せ．","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"結果は，例えば，以下のようになろう．","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"using PyPlot\nplt.figure(); #hide\n\nusing LinearAlgebra\nh = 0.4\nkmax = 8\nhs = zeros(kmax)\ne_euler = zeros(kmax)\ne_meuler = zeros(kmax)\n\nfor k = 1:kmax\n   global h\n   hs[k] = h\n   local ts = tmin:h:tmax\n   local n = length(ts)\n   local xs = zeros(n)\n   xs[1] = 0 #  initial condition\n\n   # Euler\n   for i = 1:n-1\n      local x_now = xs[i]\n      t = ts[i]\n      x_next = x_now + h * f(x_now, t)\n      xs[i+1] = x_next\n   end\n   xtrue = tanh.(ts)\n   e_euler[k] = norm(xs .- xtrue) / n\n\n   # modified Euler\n   xs[1] = 0 # initial condition\n   for i = 1:n-1\n      local x_now = xs[i]\n      t_next = ts[i+1]\n      t = ts[i]\n      f_now = f(x_now, t)\n      x_mid = x_now + h * f_now\n      f_mid = f(x_mid, t_next)\n      xs[i+1] = x_now + (f_now + f_mid) * h / 2\n   end\n   xtrue = tanh.(ts)\n   e_meuler[k] = norm(xs .- xtrue) / n\n   h /= 2\nend\nplt.plot(hs, e_euler, \".\", label = \"Euler\")\nplt.plot(hs, e_meuler, \".\", label = \"modified Euler\")\nplt.xlabel(\"h\")\nplt.xscale(\"log\")\nplt.yscale(\"log\")\nplt.legend()\nplt.xlim(1e-3, 1)\nplt.ylim(1e-6, 1e-1)\nplt.savefig(\"ch09-meuler6-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"(Image: )","category":"page"},{"location":"ch09/#練習：-条件が成り立つまで繰り返す：微分方程式の初期値問題","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"◀● 練習： 条件が成り立つまで繰り返す：微分方程式の初期値問題","text":"","category":"section"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"（少し難しいので，後回しにしてもよい）","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"Euler法ないし修正Euler法による微分方程式の数値解法を， 刻み幅 h を半分にしながら 20 回繰り返せ． ただし，絶対誤差が 10^-4 以下になったら，そこで終了せよ．","category":"page"},{"location":"ch09/#練習：常微分方程式・素性の悪い問題","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"◀● 練習：常微分方程式・素性の悪い問題","text":"","category":"section"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"以下の微分方程式を解いてみよ．","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"beginaligned\ndfracdxdt  = x^2 \nx(0)  = dfrac12 \n 0  le t  2\nendaligned","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"解析解は，","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"x = dfrac12-t","category":"page"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"となり，t longrightarrow 0 で無限大に発散する「素性の悪い」方程式である．","category":"page"},{"location":"ch09/#今回のまとめ","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"★ 今回のまとめ","text":"","category":"section"},{"location":"ch09/","page":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第9回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"ベクトルを引数とする関数\n複数の数を引数とする関数\nsplatting 演算子\nベクトル要素への代入\nエラトステネスの篩：素数を算出する\n微分方程式の初期値問題，Euler法，修正Euler法","category":"page"},{"location":"ch0b/#ch0b","page":"付録B：2018年度・定期レポートへのコメント（その２）","title":"付録B：2018年度・定期レポートへのコメント（その２）","text":"","category":"section"},{"location":"ch0b/","page":"付録B：2018年度・定期レポートへのコメント（その２）","title":"付録B：2018年度・定期レポートへのコメント（その２）","text":"※ 以下のプログラムは，Julia 1.1向けに書き直した．","category":"page"},{"location":"ch0b/#ネタもと","page":"付録B：2018年度・定期レポートへのコメント（その２）","title":"ネタもと","text":"","category":"section"},{"location":"ch0b/","page":"付録B：2018年度・定期レポートへのコメント（その２）","title":"付録B：2018年度・定期レポートへのコメント（その２）","text":"2018年12月，および，2019年1月の月間レポートでは，題材自由のレポートを課した． うち，後者は，関数を定義することを必須の条件とした．","category":"page"},{"location":"ch0b/","page":"付録B：2018年度・定期レポートへのコメント（その２）","title":"付録B：2018年度・定期レポートへのコメント（その２）","text":"提出された学生レポートを少し改変して，以下に示す．","category":"page"},{"location":"ch0b/","page":"付録B：2018年度・定期レポートへのコメント（その２）","title":"付録B：2018年度・定期レポートへのコメント（その２）","text":"次の関数 dora1() は，何かを描く関数の定義である．","category":"page"},{"location":"ch0b/","page":"付録B：2018年度・定期レポートへのコメント（その２）","title":"付録B：2018年度・定期レポートへのコメント（その２）","text":"function dora1()\n   ts = 0:pi/18:2pi\n   xs = 6cos.(ts)\n   ys = 6sin.(ts)\n   plt.plot(xs, ys)\n\n   ts = 0:pi/18:2pi\n   xs = 1.2 .+ 1.2 * cos.(ts)\n   ys = 2.5 .+ 1.5 * sin.(ts)\n   plt.plot(xs, ys, \"k\")\n\n   ts = 0:pi/18:2pi\n   xs = -1.2 .+ 1.2cos.(ts)\n   ys = 2.5 .+ 1.5sin.(ts)\n   plt.plot(xs, ys, \"k\")\n\n   ts = 0:pi/18:2pi\n   xs = 0.5cos.(ts)\n   ys = 1.1 .+ 0.5sin.(ts)\n   plt.plot(xs, ys, \"r\")\n\n   ts = 0:pi/18:2pi\n   xs = 5cos.(ts)\n   ys = -1.5 .+ 4.5sin.(ts)\n   plt.plot(xs, ys, \"k\")\n\n   ts = 0:pi/18:2pi\n   xs = 0.5 .+ 0.5cos.(ts)\n   ys = 2.4 .+ 0.5sin.(ts)\n   plt.plot(xs, ys, \"k\")\n\n   ts = 0:pi/18:2pi\n   xs = -0.5 .+ 0.5cos.(ts)\n   ys = 2.4 .+ 0.5sin.(ts)\n   plt.plot(xs, ys, \"k\")\n\n   xs = -2.3:0.5:2.3\n   plt.plot(xs, 1 / 2.5 * xs .^ 2 .- 4, \"k\", label = \"s\")\n\n   xs = -2:0.1:1\n   plt.plot(-4 .+ xs, -0.3 * xs, \"k\")\n   plt.plot(5 .+ xs, 0.3 * xs, \"k\")\n\n   xs = -2:0.1:1\n   plt.plot(-4 .+ xs, -2 .+ 0 * xs, \"k\")\n   plt.plot(5 .+ xs, -2 .+ 0 * xs, \"k\")\n\n   xs = -2:0.1:1\n   plt.plot(-4 .+ xs, -1.2 .+ -0.2 * xs, \"k\")\n   plt.plot(5 .+ xs, -1.2 .+ 0.2 * xs, \"k\")\n\n   xs = -28:0.1:-5\n   plt.plot(0 * xs, -5 .+ -0.2 * xs, \"k\")\nend","category":"page"},{"location":"ch0b/","page":"付録B：2018年度・定期レポートへのコメント（その２）","title":"付録B：2018年度・定期レポートへのコメント（その２）","text":"この関数を呼出して，実行結果を示す． 何かのキャラクターの顔が描かれた．","category":"page"},{"location":"ch0b/","page":"付録B：2018年度・定期レポートへのコメント（その２）","title":"付録B：2018年度・定期レポートへのコメント（その２）","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n\ndora1()\nplt.xlim(-7, 7)\nplt.ylim(-7, 7)\nplt.savefig(\"ch0b-dora1.svg\") #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch0b/","page":"付録B：2018年度・定期レポートへのコメント（その２）","title":"付録B：2018年度・定期レポートへのコメント（その２）","text":"(Image: )","category":"page"},{"location":"ch0b/","page":"付録B：2018年度・定期レポートへのコメント（その２）","title":"付録B：2018年度・定期レポートへのコメント（その２）","text":"この関数では，平面図形を描く曲線を各々設計した苦労の跡が偲ばれる． 作者の意図通りに動作し，大変結構である．","category":"page"},{"location":"ch0b/","page":"付録B：2018年度・定期レポートへのコメント（その２）","title":"付録B：2018年度・定期レポートへのコメント（その２）","text":"しかし，この関数を後から振り返ったときに， 各行の意図をすぐに汲み取るのは難しいだろう． 一部の数値だけ異なるが，同じようなプログラム片が並ぶのも，読みにくくしている．","category":"page"},{"location":"ch0b/#下請け関数を定義する","page":"付録B：2018年度・定期レポートへのコメント（その２）","title":"下請け関数を定義する","text":"","category":"section"},{"location":"ch0b/","page":"付録B：2018年度・定期レポートへのコメント（その２）","title":"付録B：2018年度・定期レポートへのコメント（その２）","text":"さて，この顔は，楕円，直線，放物線の３つの図形から成り立っている． これら３つの図形を描く関数を定義してみよう．","category":"page"},{"location":"ch0b/","page":"付録B：2018年度・定期レポートへのコメント（その２）","title":"付録B：2018年度・定期レポートへのコメント（その２）","text":"まず，left(x_c y_cright) を中心とし，x 軸方向の広がりが 2a , y 軸方向の広がりが 2b であるような楕円を描く関数を定義する．式で書くと left(dfracx-x_caright)^2 + left(dfracy-y_cbright)^2 = 1 である．","category":"page"},{"location":"ch0b/","page":"付録B：2018年度・定期レポートへのコメント（その２）","title":"付録B：2018年度・定期レポートへのコメント（その２）","text":"関数の引数は，xc , yc , a , b と 色（またはスタイル）を示す文字列 c である． 最後の引数 c を省略したときは c=\"k\" （黒色）を既定値とする．","category":"page"},{"location":"ch0b/","page":"付録B：2018年度・定期レポートへのコメント（その２）","title":"付録B：2018年度・定期レポートへのコメント（その２）","text":"function draw_ellipse(xc, yc, a, b, c = \"k\")\n   ts = 0:pi/36:2pi\n   xs = xc .+ a * cos.(ts)\n   ys = yc .+ b * sin.(ts)\n   plt.plot(xs, ys, c)\nend","category":"page"},{"location":"ch0b/","page":"付録B：2018年度・定期レポートへのコメント（その２）","title":"付録B：2018年度・定期レポートへのコメント（その２）","text":"上の関数の動作を確認しよう．上に続けて","category":"page"},{"location":"ch0b/","page":"付録B：2018年度・定期レポートへのコメント（その２）","title":"付録B：2018年度・定期レポートへのコメント（その２）","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n\ndraw_ellipse(1, 1, 2, 1, \"g\")\ndraw_ellipse(1, 1, 1, 2, \"r\")\nplt.xlim(-2, 4)\nplt.ylim(-2, 4)\nplt.axhline(1, color = \"k\", lw = 0.5)\nplt.axvline(1, color = \"k\", lw = 0.5)\n\nplt.savefig(\"ch0b-dora-ellipse.svg\") #hide","category":"page"},{"location":"ch0b/","page":"付録B：2018年度・定期レポートへのコメント（その２）","title":"付録B：2018年度・定期レポートへのコメント（その２）","text":"(Image: )","category":"page"},{"location":"ch0b/","page":"付録B：2018年度・定期レポートへのコメント（その２）","title":"付録B：2018年度・定期レポートへのコメント（その２）","text":"次に，２つの点 (x_1 y_1) と (x_2 y_2) とを結ぶ直線を描く関数を定義しよう．","category":"page"},{"location":"ch0b/","page":"付録B：2018年度・定期レポートへのコメント（その２）","title":"付録B：2018年度・定期レポートへのコメント（その２）","text":"function draw_line(x1, y1, x2, y2, c = \"k\")\n   xs = [x1, x2]\n   ys = [y1, y2]\n   plt.plot(xs, ys, c)\nend","category":"page"},{"location":"ch0b/","page":"付録B：2018年度・定期レポートへのコメント（その２）","title":"付録B：2018年度・定期レポートへのコメント（その２）","text":"上の関数の動作を確認しよう．上に続けて","category":"page"},{"location":"ch0b/","page":"付録B：2018年度・定期レポートへのコメント（その２）","title":"付録B：2018年度・定期レポートへのコメント（その２）","text":"draw_line(-1, -1, 3, 2, \"b\")\ndraw_line(-1, 3, 3, 0, \"g\")\nplt.xlim(-2, 4)\nplt.ylim(-2, 4)\nplt.axhline(1, color = \"k\", lw = 0.5)\nplt.axvline(1, color = \"k\", lw = 0.5)\nplt.savefig(\"ch0b-dora-line.svg\") #hide","category":"page"},{"location":"ch0b/","page":"付録B：2018年度・定期レポートへのコメント（その２）","title":"付録B：2018年度・定期レポートへのコメント（その２）","text":"(Image: )","category":"page"},{"location":"ch0b/","page":"付録B：2018年度・定期レポートへのコメント（その２）","title":"付録B：2018年度・定期レポートへのコメント（その２）","text":"最後に， 放物線（２次間数）y=ax^2+bx+c を，区間 leftx_1 x_2right の範囲で描く関数を定義しよう．","category":"page"},{"location":"ch0b/","page":"付録B：2018年度・定期レポートへのコメント（その２）","title":"付録B：2018年度・定期レポートへのコメント（その２）","text":"function draw_para(a, b, c, x1, x2, color = \"k\")\n   xs = range(x1, x2, length = 50)\n   ys = a * xs .^ 2 .+ b * xs .+ c\n   plt.plot(xs, ys, color)\nend","category":"page"},{"location":"ch0b/","page":"付録B：2018年度・定期レポートへのコメント（その２）","title":"付録B：2018年度・定期レポートへのコメント（その２）","text":"上の関数の動作を確認しよう．上に続けて","category":"page"},{"location":"ch0b/","page":"付録B：2018年度・定期レポートへのコメント（その２）","title":"付録B：2018年度・定期レポートへのコメント（その２）","text":"draw_para(1, 0, -1, -2, 2, \"b\")\ndraw_para(-1, 0, 1, -2, 2, \"g\")\nplt.xlim(-3, 3)\nplt.ylim(-3, 3)\nplt.axhline(0, color = \"k\", lw = 0.5)\nplt.axvline(0, color = \"k\", lw = 0.5)\nplt.savefig(\"ch0b-dora-para.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch0b/","page":"付録B：2018年度・定期レポートへのコメント（その２）","title":"付録B：2018年度・定期レポートへのコメント（その２）","text":"(Image: )","category":"page"},{"location":"ch0b/#元の関数を書き換える","page":"付録B：2018年度・定期レポートへのコメント（その２）","title":"元の関数を書き換える","text":"","category":"section"},{"location":"ch0b/","page":"付録B：2018年度・定期レポートへのコメント（その２）","title":"付録B：2018年度・定期レポートへのコメント（その２）","text":"これらの「下請け」関数を呼び出す形で，元の関数 dora1() を書き直そう． 隣接する部分がまとまるように，行の順番を少し入れ替えて，コメントをつけた （元の描画順に意図があるなら，ご容赦願いたい）．","category":"page"},{"location":"ch0b/","page":"付録B：2018年度・定期レポートへのコメント（その２）","title":"付録B：2018年度・定期レポートへのコメント（その２）","text":"function dora2()\n   # face\n   draw_ellipse(0, 0, 6, 6, \"b\")\n\n   # nose\n   draw_ellipse(0, 1.1, 0.5, 0.5, \"r\")\n\n   # gray line\n   draw_ellipse(0, -1.5, 5, 4.5)\n\n   # eyes\n   draw_ellipse(1.2, 2.5, 1.2, 1.5)\n   draw_ellipse(-1.2, 2.5, 1.2, 1.5)\n\n   draw_ellipse(0.5, 2.4, 0.5, 0.5)\n   draw_ellipse(-0.5, 2.4, 0.5, 0.5)\n\n   # beard\n   draw_line(-6, 0.6, -3, -0.3)\n   draw_line(6, 0.3, 3, -0.6)\n\n   draw_line(-6, -2, -3, -2)\n   draw_line(6, -2, 3, -2)\n\n   draw_line(-6, -0.8, -3, -1.4)\n   draw_line(6, -1.0, 3, -1.6)\n\n   # mouth\n   draw_line(0, 0.6, 0, -4)\n   draw_para(1 / 2.5, 0, -4, -2.3, 2.3)\nend","category":"page"},{"location":"ch0b/","page":"付録B：2018年度・定期レポートへのコメント（その２）","title":"付録B：2018年度・定期レポートへのコメント（その２）","text":"実行してみよう．","category":"page"},{"location":"ch0b/","page":"付録B：2018年度・定期レポートへのコメント（その２）","title":"付録B：2018年度・定期レポートへのコメント（その２）","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n\ndora2()\nplt.xlim(-7, 7)\nplt.ylim(-7, 7)\nplt.savefig(\"ch0b-dora2.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch0b/","page":"付録B：2018年度・定期レポートへのコメント（その２）","title":"付録B：2018年度・定期レポートへのコメント（その２）","text":"(Image: )","category":"page"},{"location":"ch0b/#リファクタリング","page":"付録B：2018年度・定期レポートへのコメント（その２）","title":"リファクタリング","text":"","category":"section"},{"location":"ch0b/","page":"付録B：2018年度・定期レポートへのコメント（その２）","title":"付録B：2018年度・定期レポートへのコメント（その２）","text":"関数 dora1() を dora2() に書き直したように， プログラムの内容を保ったまま，見通しをよくしたり，実行速度を改善する作業を， 「リファクタリング（refactoring）」という．","category":"page"},{"location":"ch0b/","page":"付録B：2018年度・定期レポートへのコメント（その２）","title":"付録B：2018年度・定期レポートへのコメント（その２）","text":"(プログラムも含めて)複数の「要素（component）」が協力して働いて， ある目的を達成するものを，「システム（system）」という．","category":"page"},{"location":"ch0b/","page":"付録B：2018年度・定期レポートへのコメント（その２）","title":"付録B：2018年度・定期レポートへのコメント（その２）","text":"システムを「実装する（implement）」手法として， 「ボトム・アップ的な手法（bottom-up approach）」 , 「トップ・ダウン的な手法（top-down approach）」が知られている．","category":"page"},{"location":"ch0b/","page":"付録B：2018年度・定期レポートへのコメント（その２）","title":"付録B：2018年度・定期レポートへのコメント（その２）","text":"ボトム・アップ的な手法は， 下位の要素を作成してから (上の例では，関数 draw_ellipse や draw_line などを定義してから), それらの組合せで上位の要素（システム）を作成する （上の例では関数 dora2() を定義する）手法である．","category":"page"},{"location":"ch0b/","page":"付録B：2018年度・定期レポートへのコメント（その２）","title":"付録B：2018年度・定期レポートへのコメント（その２）","text":"トップ・ダウン的な手法は， 先に，上位の要素（システム）を決めてから（関数 dora2() を定義してから）， その下位の要素（部品）を作成する（関数 draw_ellipse などを定義する）手法である．","category":"page"},{"location":"ch0b/","page":"付録B：2018年度・定期レポートへのコメント（その２）","title":"付録B：2018年度・定期レポートへのコメント（その２）","text":"プログラミングの初級段階では，ボトム・アップ的な手法が分かりやすいだろうが， システムの成り立ちに習熟するにつれて， トップ・ダウン的な手法が取れるようになるであろう．","category":"page"},{"location":"ch0b/","page":"付録B：2018年度・定期レポートへのコメント（その２）","title":"付録B：2018年度・定期レポートへのコメント（その２）","text":"システムの考え方では， システムを構成する「要素」を，入力と出力の対応関係だけが決まっていて， その中身は関知しない「ブラック・ボックス black box」とみなす． しかしながら，現実のシステムでは，「要素」の「中身」を無視することができず， 上位のシステムの性能にも影響が及ぶ．","category":"page"},{"location":"ch0b/","page":"付録B：2018年度・定期レポートへのコメント（その２）","title":"付録B：2018年度・定期レポートへのコメント（その２）","text":"そのような「要素」と「要素」の「界面（interface）」を上手に扱うことができる人こそ， 優れた「工学者（engineer）」といえる．","category":"page"},{"location":"ch0b/","page":"付録B：2018年度・定期レポートへのコメント（その２）","title":"付録B：2018年度・定期レポートへのコメント（その２）","text":"諸君が優れた工学者になることを願って，この文の著者は対応しているつもりである．","category":"page"},{"location":"ch0b/","page":"付録B：2018年度・定期レポートへのコメント（その２）","title":"付録B：2018年度・定期レポートへのコメント（その２）","text":"## ★ 今回のまとめ","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"Memorandum on Julia Language v1.9","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"Hiroharu Sugawara, Ph. D.","category":"page"},{"location":"ch00/#ch00","page":"はじめに","title":"はじめに","text":"","category":"section"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"本文は，大学1年次学生のためのプログラミング演習の手引きである．","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"Julia言語の v1.9 を採用した． Julia言語は，開発効率と実行速度の両立を目指した言語である． Juliaは，汎用である（どんな目的にも使える）が， 数値計算の扱いに，とくに優れている．","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"本文では，プログラムと実行結果を，たくさん紹介する． それらの多くは，大学初年級の数学や技術工学の分野で現れる 数値計算から選んでいる．","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"プログラミングの演習が，単に言語の習得に留まらず， STEAM (Science, Technology, Engineering, Arts and Mathematics) の理解の助けになることを希望する．","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"実行結果を，そのまま取り込んでいる．","category":"page"},{"location":"ch00/#動作環境","page":"はじめに","title":"動作環境","text":"","category":"section"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"設置（インストール）とは，アプリケーションやプログラムを利用できるように，計算機の環境を整えることをいう．","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"本文では，利用するPCで，以下の設置がなされていることを前提とする．","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"Julia 1.6 以上が設置されていること\nPyPlot パッケージ（グラフ描画）が設置されていること\nJupyter notebookを用いる場合は IJulia パッケージが設置されていること","category":"page"},{"location":"ch00/#設定方法","page":"はじめに","title":"設定方法","text":"","category":"section"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"プログラミング演習の環境を設定する方法：2022春夏学期授業向けの環境設定 を参考に，手元 PC に実行環境を構築せよ．","category":"page"},{"location":"ch00/#Julia言語のバージョンについて","page":"はじめに","title":"Julia言語のバージョンについて","text":"","category":"section"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"Julia言語の 1.0 版は，2018年8月に公開された． Julia 1.0 released","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"この本文の構築には，2023年8月24日に交際された最新版 1.9.3 を用いた．上位互換性が確保されており，性能も改善されているので，可能なら，バージョンアップするとよい． Julia v1.9.3 has been released","category":"page"},{"location":"ch00/#Julia言語の情報検索","page":"はじめに","title":"Julia言語の情報検索","text":"","category":"section"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"Julia の one word をキーワードに検索しても，人の名前によく使われる単語であるので，Julia言語の内容にたどり着くのが難しい．","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"Julialang で検索することを，強く勧める．","category":"page"},{"location":"ch00/#Julia言語の情報源・参考文献","page":"はじめに","title":"Julia言語の情報源・参考文献","text":"","category":"section"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"本文では，Julia v1.9.3 を用いる（再掲）","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"Julia v1.9 Documentation, 本家のドキュメント，英語","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"本年 (2023年) 現時点の決定版ともいえる日本語解説本２冊が出版された．どちらも入門書を標榜しつつ，高度な内容を紹介している．","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"Juliaプログラミング大全 佐藤 健太，講談社サイエンティフィック (2023)，ISBN: 978-4-06-531819-5\n実践Julia入門 後藤 俊介，技術評論社 (2023)，ISBN 978-4-297-13350-4","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"構文早見表","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"Julia Cheat Sheet\nThe First Track to (a quick and dirty overview of) Julia 1.0 英語版\n早わかり (すぐに使える) Julia 1.0 日本語版．翻案は菅原","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"Julia express,　Bogumił Kami´nski さん，英語\n最新版 Julia 1.6.1\nThe Julia Express, ソース\nJulia高速チュートリアル，日本語，Julia 0.7以上，@bicycle1885 (Kenta Sato)さん\nJulia高速チュートリアル\nJuliaクックブック\nJulia Language Programming ~ お気楽 Julia プログラミング超入門 広井 誠さん，Julia 1.0\nJulia & IJulia Cheat-Sheet , 英語 @stevenj (MIT, Julia 1.0\nVarious Julia plotting examples using PyPlot, @gizmaa (github)","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"Juliaによるプログラミング入門","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"Think Julia: How to Think Like a Computer Scientist, Ben Lauwens, Allen Downey, 英語\nオンライン版 Think Julia: How to Think Like a Computer Scientist\n書籍→  https://www.oreilly.com/library/view/think-julia/9781492045021/\nMIT (Massachusetts Institute of Technology) の授業 \"Introduction to Computational Thinking\" の教科書です\nTanmay Teaches Julia for Beginners: A Springboard to Machine Learning for All Ages, Tanmay Bakshi, 2020, ISBN:978-1260456639, 英語\n天才プログラマー タンメイが教えるJulia超入門 上記の日本語訳． 訳は菅原．東京化学同人 (2022), ISBN: 9784807920211.\n1から始めるJulia, 進藤 裕之，佐藤 建太，コロナ社 (2020), ISBN 978-4-339-02905-5\nWEB+DB PRESS Vol.111 第2特集に Julia の詳細な紹介記事がある．\n雑誌 ISBN 978-4-297-10657-7, 技術評論社，2019年6月24日発売．\nサポートページ","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"物理学への応用","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"１週間で学べる! Julia数値計算プログラミング 永井 佑紀，講談社 (2022)，ISBN: 978-4065282823\n物理で使う数値計算入門：Julia言語による簡単数値計算：永井さんのメモ\nJulia で作って学ぶベイズ統計学 須山 敦志，講談社 (2021)，ISBN: 978-4-06-525980-1","category":"page"},{"location":"ch00/#数値計算プログラミングの参考書","page":"はじめに","title":"数値計算プログラミングの参考書","text":"","category":"section"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"本文では，数値計算の話題を多く扱っている．以下の文献を参考にした．","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"数値計算の常識，伊理 正夫，藤野 和建，共立出版，1985年，ISBN: 978-4320013438, CiNiiBooksへのリンク  BN00729247\n数値計算講義，金子 晃，サイエンス社，2009年，ISBN: 978-4781912257, CiNiiBooksへのリンク  BA89645032","category":"page"},{"location":"ch00/#節の記号","page":"はじめに","title":"節の記号","text":"","category":"section"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"以下本文の各節表題には，冒頭に ■，▼，▲，★ の記号が付いている． 各記号の意味は，以下の通りである．","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"■  Julia 言語の解説\n▼  例題を用いた解説\n▲  練習・応用問題\n★  その回のまとめ","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"以上の記号の前に，● の記号がついた節は，高度な内容を含んだり， 後の説明を先取りしたりしている．","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"さらに，◎ は，Julia 0.6.4 から書き換える場合の注意を示す．","category":"page"},{"location":"ch00/#免責事項など","page":"はじめに","title":"免責事項など","text":"","category":"section"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"本文は，不定期に更新する．節の配置も変更する可能性がある．","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"本文は，著者らの知見に基づく情報の公開を目的としている． 本文に書かれた内容およびその正誤によって生じた結果について， 著者らはいかなる責任を負わない．","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"本文に掲載した内容は，著者らの環境でのみ動作の確認を行なっており， いかなる環境においても再現できることを保証するものではない．","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"実行環境","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"macOSX version 11.6.5\nJulia 1.7.3（Julia公式ページから配布されたバイナリー）","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"Copyright (c) 2018–2023 Hiroharu Sugawara","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"本文は，いわゆる MIT LICENSE で公開する． LICENSEの本文は MIT License を，その参考和訳は MIT License 参考和訳 を参照せよ．","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"\n# 扱わないこと\n\n* Interfaces\n* Modules\n* Metaprogramming\n* Networking and Streams\n* Parallel Computing\n* Parametric types\n* Profiling\n","category":"page"},{"location":"ch12/#ch12","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"","category":"section"},{"location":"ch12/#関数の定義と呼び出し","page":"第12回：関数の定義と呼び出し","title":"■ 関数の定義と呼び出し","text":"","category":"section"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"■ 関数の定義（代入文形式） の節で，代入文形式のユーザ関数の定義を紹介した． この節では，より一般的な扱いを説明する．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"より広い意味では，一連のプログラム片に名前を付けたものが，「関数（function）」である．","category":"page"},{"location":"ch12/#関数の定義と呼び出し：引数がない場合","page":"第12回：関数の定義と呼び出し","title":"■ 関数の定義と呼び出し：引数がない場合","text":"","category":"section"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"以下は，Hello という文字を印字する関数の定義を示す．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"関数定義は，キーワード function で始まり，その後に関数名を書く． 呼び出す際に，渡すべき値がなければ，関数名の後に，括弧・閉じ括弧 () を書くだけである．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"処理を記述した後，キーワード end で終わる．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"function hello()\n   println(\"Hello\")\nend","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"この関数を呼び出すには，関数名に続けて () を書けばよい．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"hello()\nhello()","category":"page"},{"location":"ch12/#関数の定義と呼び出し：引数がある場合","page":"第12回：関数の定義と呼び出し","title":"■ 関数の定義と呼び出し：引数がある場合","text":"","category":"section"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"関数を呼び出す際に，渡す値がある場合は，関数名の後に， 括弧 () で囲んで，変数名（仮引数，「かり・ひきすう」，parameter）の並びを書く．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"function hello(name)\n   print(\"Hello \")\n   println(string(name))\nend","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"この関数を呼び出すには，関数名に続けて () に囲んで，具体的な値（実引数「じつ・ひきすう」argument)を書く． 関数の定義の中に出現した仮引数は，実引数の値に置き換えられる．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"hello(\"world\")\nhello(\"the Earth\")\nhello()\n# 例外: 実引数 2つ\nhello(\"world\", \"the Earth\")","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"関数 hello に対して，引数が 0個の場合の定義と， 引数が1個の場合の定義の２つが紐（ひも）ついている． 関数呼び出しにおける引数の数に応じて，対応する関数が実行される． 上の最後の例のように，対応する関数定義が見つからなければ，例外が発生する．","category":"page"},{"location":"ch12/#円を描く関数を作る","page":"第12回：関数の定義と呼び出し","title":"▶ 円を描く関数を作る","text":"","category":"section"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"PyPlot パッケージを読み込んだ状況で，円を描く関数を作成する．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"引数は，円の中心座標 cx, cy,円の半径 r ,線の色 col とする．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"function draw_circle(cx, cy, c, r)\n   t = 0:pi/18:2pi\n   xs = cx .+ r * cos.(t)\n   ys = cy .+ r * sin.(t)\n   plt.plot(xs, ys, color = c)\nend","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"５つの円を描いてみよう．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n\nr = 1\ns = 1.1\ndraw_circle(0, s, \"k\", r)\ndraw_circle(-s, 0, \"y\", r)\ndraw_circle(-2s, s, \"b\", r)\ndraw_circle(s, 0, \"g\", r)\ndraw_circle(2s, s, \"r\", r)\nplt.savefig(\"ch12-mark1-plot.svg\"); nothing; #hide\nnothing; # don't clos #hide","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"(Image: )","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"すべての軸を描画しないようにするには，上に続けて plt[:axis](\"off\") を実行すればよい．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"plt.axis(\"off\")\nplt.savefig(\"ch12-mark2-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"(Image: )","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"note: Note\nオリンピックのシンボルマークは，知的財産権が厳しく保護されていることに留意されたい．","category":"page"},{"location":"ch12/#仮引数の既定値","page":"第12回：関数の定義と呼び出し","title":"■ 仮引数の既定値","text":"","category":"section"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"仮引数に続けて =値 を書くことで，既定の値を設定できる． 関数呼び出しで，該当する引数を省略して関数を呼び出した場合には，既定の値が用いられる．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"関数 draw_circle で，最後の引数 r の既定値を 1 に設定した．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"function draw_circle(cx, cy, c, r = 1)\n   t = 0:pi/18:2pi\n   xs = cx .+ r * cos.(t)\n   ys = cy .+ r * sin.(t)\n   plt.plot(xs, ys, color = c)\nend","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"関数 draw_circle を３つの引数で呼び出した場合には，r=1 として呼び出したとみなされる．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"r = 1\ns = 1.1\ndraw_circle(  0, s, \"k\")\ndraw_circle( -s, 0, \"y\")\ndraw_circle(-2s, s, \"b\")\ndraw_circle(  s, 0, \"g\")\ndraw_circle( 2s, s, \"r\");","category":"page"},{"location":"ch12/#関数の戻り値","page":"第12回：関数の定義と呼び出し","title":"■ 関数の戻り値","text":"","category":"section"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"関数を実行した結果の値を，呼び出し側で使いたい場合は，しばしばある．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"関数定義において，最後に評価した値が，関数の戻り値（return-value）となる．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"■ 関数の定義（代入文形式） を用いても，数 x を 3 倍する関数を定義すると，以下のようになる．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"triple(x)=3*x","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"これをより一般の形式で書くと，以下のようになる．最後に評価した 3*x が関数の戻り値となる．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"function triple(x)\n   3 * x\nend","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"triple(-1)","category":"page"},{"location":"ch12/#return-キーワード","page":"第12回：関数の定義と呼び出し","title":"■ return キーワード","text":"","category":"section"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"キーワード return 式 は関数内で用いられると，直ちに関数から抜ける（戻る）ことを指示する． この際，式の結果が関数の戻り値となる．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"上の関数は，以下のようにも書ける（が，冗長である）．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"function triple(x)\n   return 3 * x\nend","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"また，数 x の絶対値を求める関数を自前で書いてみると，以下のようになる．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"function myabs(x)\n   if x < 0\n      return -x\n   else\n      return x\n   end\nend","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"myabs(-1)","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"note: Note\n上の myabs は ■ 3項演算子 を用いて，以下のように書いてもよい．myabs(x)= x<0 ? -x : x","category":"page"},{"location":"ch12/#局所変数","page":"第12回：関数の定義と呼び出し","title":"■ 局所変数","text":"","category":"section"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"関数内部で代入した変数（「局所変数，local variables」）は，その関数内部でのみ生きている．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"下の例で，関数 triple 内部で代入した t は，関数 triple のみで生きている． コマンドラインで定義した変数 t は，関数 triple の局所変数 t とは別物であり，関数呼び出し後も値は変わっていない． コマンドラインで定義した変数 t の型を，「全域変数（global variables）」ともいう．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"t = 4\n\nfunction triple(x)\n   t = 3\n   t * x\nend\n\ntriple(2)\n@show t;","category":"page"},{"location":"ch12/#ヘロンの公式を関数にする","page":"第12回：関数の定義と呼び出し","title":"▶ ヘロンの公式を関数にする","text":"","category":"section"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"ヘロンの公式（Heron's formula）によれば， 3辺の長さが a b c である三角形の面積は","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"beginaligned\nsqrts(s-a)(s-b)(s-c)\ns =dfraca+b+c2\nendaligned","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"で与えられる．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"ヘロンの公式を用いて，三角形の面積を返す関数を定義してみる．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"三辺 a b cから三角形を作ることができない場合には，平方根の中身が負になる． このときは，面積として 0 を返すことにする．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"function heron(a, b, c)\n   s = (a + b + c) / 2\n   r = s * (s - a) * (s - b) * (s - c)\n   if r < 0\n      return 0.0\n   end\n   sqrt(r)\nend","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"実行してみよう．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"heron(3, 4, 5)\n# 三角形ができない場合\nheron(3, 3, 7)","category":"page"},{"location":"ch12/#方形波のフーリエ級数和を関数にする","page":"第12回：関数の定義と呼び出し","title":"▼ 方形波のフーリエ級数和を関数にする","text":"","category":"section"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"方形波をフーリエ級数の和として計算する方法を，▼ 方形波：フーリエ級数の有限和 の節で，紹介した． 時刻の配列 ts における方形波を，奇数 n までのフーリエ級数和として計算する関数を書いてみる．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"function square(ts, n)\n   ys = zeros(size(ts))\n   for i = 1:2:n\n      ys += sin.(i * ts) / i * 4 / pi\n   end\n   ys\nend","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"実行してみよう．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"@show square((0:6) * pi / 4, 13);","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"級数和の上限 n を増やして，グラフを描こう．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"using PyPlot\nplt.figure() #hide\nts = -74*pi/36:pi/36:74*pi/36\nplt.plot(ts, sign.(sin.(ts)), label = \"square wave\")\n\nfor n in [5, 9, 13]\n   plt.plot(ts, square(ts, n), label = \"up to \" * string(n))\nend\nplt.legend(loc = \"center right\")\n\nplt.yticks([-1, 0, 1], [\"-1\", \"0\", \"1\"])\nplt.xticks([-2pi, -pi, 0, pi, 2pi], [L\"-2\\pi\", L\"-\\pi\", \"0\", L\"\\pi\", L\"2\\pi\"])\n\nplt.savefig(\"ch12-sqwave-plot1.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"(Image: )","category":"page"},{"location":"ch12/#練習：フーリエ級数の和","page":"第12回：関数の定義と呼び出し","title":"◀ 練習：フーリエ級数の和","text":"","category":"section"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"上の関数 square を以下のように改良せよ．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"n が偶数の場合でも，適切な解釈に基づき動作するようにせよ．\nn が 3 よりも小さい場合は n=13 とせよ．","category":"page"},{"location":"ch12/#Riemann和の計算を関数にする","page":"第12回：関数の定義と呼び出し","title":"▼ Riemann和の計算を関数にする","text":"","category":"section"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"関数の定積分の近似値を，短冊の面積の和として計算する方法を ▼ Riemann和（繰り返しで加算)の節で，紹介した． 関数 f ，定積分の範囲 a, b ，分割数 n を引数として，Rienmann和を計算する関数を書いてみる．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"function riemann_sum(f, a, b, n)\n   xs = range(a, b, length = n + 1)\n   d = (b - a) / n\n   s1 = 0\n   for i = 1:n\n      x = xs[i]\n      s1 += g(x) * d\n   end\n   s1\nend","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"実行してみよう．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"g(x) = 1 / (1 + x)\na = 0;\nb = 1;\n@show riemann_sum(g, a, b, 2^10);","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"分割数を増やす．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"for m = 8:13\n   @show m, riemann_sum(g, a, b, 2^m)\nend\n@show log(2);","category":"page"},{"location":"ch12/#練習：Riemann和の誤差評価","page":"第12回：関数の定義と呼び出し","title":"◀ 練習：Riemann和の誤差評価","text":"","category":"section"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"上の例で，相対誤差を描け．","category":"page"},{"location":"ch12/#練習：Riemann和","page":"第12回：関数の定義と呼び出し","title":"◀▼ 練習：Riemann和","text":"","category":"section"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"上の関数 riemann_sum を，以下のように改良せよ．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"n  1 の場合には，ただちに 0 を返すようにせよ．\nn  1 の場合には，n=4 として，計算せよ．\na  b の場合には，上限と下限を交換してから計算せよ．ヒント：変数 a b の値を交換するには，同時代入 b, a = a, b を用いよ．","category":"page"},{"location":"ch12/#モンテカルロ法による平面図形の面積の近似値を関数にする","page":"第12回：関数の定義と呼び出し","title":"▼ モンテカルロ法による平面図形の面積の近似値を関数にする","text":"","category":"section"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"平面内のある領域の面積の近似値をモンテカルロ法で求める方法を，▼ モンテカルロ法による平面図形の面積の推定 で紹介した．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"範囲を表す関数 f ,点の数 n を引数として，モンテカルロ法で面積の近似値を計算する関数を書いてみる． 関数 f は，平面座標 x,y を引数にして，(x,y) が図形の内部なら真 true を，内部でなければ偽 false を返すものとする． なお，図形の範囲は，x 座標，y 座標とも，0 から 1 までの範囲とする．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"function montecarlo(f, n)\n   s = 0\n   for i = 1:n\n      x = rand()\n      y = rand()\n      if f(x, y)\n         s += 1\n      end\n   end\n   s / n\nend","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"四分円に対して，実行してみよう．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"quadrant(x, y) = x * x + y * y < 1\nn = 2^8\n@show n, montecarlo(quadrant, n), pi / 4","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"点の数を増やしてみる．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"for m = 1:10\n   n = 2^m\n   @show n, montecarlo(quadrant, n)\nend","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"今度は，二つの不等式 y  x と y  1  x の両方に囲まれる領域の面積を推定しよう．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"tri1(x, y) = y < x && y < 1 - x\nn = 2^8\n@show n, montecarlo(tri1, n)","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"点の数を増やす．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"for m = 4:12\n   local n = 2^m\n   @show n, montecarlo(tri1, n)\nend\n@show 1 / 4","category":"page"},{"location":"ch12/#練習：モンテカルロ法による面積の近似値の誤差評価","page":"第12回：関数の定義と呼び出し","title":"◀ 練習：モンテカルロ法による面積の近似値の誤差評価","text":"","category":"section"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"上の２つの例で，相対誤差を描け．","category":"page"},{"location":"ch12/#練習：モンテカルロ法による面積の近似値","page":"第12回：関数の定義と呼び出し","title":"◀▼ 練習：モンテカルロ法による面積の近似値","text":"","category":"section"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"上の関数 montecarlo を，以下のように改良せよ．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"n le 1 の場合には，n=2^8 として，計算せよ．","category":"page"},{"location":"ch12/#関数から複数の値を返す","page":"第12回：関数の定義と呼び出し","title":"■ 関数から複数の値を返す","text":"","category":"section"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"■ タプル の小節で，関数 divrem のように，複数の値を返す関数があることを紹介した．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"Multiple Return Values (section)","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"ユーザ関数から複数の値を返すには，関数定義の最後に評価する式において，カンマ , で区切って復数の式を書けばよい． この関数の戻り値は，■ タプル となる．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"function one_two()\n   1, 2\nend\n\n@show one_two()","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"x, y = one_two()\n@show x, y","category":"page"},{"location":"ch12/#「はさみうち」法による，方程式の求解を関数にする","page":"第12回：関数の定義と呼び出し","title":"▼ 「はさみうち」法による，方程式の求解を関数にする","text":"","category":"section"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"「はさみうち」法を用いて，方程式の解の存在範囲を狭めていく方法を，▼ 「はさみうち」法による，方程式の求解 で紹介した．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"求めるべき方程式 f ,解の存在範囲の下限 a ,および 上限 b を引数として，より狭い解の存在範囲の下限と上限を返す関数を書いてみる．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"function bisect(f, a, b)\n   c = (a + b) / 2\n   if f(a) * f(c) > 0\n      a = c\n   else\n      b = c\n   end\n   a, b\nend","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"g(x) = x^3 + 3x^2 - 4 * x - 12\na = -3.2;\nb = -2.6;\n\nfor i = 1:10\n   global a, b\n   @show a, b, b - a, g(a), g(b)\n   a, b = bisect(g, a, b)\nend","category":"page"},{"location":"ch12/#練習：「はさみうち」法","page":"第12回：関数の定義と呼び出し","title":"◀ 練習：「はさみうち」法","text":"","category":"section"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"上の例で，解の存在範囲が狭くなる様子を描け．\n異なる解の存在範囲に対して，「はさみうち」法を実行せよ．","category":"page"},{"location":"ch12/#引数の型の指定","page":"第12回：関数の定義と呼び出し","title":"■ 引数の型の指定","text":"","category":"section"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"関数定義の仮引数には ::型 という形式で，仮引数の型を指定できる． 関数呼出しの際，実引数の型と仮引数の型が一致する関数が呼び出される． この仕組を，多重ディスパッチ（multiple dispatch）という．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"型が指定されていない仮引数は，Any 型とみなされ，あらゆる実引数の型と一致する．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"個別の仮引数に対応する関数は，メソッドと呼ばれる．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"例で説明する．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"関数 mytest を，Int64 型の引数に対してだけ定義しよう．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"function mytest(x::Int64)\n   println(string(x) * \" is of Int64 type\")\nend","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"この段階で，mytest(1) は上の関数が呼び出されるが，mytest(1.0) は呼び出されるべき関数が見つからず，例外が発生する．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"# 関数が呼び出される\nmytest(1)\n# 関数が呼び出されない\nmytest(1.0)","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"関数 mytest を，Float64 型の引数に対しても定義する．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"function mytest(x::Float64)\n   println(string(x) * \" is of Float64 type\")\nend\n\n# 今度は，上の関数が呼び出される\nmytest(1.0)","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"しかし，mytest(\"a\") や mytest(\"[1]\") は呼び出されるべき関数が見つからず，例外が発生する．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"# 関数が呼び出されない\nmytest(\"a\")\n# 関数が呼び出されない\nmytest([1])","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"更に，仮引数に型を指定しない関数を定義すれば，そちらが呼び出される．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"function mytest(x)\n   println(string(x) * \" is neither of Int64 type nor of Float64 type\")\nend\n\n# 今度は，上の関数が呼び出される\nmytest(\"a\")\n# 今度は，上の関数が呼び出される\nmytest([1])","category":"page"},{"location":"ch12/#階乗関数を定義する","page":"第12回：関数の定義と呼び出し","title":"▶ 階乗関数を定義する","text":"","category":"section"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"1 から整数 n までの連続する整数の積を，「階乗（factorial）」といい，n のように書く．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"6  = 6 times 5 times 4 times 3 times 2 times 1 = 720","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"さらに，0 = 1 と定義する．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"階乗を計算する関数を定義しよう． 階乗関数は整数に対してのみ定義されるから，引数を整数型に限定しよう．0 よりも小さい整数に対して，階乗は定義されないが，1 を返すことにする．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"function myfact1(n::Int64)\n   n <= 1 && return 1\n   r = 1\n   for i = 2:n\n      r *= i\n   end\n   r\nend","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"正しく計算されることを確かめてみる．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"for n = 6:-1:-1\n   @show n, myfact1(n)\nend","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"浮動小数点数や整数ベクトルに対して，関数 myfact1 は未定義である．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"# 関数は未定義\nmyfact1(2.2)\n# 関数は未定義\nmyfact1([6, 3])","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"整数を要素とするベクトルに対して dot記法を用いて myfact1 を呼び出せば， 各要素に対して関数 myfact1 を呼び出した値のベクトルが得られる．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"myfact1.([6, 5, 4])","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"note: Note\nJulia には，階乗関数 factorial(n) が組み込まれている．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"factorial(1)\nfactorial(2)\nfactorial(3)","category":"page"},{"location":"ch12/#再帰","page":"第12回：関数の定義と呼び出し","title":"▶ 再帰","text":"","category":"section"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"階乗には n = n times (n-1) という性質がある． すなわち，n は (n-1) を用いて定義される．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"これをプログラムで書く場合には，関数定義の中で自分自身を呼ぶ，これを再帰（recursion）という．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"再帰を用いて，階乗を定義してみよう．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"function myfact2(n::Int64)\n   n <= 1 && return 1\n   n * myfact2(n - 1)\nend","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"正しく計算されることを確かめてみる．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"for n = 6:-1:-1\n   @show n, myfact2(n)\nend","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"再帰呼出しを用いる場合には，計算が正しく終了する条件を設定する必要がある．","category":"page"},{"location":"ch12/#練習：再帰：フィボナッチ数","page":"第12回：関数の定義と呼び出し","title":"◀ 練習：再帰：フィボナッチ数","text":"","category":"section"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"フィボナッチ（Fibonacci）数とは，以下の漸化式で定義される数列である．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"beginaligned\nF_0  = 0\nF_1  = 1\nF_n+2 = F_n+1+F_n\nendaligned","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"整数 nに対してフィボナッチ数を計算する関数を再帰を用いて定義し，その動作を確かめよ．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"フィボナッチ数の最初の 20 個は，以下の通りである．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"0 1 1 2 3 5 8 13 21 34 55 89 144 233 377 610 987 1597 2584 4181 6765 10946","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"また，フィボナッチ数の一般項は，以下の式で与えられることが知られている．合わせて，計算してみよ．","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"F_n = dfrac1sqrt5 left left(dfrac1+sqrt52right)^n - left(dfrac1-sqrt52right)^n right","category":"page"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"note: Note\n上で示した階乗やフィボナッチ数の例では，関数が呼ばれる毎に計算を行っており「もったいない」． 計算結果が一意（一通り，unique）であるなら，計算した結果を記録しておき，同じ引数で再び呼び出されたときには， 記録から取り出してくれば計算資源が節約できる．このような考え方を「メモ化」という．この本文で説明した範囲でも， ベクトルなどを用いて「メモ化」を実装できるであろう．","category":"page"},{"location":"ch12/#今回のまとめ","page":"第12回：関数の定義と呼び出し","title":"■ 今回のまとめ","text":"","category":"section"},{"location":"ch12/","page":"第12回：関数の定義と呼び出し","title":"第12回：関数の定義と呼び出し","text":"関数\n定義\n呼出し\n戻り値\n仮引数の型\n再帰呼出し\n例題\nヘロンの公式\nフーリエ級数和の関数化\nモンテカルロ法の関数化\nはさみうち法の関数化\n階乗\nフィボナッチ数","category":"page"},{"location":"ch06/#ch06","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"","category":"section"},{"location":"ch06/#型","page":"第6回：■ 整数","title":"■ 型","text":"","category":"section"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"型（type）：データの種類のこと","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"整数型 Int64\n浮動小数点型 Float64","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"typeof(1)\ntypeof(1.0)","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"論理型 Bool","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"typeof(true)\ntypeof(false)","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"Primitive Types 基本型\nComposite Types 複合型，構成型","category":"page"},{"location":"ch06/#整数","page":"第6回：■ 整数","title":"■ 整数","text":"","category":"section"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"Integers (section)","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"既定の整数型は，Int64 であり， 64 桁（64bit, binary digit）の2進数である．","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"負の数 -n を 2^64-n で表す「2の補数」方式を用いて， 正負の数を表す「符号付整数」である．","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"Int64 で表される最大の数は 2^63-1 である． また，最小の数（絶対値が最大な負の数)は -2^63 である． これらの値は， 関数 typemax(Int64),typemin(Int64) で，それぞれ求められる．","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"2^63 - 1\ntypemax(Int64)\ntypemin(Int64)","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"note: Note\n2の補数を求める方法が知られていれば， 減算は，引く数の「2の補数」を求め，加算すればよい． 実は，2の補数は簡単に求められる．2の補数では，2進数の最上位の桁が，符号に相当する． すなわち，負の数では， 最上位の桁（Most-Significant Bit, MSB）は 1 , 正の数または 0 では，MSBは 0 になる．","category":"page"},{"location":"ch06/#整数どうしの加減乗算","page":"第6回：■ 整数","title":"■ 整数どうしの加減乗算","text":"","category":"section"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"整数どうしの加減算は，2の補数として行われる． typemin(Int64) から typemin(Int64) までの範囲を超えても，例外は発生しない．","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"Overflow behavior (section)","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"typemax(Int64) + 1\ntypemax(Int64) + 2\ntypemin(Int64) - 1\ntypemin(Int64) - 2\ntypemax(Int64) + typemax(Int64)\ntypemax(Int64) * 2\ntypemax(Int64) * 4","category":"page"},{"location":"ch06/#整数の2進数による表現．","page":"第6回：■ 整数","title":"●▼ 整数の2進数による表現．","text":"","category":"section"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"Base.bitstring — Function","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"関数 bitstring(x) は，数 x の2進数表現を文字列として返す．","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"bitstring(0)\nbitstring(1)\nbitstring(2)\nbitstring(-1)\nbitstring(-2)\nbitstring(typemax(Int64))\nbitstring(typemin(Int64))","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"上の例で，以下の理由を説明できただろうか？","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"typemax(Int64)+1 == typemin(Int64)","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"typemax(Int64)+typemax(Int64) == -2","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"typemax(Int64)*2 == -2","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"2進数に 2 を乗じることは，左に一つ分ずらすこと（左シフト 1bit）と同じである．","category":"page"},{"location":"ch06/#整数どうしの除算","page":"第6回：■ 整数","title":"■ 整数どうしの除算","text":"","category":"section"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"整数どうしの割り算（除算）の結果（商 quotient）は，小数（浮動小数点数）になる．","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"1 / 2","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"余り（剰余）を求めたい場合は，■ 残余 rem と整商 div を参照せよ．","category":"page"},{"location":"ch06/#整数と浮動小数点数との四則演算","page":"第6回：■ 整数","title":"■ 整数と浮動小数点数との四則演算","text":"","category":"section"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"整数と小数を四則演算すると，小数になる．","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"1 + 2\n1 + 2.0\n1 * 2\n1 * 2.0","category":"page"},{"location":"ch06/#浮動小数点数から整数への変換","page":"第6回：■ 整数","title":"■ 浮動小数点数から整数への変換","text":"","category":"section"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"浮動小数点数を整数に変換するには，Int64(x) を用いる． ただし，x が小数部を含むと例外がでる（エラーとなる）ので， 小数部を 0 に変換する必要がある．","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"この際，床関数が用いられる． 参考→ ■ 床関数・天井関数","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"Int64(1.0)\nInt64(1.1)  # エラー\nInt64(floor(1.1))","category":"page"},{"location":"ch06/#残余-rem-と整商-div","page":"第6回：■ 整数","title":"■ 残余 rem と整商 div","text":"","category":"section"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"正の整数 x  0 を，正の整数 d  0 で割った結果， 整数の商 q と余り r が得られたとき，","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"x=qd+r","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"が成り立つ．","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"割られる数 x を「被除数（dividend）」，割る数 d を「除数（divisor）」という．","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"整数の商 q を，「整商（integral quotient）」， 余り r を「残余（remainder）」という． 残余は，d を超えない，すなわち，","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"0 le r lt d","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"である．","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"Base.rem - Function\nBase.div - Function","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"関数 rem(x,d) は，x を d で割ったときの残余を返す． 関数 rem の代わりに，% 演算子を用いて x % d と書いてもよい．","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"rem(15, 4)\n15 % 4","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"関数 div(x,d) は，x を d で割ったときの整商を返す．","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"div(15, 4)","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"整数 0 から 7 までを，3 で割った整商と残余（ div と rem の計算結果）を描く．","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n\nxs = 0:7\nd = 3\nplt.plot(xs, rem.(xs, d), \"ro\", label = \"rem(x,\" * string(d) * \")\")\nplt.plot(xs, div.(xs, d), \"b.\", label = \"div(x,\" * string(d) * \")\")\n\nplt.xlim(-0.2, 6.2)\nplt.ylim(-0.2, 3.2)\nplt.xlabel(\"x\")\nplt.legend()\n\nfor x = 0:7\n   plt.axvline(x, color = \"k\", lw = 0.5)\nend\n\nfor y = 0:3\n   plt.axhline(y, color = \"k\", lw = 0.5)\nend\n\n\nplt.savefig(\"ch06-divrem1-int-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"(Image: )","category":"page"},{"location":"ch06/#練習：硬貨への分割","page":"第6回：■ 整数","title":"▲ 練習：硬貨への分割","text":"","category":"section"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"日本では，小額の取引に，","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"500円\n100円\n50円\n10円\n5円\n1円","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"の6種類の硬貨がよく用いられる．","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"金額が与えられたときに，6種類の硬貨が各々何枚必要か計算せよ． ただし，高額の硬貨を優先して用いるものとする．","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"第一段階として，100円，10円，1円に分けるプログラムを書いて実行せよ．\n第二段階として，上の 6種類の硬貨に分けるプログラムを書いて実行せよ．同様な処理は，繰り返し（ for 文）を用いてみよ．\n第三段階として，1円刻みで551円までの金額に対して，6種類の硬貨の枚数を描くプログラムを書いて実行せよ．","category":"page"},{"location":"ch06/#ユークリッドの互除法","page":"第6回：■ 整数","title":"▼ ユークリッドの互除法","text":"","category":"section"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"2 つの自然数 a, b（ただし，a ge b とする）について， a の b による残余を r とすると， a と b との最大公約数（greatest common divisor, gcd）は b と r との最大公約数に等しいという性質が成り立つ． この性質を利用して，b を r で割った残余を求め， 除数 r をその剰余で割った残余を求め， という計算を逐次繰り返し， 残余が 0 になった時の除数が a と b との最大公約数となる．","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"以下のプログラムで，変数 t は b の値を一時保存するための役目をする． このような変数を，「一時変数（temporary variable）」と呼ぶ．","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"a = 1071\nb = 1029\n@show a, b\nwhile b != 0\n   global a, b\n   t = b\n   b = rem(a, b)\n   a = t\n   @show a, b\nend\nprintln(\"gcd=\" * string(a))\n# 公約数の確認\n@show rem(1071, a);\n@show rem(1029, a);","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"3355と2379の最大公約数を求めてみよう．","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"a = 3355\nb = 2379\n@show a, b\nwhile b != 0\n   global a, b\n   t = b\n   b = rem(a, b)\n   a = t\n   @show a, b\nend\nprintln(\"gcd=\" * string(a))\n# 公約数の確認\n@show rem(3355, a);\n@show rem(2379, a);","category":"page"},{"location":"ch06/#一般の残余-rem-と整商-div","page":"第6回：■ 整数","title":"■ 一般の残余 rem と整商 div","text":"","category":"section"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"正の整数 x  0 を 正の整数 d  0 で割ったときの 「商」 q と「余り」 r の関係","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"x = qd + r","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"は， 被除数 x や除数 d が，小数や負の数の場合に拡張できる． ここで，「商」q は整数であり， 「余り」r の絶対値は，除数 d の絶対値を超えないものとする．","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"0 le leftvertrrightvert lt leftvertdrightvert","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"さて，被除数 x や除数 d が負の数の場合， 「商」q と「余り」 r の取るべき値について，いくつかの考え方がある．","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"残余 rem(x,d) とは，「被除数 x と同じ符号の余り」である． すなわち，被除数 x が負なら，残余 r は","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"-d lt r le 0","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"の範囲になる． 対応する「商」は 整商 div(x,d) で求められる．","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"以下では，-6 から 6 までの数（被除数）を，3 （正の除数）で割ったときの 残余と整商を描く． 被除数が負のとき，3 lt r le 0 となることを観察せよ．","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n\nxs = -6.8:0.2:6.8\nd = 3\nplt.plot(xs, rem.(xs, d), \"ro\", label = \"rem(x,\" * string(d) * \")\")\nplt.plot(xs, div.(xs, d), \"b.\", label = \"div(x,\" * string(d) * \")\")\n\nplt.xlim(-6.2, 6.2)\nplt.ylim(-3.2, 3.2)\nplt.xlabel(\"x\")\nplt.legend()\n\nfor x = -7:7\n   plt.axvline(x, color = \"k\", lw = 0.5)\nend\n\nfor y = -3:3\n   plt.axhline(y, color = \"k\", lw = 0.5)\nend\n\nplt.savefig(\"ch06-divrem2-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"(Image: )","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"今度は，被除数の範囲は変えずに，-3（負の除数）で割ったときの残余と整商を描く．","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n\nxs = -6.8:0.2:6.8\nd = -3\nplt.plot(xs, rem.(xs, d), \"ro\", label = \"rem(x,\" * string(d) * \")\")\nplt.plot(xs, div.(xs, d), \"b.\", label = \"div(x,\" * string(d) * \")\")\nplt.xlim(-6.2, 6.2)\nplt.ylim(-3.2, 3.2)\n\nplt.xlabel(\"x\")\nplt.legend()\n\nfor x = -7:7\n   plt.axvline(x, color = \"k\", lw = 0.5)\nend\n\nfor y = -3:3\n   plt.axhline(y, color = \"k\", lw = 0.5)\nend\n\nplt.savefig(\"ch06-divrem3-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"(Image: )","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"上の二つのグラフを比較すると， 残余 rem(x,3) と rem(x,-3) が一致することが観察される．また， 整商 div(x,3) と div(x,-3) は，互いに符号が逆である．","category":"page"},{"location":"ch06/#練習：切り捨て","page":"第6回：■ 整数","title":"▲ 練習：切り捨て","text":"","category":"section"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"正の数 x を","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"01 の位（小数第1位）で（すなわち，小数点以下を切り捨て）\n001 の位（小数第2位）で\n1 の位で\n10 の位で\n一般に 10^n の位で","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"切り捨てるプログラムを書け．","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"作成したプログラムの動作を確かめるための数を選び，実行結果を示せ． さらに，切り捨てる前後の数の関係を分かりやすくプロットしてみよ．","category":"page"},{"location":"ch06/#練習：四捨五入","page":"第6回：■ 整数","title":"▲ 練習：四捨五入","text":"","category":"section"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"正の数 x を","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"01 の位（小数第1位）で（すなわち，小数点以下を四捨五入）\n001 の位（小数第2位）で\n1 の位で\n10 の位で\n一般に 10^n の位で","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"四捨五入するプログラムを書け．","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"作成したプログラムの動作を確かめるための数を選び，実行結果を示せ． さらに，四捨五入する前後の数の関係を分かりやすくプロットしてみよ．","category":"page"},{"location":"ch06/#剰余-mod-と，商の床-fld","page":"第6回：■ 整数","title":"■ 剰余 mod と，商の床 fld","text":"","category":"section"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"Base.mod - Function\nBase.fld - Function","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"「商」 q と「余り」 r の一般の関係","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"begingathered\nx=qd+r \n0 le leftvertrrightvert lt leftvertdrightvert\nendgathered","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"について，別の考え方を示す．","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"剰余（modulo）は， 「除数 d と同じ符号の余り」r である． 剰余関数 mod(x,d) は，この「余り」rを返す． 対応する「商」q は，関数 fld(x,d) で求められる．","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"被除数が非負 x ge 0，かつ，除数が正 d gt 0 なら，残余 rem と剰余 mod は一致する．\n被除数が負 x  0 の場合も，剰余は非負である．","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"note: Note\n被除数と除数の両方とも正なら，残余 rem と剰余 mod は一致する．この場合，残余 rem の方が，少し計算コストが小さく，好まれる．","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"では，-6 から 6 までの数（被除数）を，3（正の除数）で割ったときの剰余と「商」を描こう．","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n\nxs = -6.8:0.2:6.8\nd = 3\nplt.plot(xs, mod.(xs, d), \"ro\", label = \"mod(x,\" * string(d) * \")\")\nplt.plot(xs, fld.(xs, d), \"b.\", label = \"fld(x,\" * string(d) * \")\")\n\nplt.xlim(-6.2, 6.2)\nplt.ylim(-3.2, 3.2)\nplt.xlabel(\"x\")\nplt.legend()\n\nfor x = -7:7\n   plt.axvline(x, color = \"k\", lw = 0.5)\nend\n\nfor y = -3:3\n   plt.axhline(y, color = \"k\", lw = 0.5)\nend\n\nplt.savefig(\"ch06-fldmod1-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"(Image: )","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"実は，関数 fld(x,d) は，floor(x/d) と同じ値であり，「商の床」 floored division ともいう． すなわち，dfracxd 以下の最大の整数である． 参照： ■ 床関数・天井関数","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"上の例で，「商の床」を描く． 関数 fld と同じ結果が得られることが観測できる．","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n\nxs = -6.8:0.2:6.8\nd = 3\nqs = floor.(xs / d)\nrs = xs - qs * d\nplt.plot(xs, rs, \"ro\", label = \"remainder divided by \" * string(d))\nplt.plot(xs, qs, \"b.\", label = \"quotient divided by \" * string(d))\n\nplt.xlim(-6.2, 6.2)\nplt.ylim(-3.2, 3.2)\nplt.xlabel(\"x\")\nplt.legend()\n\nfor y = -3:3\n   plt.axvline(y, color = \"k\", lw = 0.5)\nend\n\nfor x = -7:7\n   plt.axhline(x, color = \"k\", lw = 0.5)\nend\n\nplt.savefig(\"ch06-fldmod2-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"(Image: )","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"今度は，被除数の範囲は変えずに，-3 （負の除数）で割ったときの剰余と「商」を描こう．","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n\nxs = -6.8:0.2:6.8\nd = -3\nplt.plot(xs, mod.(xs, d), \"ro\", label = \"mod(x,\" * string(d) * \")\")\nplt.plot(xs, fld.(xs, d), \"b.\", label = \"fld(x,\" * string(d) * \")\")\nplt.xlim(-6.2, 6.2)\nplt.ylim(-3.2, 3.2)\nplt.xlabel(\"x\")\nplt.legend()\n\nfor x = -7:7\n   plt.axvline(x, color = \"k\", lw = 0.5)\nend\n\nfor y = -3:3\n   plt.axhline(y, color = \"k\", lw = 0.5)\nend\n\nplt.savefig(\"ch06-fldmod3-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"(Image: )","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"負の数 -3 で割ったとき，剰余 r の範囲は -3 lt r le 0 であることが観察できる．","category":"page"},{"location":"ch06/#練習：「商の床」","page":"第6回：■ 整数","title":"◀ 練習：「商の床」","text":"","category":"section"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"上の例で，「商の床」 floor( x/-3 ) を描け． 関数 fld(x,-3) と結果が等しいことを確認せよ．","category":"page"},{"location":"ch06/#2piで割った剰余","page":"第6回：■ 整数","title":"▶ 2piで割った剰余","text":"","category":"section"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"Base.Math.mod2pi — Function","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"関数 mod2pi(x) は，mod(x,2*pi) と同じである． すなわち，x を 2pi で割った剰余を返す．","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n\nis = -24:24\nxs = is / 3\nplt.plot(xs, mod2pi.(xs), \".\")\nplt.xlabel(\"x\")\nplt.ylabel(\"mod2pi(x)\")\nplt.axhline(0, color = \"k\", lw = 0.5)\nplt.axhline(2 * pi, color = \"k\", lw = 0.5)\n\nplt.savefig(\"ch06-mod2pi-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"(Image: )","category":"page"},{"location":"ch06/#整数-0による除算","page":"第6回：■ 整数","title":"■ 整数 0による除算","text":"","category":"section"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"除数が　0 であっても，「余り」を計算しない除算では， 例外は発生しない．→ ■ 0による除算","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"しかし，「余り」を計算する rem , mod , div , mod などにおいて， 除数が 0 であると例外（exception）を発生する． 例外が発生すると，プログラムの実行は，そこで中断する．","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"除算例外 Division errors (section)","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"div(3, 0)\nrem(3, 0)","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"note: Note\n例外が発生した場合，それを救済する手続きを書いて，プログラムを続行することもできる．だが，この文書の範囲を超えるので，説明しない． → Exception Handling","category":"page"},{"location":"ch06/#床関数・天井関数の型を整数型にする","page":"第6回：■ 整数","title":"▶ 床関数・天井関数の型を整数型にする","text":"","category":"section"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"■ 床関数・天井関数 floor(x) および ceil の結果の型は， 引数（ひきすう） x の型に一致する．","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"floor(2) # => 整数\nfloor(0.2) # => 小数（浮動小数点数)\n\nceil(2) # => 整数\nceil(0.2) # => 小数（浮動小数点数)","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"結果の型を整数にするには，引数 x の前に，型の名前 Int64 をつける．","category":"page"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"floor(Int64, 2)\nfloor(Int64, 0.2)\n\nceil(Int64, 2)\nceil(Int64, 0.2)","category":"page"},{"location":"ch06/#今回のまとめ","page":"第6回：■ 整数","title":"★ 今回のまとめ","text":"","category":"section"},{"location":"ch06/","page":"第6回：■ 整数","title":"第6回：■ 整数","text":"型\n整数\n整数どうしの加減乗算\n整数どうしの除算\n整数と浮動小数点数との四則演算\n浮動小数点数から整数への変換\n残余 rem と整商 div\nユークリッドの互除法\n切り捨て，四捨五入（練習）\n剰余 mod と商の床 fld\n整数 0 による除算：例外","category":"page"},{"location":"ch07/#ch07","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"","category":"section"},{"location":"ch07/#浮動小数点数","page":"第7回：■ 浮動小数点数","title":"■ 浮動小数点数","text":"","category":"section"},{"location":"ch07/#正規化数，副正規化数","page":"第7回：■ 浮動小数点数","title":"● 正規化数，副正規化数","text":"","category":"section"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"浮動小数点数（floating-point number）とは，012 の代わりに 12 times 10^-1 のように表示する数である．","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"10進数の浮動小数点数は","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"pmleft(d_0d_1d_2cdots right)_10times 10^e","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"のように表される．times の前まで の left(d_0d_1d_2cdots right)_10 の部分を仮数部（mantissa part，significand）と呼ぶ． 添字の 10 は 10進数を意味し，d_0 d_1 cdots は 0 1 ldots 9 までの数字である．times の後ろの 10^e を指数部（exponent part）と呼ぶ．","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"2進数の浮動小数点数は","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"pmleft(b_0b_1b_2cdots right)_2times 2^e","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"のように表される． ここで，times の前までの left(b_0b_1b_2cdots right)_2 の部分を仮数部と呼ぶ． 添字の 2 は2進数を意味し，b_0 b_1 cdots は 0 または 1 の数字である．times の後ろの 2^e を指数部と呼ぶ．","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"「bit（binary digit，ビット）」とは，2進数の一桁のことである．","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"本文で用いる浮動小数点数は Float64 型である．","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"typeof(1.0)","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"note: Note\n以下で，浮動小数点数の2進数による表現を詳しく説明するが， 丸暗記する内容ではない．しかし，計算機内部の小数が 「有限桁」で行われることは，計算機による数値計算では常に意識すべきである．","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"Float64 型は，「IEEE754標準倍精度浮動小数点数」に基づき，","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"符号部 1 bit,\n指数部 11 bit\n仮数部 53 bit ","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"から構成される． ただし，以下のように先頭の 1 bitを固定し， 仮数部の 52 bit のみをデータとして採用するため， 2進数の並びは 1+11+52 = 64 bit である．","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"Float64 型の数値は，正規化数，副正規化数，数でない数の３種類からなりたっている．","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"・正規化数は，b_0 = 1 として，","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"pmleft(1b_1b_2cdots b_52right)_2times 2^e","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"のように表される数である． ここで，指数は 1022 le e le 1023 の範囲である． 仮数 left(1b_1b_2cdots b_52right)_2 は 1 以上で 2 を超えない範囲の小数となる．","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"・正規化数で表すことができない，絶対値が小さい浮動小数点数は副正規化数で表わされる．","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"副正規化数は，b_0 = 0, e=1023 として，","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"pmleft(0b_1b_2cdots b_52right)_2times 2^e","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"のように表される数である． 仮数部 left(1b_1b_2cdots b_52right)_2 は 0 以上で 1 を超えない範囲の小数となる．","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"・「数でない数」は，■ 0による除算で，すでに説明した． Inf, -Inf, NaN の３つである．","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"Float64 で表すことができる，絶対値がもっとも大きい数は， 正規化数の 2^10241798times10^308 である． 絶対値がもっとも小さい数は， 副正規化数の 2^10222225times10^308 である．","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"これらは，関数 floatmax , floatmin でそれぞれ得られる．","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"floatmax(Float64)\nfloatmin(Float64)","category":"page"},{"location":"ch07/#丸め","page":"第7回：■ 浮動小数点数","title":"丸め","text":"","category":"section"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"10進数の小数 02 は","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"02 = dfrac15 = dfrac1101_2","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"となるが，1 を 101_2 で割り切ることはできない．02 を2進数で表すと","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"000110011001100cdots_2","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"のようになる．すなわち，1100 の並びが無限に続く循環小数となる．","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"また，10進数の小数 01 は","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"01 = dfrac15times 2 = dfrac1101_2 times 2^-1","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"であるから，01 を2進数で表すと（上を2進数で1桁ずらして）","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"0000110011001100cdots_2","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"のようになる．これも，1100 の並びが無限に続く循環小数となる．","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"「有限桁の小数」で表すことができない「循環小数」を， Float64 型で表現するとき， その仮数の末尾に近い桁を修正する操作を行う場合がある． この操作を「丸める」（rounding）という．","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"「丸め」られた浮動小数の計算は，筆算とは違う結果となる場合がある． 例えば，","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"0.1+0.2\n0.1+0.2 == 0.3","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"筆算の結果は 03であるが， 計算結果は 0.30000000000000004 と異なってしまう．","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"別の例として，01 を 10回足した結果は","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"s = 0\nfor i = 1:10\n   global s\n   s += 0.1\nend\n@show s\ns == 1.0","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"0.9999999999999999 となり，10 にはならない．","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"このような，「丸め」を原因とする， 正しい値からの「ずれ」を「丸め誤差」と呼んでいる．","category":"page"},{"location":"ch07/#小数を2進数へ変換する","page":"第7回：■ 浮動小数点数","title":"▼ 小数を2進数へ変換する","text":"","category":"section"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"（正の）小数を2進数に変換するには， 小数を 2 倍しその整数部分を取り出す操作を，繰り返し行えばよい．","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"0  x = f_1 2^-1 + f_2 2^-2 + cdots  1","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"小数 02 を，2進数で表示すると循環小数になる． 1100 のパターンが繰り返し現れる．","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"x = 0.2\nfor i = 1:50\n   global x\n   q = floor(Int64, x / 2)\n   print(q)\n   x -= q * 2\n   x *= 2\nend","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"00000110011001100110011001100110011001100110011001\n\n1100 循環小数","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"上の結果の最初の桁は，2^1 の桁に相当する． すなわち，小数点は，２つ目の数字の後ろに位置する．","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"note: Note\nfloor(Int64, ...) の部分は，床関数の結果を整数型にする． ▶ 床関数・天井関数の型を整数型にする を参照","category":"page"},{"location":"ch07/#練習：有限小数・循環小数","page":"第7回：■ 浮動小数点数","title":"▲ 練習：有限小数・循環小数","text":"","category":"section"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"05 以下の正の小数をいくつかを選び， これらを2進数に直してみよ．有限小数か循環小数かを判定せよ．","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"例: 0.1, 0.2, 0.25, 0.3, 0.5","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"さらに，5つ程度の例を加えよ．","category":"page"},{"location":"ch07/#加減算における桁落ちと情報落ち","page":"第7回：■ 浮動小数点数","title":"■ 加減算における桁落ちと情報落ち","text":"","category":"section"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"加算と減算は，小数点の位置を合わせて計算されるが， 桁数が有限であることから，正しい値が得られない場合がある． その原因のうち「桁落ち」と「情報落ち」の二つの現象が知られている．","category":"page"},{"location":"ch07/#桁落ち","page":"第7回：■ 浮動小数点数","title":"■ 桁落ち","text":"","category":"section"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"「桁落ち」は，互いに非常に近い二つの数 x y に対して， 減算 x-y を行うと，結果の有効桁数が大きく減少する現象である．","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"例えば，有効桁数が 4桁の二つの数の引き算の例を見よう．","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"2.345 - 1.233\n1.234 - 1.232","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"前者の結果は 4 桁の有効桁数を保っているのに対して， 後者の結果は 1 桁の有効桁数になってしまう．（末尾の 18 は丸め誤差である)．","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"式を変形して， 互いに近い数どうしを引くことを回避できる場合がある． 下の例を参考にせよ． → ▼ 2次方程式","category":"page"},{"location":"ch07/#情報落ち","page":"第7回：■ 浮動小数点数","title":"■ 情報落ち","text":"","category":"section"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"「情報落ち」は，絶対値が大きく異なる数を加減算すると，小さい桁の精度が失われる現象である．","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"例えば，3つの数 x = 14times 10^-17, y = 24times 10^-16, z = 1 を， この順番で加えた結果と，逆の順番で加えた結果を比較しよう．","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"x = 14e-17\ny = 24e-16\nz = 1\nxyz = (x + y) + z\nzyx = (z + y) + x","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"筆算による正しい値は 1.00000000000000253 であるが， 後者の和よりも前者の和が，正しい値に近い．","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"後者の和が誤差を大きく含んだのは，和 z+y の段階で，有効桁数をほぼ使い切ったからである．","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"zy = z + y\nnextfloat(zy) # z+y の「隣りの」正しく表される数","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"一般に，大きさの異なる数どうしを加減算する場合には， 絶対値が小さいものから計算を進めたほうがよい．","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"ここで見たように，有限桁数の浮動小数点数の加減算は「結合則」を満たさない．","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"(x+y)+z neq x+(y+x)","category":"page"},{"location":"ch07/#等差数列","page":"第7回：■ 浮動小数点数","title":"■ 等差数列","text":"","category":"section"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"Base.range — Function","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"等差数列を作る方法として，■ 範囲を，先に紹介した．","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"関数 range(a,b,length=n) は，等差数列を作る別の方法である． この関数は，初項 a から始めて b で終わる等差数列を作る． 要素の数は n 個であり，等差（要素どうしの間隔）は，自動的に計算される． 結果は ■ 範囲 になる（場合が多い）．","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"range(0, 10, length = 11)","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"length=10 の形の引数は，キーワード引数と呼ばれる．","category":"page"},{"location":"ch07/#等比級数","page":"第7回：■ 浮動小数点数","title":"■ 等比級数","text":"","category":"section"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"等比級数は，一定の数（等比 common multiplier）を順番に乗じて得られる数列である． 等比級数は，指数関数を，ベクトルや範囲と組合わせて作ることができる．","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"以下は，初項 10^0=1 から始めて，10^3=1000 で終わる等比級数 (要素は 4 個 ) を作る．すなわち，1 10 100 1000 を作る．","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"# 整数\n10 .^ (0:3)\n# 小数\nexp10.(0:3)","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"以下は，1 から始まり 1000 で終わる，要素 10 個の等比級数を作る．","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"exp10.(range(0, 3, length = 10))","category":"page"},{"location":"ch07/#数値微分","page":"第7回：■ 浮動小数点数","title":"▼ 数値微分","text":"","category":"section"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"dfracdf(x_0)dx = lim_h longrightarrow 0dfracf(x_0+h)-f(x_0)h","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"関数 y=x^2 の x=1 における微分係数を， 上の定義により求めよう． 求まるべき値は 2 であるが，h を小さくすると 2 の上下に暴れてしまう．","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"using PyPlot\nplt.figure() #hide\n# h=logspace(-18,-8,100)\nh = exp10.(range(-18, -8, length = 100))\nd = ((1.0 .+ h) .^ 2 .- 1.0) ./ h\nplt.plot(h, d, \".\")\nplt.ylim(5e-1, 3e0)\nplt.yscale(\"log\")\nplt.xscale(\"log\")\nplt.savefig(\"ch07-df1-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"(Image: )","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"今度は，関数 y=x^n（ただしn = 1 2 3 ） の x=1 における微分係数を， 上の定義により求めよう． 求まるべき値は n であるが，h を小さくすると n の上下に暴れてしまう．","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"using PyPlot\nplt.figure() #hide\n# h=logspace(-18,-8,100)\nh = exp10.(range(-18, -8, length = 100))\n\nfor n = 1:3\n   local d = ((1.0 .+ h) .^ n .- 1.0) ./ h\n   plt.plot(h, d, \".\", label = \"y=x^\" * string(n))\nend\nplt.xlabel(\"h\")\nplt.ylabel(\"d\")\nplt.yscale(\"log\")\nplt.xscale(\"log\")\nplt.legend()\nplt.savefig(\"ch07-df2-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"(Image: )","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"以上の誤差も，非常に近い二つの数字を減じたときに現れる「桁落ち」の現象である． ▼ 2次方程式とは異なり，うまく回避する手段はない．hを小さく取りすぎないように注意する．","category":"page"},{"location":"ch07/#練習・数値微分","page":"第7回：■ 浮動小数点数","title":"▼ 練習・数値微分","text":"","category":"section"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"以下の関数の，指定された座標での微分係数を，上の例と同様に求めてみよ．","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"指数関数 y = expx  x = 0\n対数関数 y = logx  x = 1\n対数関数 y = logleft(1+xright)  x = 0  ．注: 関数 Base.log1p — Function を用いよ．\n三角関数 y = sinx  x = 1 ．注: 正しい微分係数は 0540302305868140 である．","category":"page"},{"location":"ch07/#近似比較演算子-isapprox","page":"第7回：■ 浮動小数点数","title":"■ 近似比較演算子 isapprox","text":"","category":"section"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"条件式 x == 1 は， 数 x が 1 と完全に一致することを判定するので， 数 x が丸め誤差を含むような場合に用いるのに適さない．","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"その代わりに，丸め誤差の基準を適当な数， 例えば，10^-6 をとって， 条件式 abs(x-1) < 1e-6 をもって，数 xが 1 に非常に近いことを判定するのが常套手段である．","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"x = 1 + 1e-8\nx == 0\nabs(x - 1) < 1e-6","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"Base.isapprox - Function","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"Julia には，数 a と b がほぼ等しいことを判定する 近似比較演算子 isapprox(a,b) が用意されているので， 必要に応じて用いるとよい． a と b との丸め誤差の程度を考慮して，比較を行う便利な関数である．","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"0.1 + 0.2 == 0.3\nisapprox(0.1 + 0.2, 0.3)","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"note: Note\n関数 isapprox(a,b) の片方の引数を 0 にする，例えば，isapprox(a,0) と書くと 「 a が近似的に 0 に等しい」ことの判定ではなく，a == 0 の等値の判定 （→ 値が等しい・異なる）の意味になる．この場合には，省略可能な引数である atol （絶対誤差，absolute tolerance）を追加で指定するとよい． atol には a のとりうる典型的な値の平方根を指定することが，よく行われる．詳しくは，関数 Base.isapprox - Function のマニュアルを参照せよ．","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"isapprox(1e-3, 0, atol = 1e-8)\nisapprox(1e-10, 0, atol = 1e-8)","category":"page"},{"location":"ch07/#2次方程式","page":"第7回：■ 浮動小数点数","title":"▼ 2次方程式","text":"","category":"section"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"2次方程式","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"x^2 - bx + c = 0","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"の解は，解の公式から，判別式 d = b^2-4c を用いて","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"beginaligned\nx_1  = dfracb+sqrtd2=dfracb+sqrtb^2-4c2 \nx_2  = dfracb-sqrtd2=dfracb-sqrtb^2-4c2\nendaligned","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"と求められるが，b と sqrtd が同程度のとき x_2 は「桁落ち」しやすい．","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"そこで，(b + sqrtb^2-4c) を分母分子に掛けて","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"x_21 = dfrac2cb+sqrtb^2-4c=dfraccx_1","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"のように変形してから計算する（「分子を有理化する」）．最後の項は，解と係数の関係 x_1x_2=c による．","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"note: Note\n解と係数の関係． x^2-bx+c=0 の解が x_1 x_2 であるとき，(x-x_1)(x-x_2) = x^2-(x_1 + x_2) x+ x_1 x_2 = x^2-bx+cであるから，末尾の２つを比較して，以下を得る．beginaligned\nb  = x_1 + x_2\nc  = x_1x_2\nendaligned","category":"page"},{"location":"ch07/#2次方程式：計算の例","page":"第7回：■ 浮動小数点数","title":"▼ 2次方程式：計算の例","text":"","category":"section"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"実例で見てみよう．","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"小さい正の数 h を用いて，alpha = 100+h と beta = 1+h を 解とする2次方程式を作る． 解と係数の関係から， 上の方程式において b = alpha + beta, c=alphabeta と定めればよい．","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"# h=logspace(-12,-1);\nh = exp10.(range(-12, -1, length = 50))\n\nalpha = 100.0 .+ h\nbeta = 1.0 .+ h;\nc = alpha .* beta;\nb = alpha .+ beta;","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"解の公式から，「大きいほうの解」 x1 を計算する．","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"x2s は解の公式から求めた「小さいほうの解」である．\nx2v は解と係数の関係から求めた「小さいほうの解」である．","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"d = b .* b - 4c;\nx1 = (b + sqrt.(d)) / 2;\nx2s = (b - sqrt.(d)) / 2;\nx2v = c ./ x1;","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"「大きいほうの解」について，正しい解との差を描く．","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"using PyPlot\nplt.figure() #hide\nplt.plot(h, x1 - alpha, \".\")\nplt.xlabel(\"h\")\nplt.ylabel(\"x1-alpha\")\nplt.xscale(\"log\")\nplt.ylim(-1e-13, 1e-13) # 調節せよ\nplt.savefig(\"ch07-quad1-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"(Image: )","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"「小さいほうの解」について，正しい解との差を描く．上に続けて","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"using PyPlot\nplt.figure() #hide\nplt.plot(h, x2s - beta, \".\", label = \"x2s\")\nplt.plot(h, x2v - beta, \"o\", label = \"x2v\")\nplt.xlabel(\"h\")\nplt.ylabel(\"x2-beta\")\nplt.xscale(\"log\")\nplt.legend()\nplt.ylim(-1e-14, 1e-14) # 調節せよ\nplt.savefig(\"ch07-quad2-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"(Image: )","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"「小さいほうの解」について，正しい解との差の絶対値（残余）を描く．上に続けて","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"using PyPlot\nplt.figure() #hide\nplt.plot(h, abs.(x2s - beta), \".\", label = \"x2s\")\nplt.plot(h, abs.(x2v - beta), \"o\", label = \"x2v\")\nplt.xlabel(\"h\")\nplt.ylabel(\"abs(x2-beta)\")\nplt.xscale(\"log\")\nplt.ylim(1e-18, 1e-13) # 調節せよ\nplt.yscale(\"log\")\nplt.legend()\nplt.savefig(\"ch07-quad3-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"(Image: )","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"解の公式から求めた「小さいほうの解」の残余が「あばれる」のに対して， 解と係数の関係から求めた小さいほうの解」の残余が「一定」である様子が見れる．","category":"page"},{"location":"ch07/#数でない数の判定","page":"第7回：■ 浮動小数点数","title":"■ 数でない数の判定","text":"","category":"section"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"Numeric Comparisons (section)","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"■ 0による除算で説明したように， IEEE754規格の浮動小数点数は， 「数でない数」 NaN, Inf, -Inf の3つを含んでいる． これらを判定する関数が用意されている．","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"Base.isfinite - Function\nBase.isinf - Function\nBase.isnan - Function","category":"page"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"for x in [0, 1, Inf, -Inf, NaN]\n   @show x\n   @show isfinite(x)\n   @show isinf(x)\n   @show isnan(x)\nend","category":"page"},{"location":"ch07/#今回のまとめ","page":"第7回：■ 浮動小数点数","title":"★今回のまとめ","text":"","category":"section"},{"location":"ch07/","page":"第7回：■ 浮動小数点数","title":"第7回：■ 浮動小数点数","text":"浮動小数点数\n有限小数・循環小数\n加減算における桁落ち・情報落ち\n近似比較演算子\n等差数列・等比数列\n数値微分\n数でない数","category":"page"},{"location":"LICENSE/#MIT-License","page":"MIT License","title":"MIT License","text":"","category":"section"},{"location":"LICENSE/","page":"MIT License","title":"MIT License","text":"Copyright (c) 2018–2023 Hiroharu Sugawara","category":"page"},{"location":"LICENSE/","page":"MIT License","title":"MIT License","text":"Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:","category":"page"},{"location":"LICENSE/","page":"MIT License","title":"MIT License","text":"The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.","category":"page"},{"location":"LICENSE/","page":"MIT License","title":"MIT License","text":"THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.","category":"page"},{"location":"ch10/#ch10","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"","category":"section"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"## ■ ベクトルに対する演算\n\nベクトルの演算としては，これまでに，以下を説明した．\n\n- ベクトルのスカラー倍\n- ベクトルどうしの和差\n- ベクトルを引数とする演算\n-- 絶対値\n-- 要素の和\n-- 要素の積\n-- 要素の平均値，標準偏差","category":"page"},{"location":"ch10/#ベクトルの線形結合からなる格子点","page":"第10回：行列・線形代数","title":"▶ ベクトルの線形結合からなる格子点","text":"","category":"section"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"複数のベクトルの線形結合とは， それらのベクトルのスカラー倍を加え合わせたものを，それらのベクトルの線形結合という．","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"二つのベクトル a_1=beginbmatrix 1  0 endbmatrix a_2=beginbmatrix 0  1 endbmatrix の「整数」係数の線形結合による格子点を描く．","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"さらに， b_1=beginbmatrix dfrac12  dfrac12 endbmatrix b_2=beginbmatrix dfrac12  -dfrac12 endbmatrix の「整数」係数の線形結合からなる格子点を重ねる．","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\na1 = [1, 0];\na2 = [0, 1];\nfor m = -3:3, n = -3:3\n   r = m * a1 + n * a2\n   plt.plot(r[1], r[2], \"bo\")\nend\n\nb1 = [1 / 2, 1 / 2];\nb2 = [1 / 2, -1 / 2];\nfor m = -3:3, n = -3:3\n   r = m * b1 + n * b2\n   plt.plot(r[1], r[2], \"r.\")\nend\n\nplt.axhline(0, color = \"k\", lw = 0.5)\nplt.axvline(0, color = \"k\", lw = 0.5)\nplt.savefig(\"ch10-lat1-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"(Image: )","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"どちらも正方格子（cubic lattice）であるが，座標系の取り方が異なる． 基底 b_1 b_2 で張られる格子点は， 基底 a_1 a_2 で張られる格子点の中央の点も含んでいることが観察できる．","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"今度は， c_1=beginbmatrix 1  0 endbmatrix c_2=beginbmatrix -dfrac12  dfracsqrt32 endbmatrix で張られる格子点を描いてみる． これは，六方格子（hexagonal lattice）と呼ばれる．","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n\nc1 = [1, 0];\nc2 = [-1 / 2, sqrt(3) / 2];\nfor m = -3:3, n = -3:3\n   r = m * c1 + n * c2\n   plt.plot(r[1], r[2], \"g.\")\nend\n\nplt.xlim(-3, 3)\nplt.ylim(-3, 3)\nplt.axhline(0, color = \"k\", lw = 0.5)\nplt.axvline(0, color = \"k\", lw = 0.5)\nplt.savefig(\"ch10-lat2-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"(Image: )","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"### ▼ ベクトルのスカラー倍，和差\n- 絶対値\n- 随伴\n- 転置","category":"page"},{"location":"ch10/#平面ベクトルの内積","page":"第10回：行列・線形代数","title":"■ 平面ベクトルの内積","text":"","category":"section"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"関数 dot(a,b) は，ベクトル a と b との「内積（inner product）」を返す．","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"中置き演算子 ⋅ を用いて a⋅b と書くこともできる． 「 ⋅ 」 は，バックスラッシュ \\ に続けて cdots と入力してから，TABキーを押すことによって入力できる． かな漢字変換システムで入力できる「・」（中黒=なかぐろ）とは，別の文字である．","category":"page"},{"location":"ch10/#平面ベクトルどうしのなす角を求める","page":"第10回：行列・線形代数","title":"▶ 平面ベクトルどうしのなす角を求める","text":"","category":"section"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"ベクトル a と bの内積は，a と b のなす角theta を用いて，以下のように定義される．","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"acdot b = leftvertarightvert leftvertbrightvert costheta","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"これから，theta を求めるには，次の式を用いればよい．","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"costheta = dfracacdot b leftvertarightvert leftvertbrightvert ","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"また，内積の定義から，自分自身の内積は，ノルムの二乗であることも分かる．","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"acdot a = leftvertarightvert^2","category":"page"},{"location":"ch10/#例：ベクトルどうしのなす角度を求める","page":"第10回：行列・線形代数","title":"▶ 例：ベクトルどうしのなす角度を求める","text":"","category":"section"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"上で出てきたベクトルのうち，a1, a2, c1, c2 のノルムは 1 である．","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"using LinearAlgebra\n#\na1 = [1, 0];\na2 = [0, 1];\nb1 = [1 / 2, 1 / 2];\nb2 = [1 / 2, -1 / 2];\nc1 = [1, 0];\nc2 = [-1 / 2, sqrt(3) / 2];\nnorm(a1)\nnorm(a2)\nnorm(c1)\nnorm(c2)","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"b1 と b2 のノルムは dfrac1sqrt2 である． 自分自身の内積の値と比較しよう","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"b1 ⋅ b1\nnorm(b1)\nnorm(b1)^2\nb1 ⋅ b1\nnorm(b2)\nnorm(b2)^2","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"内積から算出した costhetaから角度 theta を得るには，関数 acos() を用いる． 関数 acos(r) は cos theta = r となる theta をラジアンで返す． 関数 acosd(r) は，theta を角度で返す．","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"これらのベクトルのなす角度を算出しよう． a1 と a2，および，b1 と b2 は直交している． a1 と b1 は，45° をなしている． c1 と c2 は，120° をなしている，ことが計算できた．","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"acosd(a1 ⋅ a2)\nacosd(b1 ⋅ b2 / norm(b1) / norm(b2))\nacosd(a1 ⋅ b1 / norm(a1) / norm(b1))\nacosd(c1 ⋅ c2)","category":"page"},{"location":"ch10/#タプル","page":"第10回：行列・線形代数","title":"■ タプル","text":"","category":"section"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"タプル（tuple）は，複数の値をカンマ , で区切って並べ，括弧 () で囲んだものである． ベクトルと似たように使えるが，要素を更新することはできない．","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"# 要素 1つのタプル\n(1,)\n# 要素 2つのタプル\n(1, 2)\n# 要素 3つのタプル\na = (1, 2, 3)\n# タプルの長さ\nlength(a)\n# タプルの要素\na[2]\n# 更新はできない\na[2] = 3 # => MethodError","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"関数には，複数の値を返すものがある．このとき，タプルが用いられる．","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"例えば，divrem(x,d) は，div(x,d) と rem(x,d) の二つの値を返す．","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"divrem(5, 3)","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"タプルを右辺において，複数の変数に同時に代入できる．","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"x, y = (1, 2, 3)\nx\ny","category":"page"},{"location":"ch10/#行列","page":"第10回：行列・線形代数","title":"■ 行列","text":"","category":"section"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"要素を ; で区切って列挙したものを， 大かっこ [] で囲むと，行列を作ることができる．","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"a = [11 12 13 14; 21 22 23 24; 31 32 33 34]","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"3行 4列の行列","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"■ ベクトルも，■ 行列も，「配列（array）」として表されている． ベクトルと同じ関数が用いられる．","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"# 寸法 => タプル\nsize(a)\n# 第1軸 = 列の寸法\nsize(a, 1)\n# 第2軸 = 行の寸法\nsize(a, 2)\n# 全要素数\nlength(a)","category":"page"},{"location":"ch10/#行列の転置","page":"第10回：行列・線形代数","title":"■ 行列の転置","text":"","category":"section"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"transpose(a) は，行列 a を転置する．すなわち，行と列を入れ替える．","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"a = [11 12 13 14; 21 22 23 24; 31 32 33 34]\nsize(a)\nb = transpose(a)\nsize(b)","category":"page"},{"location":"ch10/#行列のスカラー倍・スカラーの和差","page":"第10回：行列・線形代数","title":"▶ 行列のスカラー倍・スカラーの和差","text":"","category":"section"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"以下，しばらく，2x2 の正方行列を例に説明する．","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"a = [11 12; 21 22]\na * 2\na .+ 2\na .- 2","category":"page"},{"location":"ch10/#行列に列ベクトルを加減","page":"第10回：行列・線形代数","title":"▶ 行列に列ベクトルを加減","text":"","category":"section"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"a = [11 12; 21 22]\nv = [1, -1]\na .+ v\na .- v","category":"page"},{"location":"ch10/#行列どうしの加減","page":"第10回：行列・線形代数","title":"▶ 行列どうしの加減","text":"","category":"section"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"a = [11 12; 21 22]\nb = a * 2\na + b\na - b","category":"page"},{"location":"ch10/#添字を用いた行列の要素の読み書き","page":"第10回：行列・線形代数","title":"■ 添字を用いた行列の要素の読み書き","text":"","category":"section"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"行列の添字は， 第1軸（列）と第2軸（行）の番号を，カンマ , で区切って並べ，大かっこ [] で囲んだものである．","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"ベクトルと同じように，添字で示された要素の読み出し， 添字で示された要素の書き換えができる．","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"# 添字による要素の読み出し\na[2, 2]\n# 行列の要素の更新\na[1, 2] = 30\na","category":"page"},{"location":"ch10/#部分行列","page":"第10回：行列・線形代数","title":"■ 部分行列","text":"","category":"section"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"a = [11 12 13 14; 21 22 23 24; 31 32 33 34]\n# 列を取り出す\na[:, 2]\n# 行を取り出す\na[2, :]\n# 部分行列\na[1:2, 1:2]\na[2:3, 2:3]","category":"page"},{"location":"ch10/#行列に入れた点座標で図形を描画する","page":"第10回：行列・線形代数","title":"▶ 行列に入れた点座標で図形を描画する","text":"","category":"section"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n\nxy = [1 2 2 1; 1 1 3 1]\n@show xy\nplt.plot(xy[1, :], xy[2, :])\nxy = xy .+ [1 / 2, 1 / 2]\nplt.plot(xy[1, :], xy[2, :])\nplt.xlim(0, 4)\nplt.ylim(0, 4)\nplt.savefig(\"ch10-fig1-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"(Image: )","category":"page"},{"location":"ch10/#行列とベクトルの積","page":"第10回：行列・線形代数","title":"■ 行列とベクトルの積","text":"","category":"section"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"a = [11 12; 21 22]\nv = [1, -1]\na * v","category":"page"},{"location":"ch10/#回転行列とベクトルの積","page":"第10回：行列・線形代数","title":"▶ 回転行列とベクトルの積","text":"","category":"section"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"以下の形の行列を，平面空間に対する回転行列という．","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"R(theta) =\nbeginbmatrix costheta  -sintheta \nsintheta  cos theta endbmatrix","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"回転行列とベクトルの積は， そのベクトルを，原点の周りに 反時計方向に角 theta だけ回転する写像に対応する．","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"x^prime = R(theta) x","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"# 回転行列\nr15 = [cosd(15) -sind(15); sind(15) cosd(15)]\nxy = [1, 0]\nxy = r15 * xy\nxy = r15 * xy","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"これらを描こう．軌跡は円を描いた．","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n\nr15 = [cosd(15) -sind(15); sind(15) cosd(15)]\nxy = [1, 0]\n\nfor i = 0:20\n   global xy\n   plt.plot(xy[1], xy[2], \"o\")\n   xy = r15 * xy\nend\n\nplt.xlim(-1.2, 1.2)\nplt.ylim(-1.2, 1.2)\nplt.axhline(0, color = \"k\", lw = 0.5)\nplt.axvline(0, color = \"k\", lw = 0.5)\nplt.savefig(\"ch10-rot1-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"(Image: )","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"原点以外の点 c の周りで回転する場合は，回転の中心をずらして，","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"beginaligned\n(x^prime-c)  = R(theta) (x-c) \nx^prime  = c + R(theta) (x-c)\nendaligned","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"とすればよい．","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n\nr15 = [cosd(15) -sind(15); sind(15) cosd(15)]\nxy = [1, 0]\nc = [1 / 2, 1 / 2]\n\nfor i = 0:20\n   global xy\n   plt.plot(xy[1], xy[2], \"o\")\n   xy = c + r15 * (xy - c)\nend\n\nplt.axvline(c[1], color = \"k\", lw = 0.5)\nplt.axhline(c[2], color = \"k\", lw = 0.5)\n\nplt.xlim(-1, 2)\nplt.ylim(-1, 2)\nplt.savefig(\"ch10-rot2-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"(Image: )","category":"page"},{"location":"ch10/#行列と行列の積","page":"第10回：行列・線形代数","title":"■ 行列と行列の積","text":"","category":"section"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"a = [1 2; 3 4]\nb = [5 6; 7 8]\na * b","category":"page"},{"location":"ch10/#座標を行列に格納した図形を回転する","page":"第10回：行列・線形代数","title":"▶ 座標を行列に格納した図形を回転する","text":"","category":"section"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\nr15 = [cosd(15) -sind(15); sind(15) cosd(15)]\nxy = [1 2 2 1; 1 1 3 1]\n\nfor i = 0:20\n   global xy\n   plt.plot(xy[1, :], xy[2, :])\n   xy = r15 * xy\nend\n\nplt.xlim(-4, 4)\nplt.ylim(-4, 4)\nplt.axhline(0, color = \"k\", lw = 0.5)\nplt.axvline(0, color = \"k\", lw = 0.5)\nplt.savefig(\"ch10-rot3-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"(Image: )","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"回転中心をずらしてみる","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"plt.axes().set_aspect(\"equal\")\n\nr15 = [cosd(15) -sind(15); sind(15) cosd(15)]\nxy = [1 2 2 1; 1 1 3 1]\nc = [1 / 2, 1 / 2]\n\nfor i = 0:20\n   global xy\n   plt.plot(xy[1, :], xy[2, :])\n   xy = c .+ r15 * (xy .- c)\nend\n\nplt.axvline(c[1], color = \"k\", lw = 0.5)\nplt.axhline(c[2], color = \"k\", lw = 0.5)\n\nplt.xlim(-4, 4)\nplt.ylim(-4, 4)\nplt.savefig(\"ch10-rot4-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"(Image: )","category":"page"},{"location":"ch10/#いろいろな行列の生成","page":"第10回：行列・線形代数","title":"■ いろいろな行列の生成","text":"","category":"section"},{"location":"ch10/#要素が-0-の行列を作る","page":"第10回：行列・線形代数","title":"■ 要素が 0 の行列を作る","text":"","category":"section"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"Base.zeros — Function","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"関数 zeros は，要素が零 0 の行列を作るのに使える．","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"関数 zeros(n,m) は，要素の型が浮動小数点で，寸法 (n,m) の行列を作る．\n関数 zeros(T, n,m) は，要素の型が T で，寸法 (n,m) の行列を作る．","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"zeros(3, 4) # 要素は浮動小数点\nzeros(Float64, 3, 4) # 上と同じ\nzeros(Int64, 3, 4) # 要素は整数","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"行列 a と同じ寸法の 0 ベクトルを作るには，","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"a = [11 12 13 14; 21 22 23 24; 31 32 33 34]\nzeros(Int64, size(a))\nzeros(Float64, size(a))","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"関数 zero.() を以下のように用いれば 行列 a の要素の型と同じ要素の型を持ち，a と寸法が等しい 0 ベクトルを作れる．","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"a = [11 12 13 14; 21 22 23 24; 31 32 33 34]\nzero.(a)","category":"page"},{"location":"ch10/#要素が-1-の行列を作る","page":"第10回：行列・線形代数","title":"■ 要素が 1 の行列を作る","text":"","category":"section"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"Base.ones — Function","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"関数 ones は，要素が零 1 の行列を作るのに使える．","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"関数 ones(n,m) は，要素の型が浮動小数点で，寸法 (n,m) の行列を作る．\n関数 ones(T, n,m) は，要素の型が T で，寸法 (n,m) の行列を作る．","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"ones(3, 4) # 要素は浮動小数点\nones(Float64, 3, 4) # 上と同じ\nones(Int64, 3, 4) # 要素は整数","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"行列 a と同じ寸法の 1 行列を作るには，","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"a = [11 12 13 14; 21 22 23 24; 31 32 33 34]\nones(Int64, size(a))\nones(Float64, size(a))","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"関数 one.() を以下のように用いれば 行列 a の要素の型と同じ要素の型を持ち，a と寸法が等しい 1 行列を作れる．","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"a = [11 12 13 14; 21 22 23 24; 31 32 33 34]\none.(a)","category":"page"},{"location":"ch10/#対角要素を指定して，正方行列をつくる","page":"第10回：行列・線形代数","title":"■ 対角要素を指定して，正方行列をつくる","text":"","category":"section"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"using LinearAlgebra\nDiagonal([1, 2, 3])","category":"page"},{"location":"ch10/#疑似乱数を要素とする行列を作る","page":"第10回：行列・線形代数","title":"■ 疑似乱数を要素とする行列を作る","text":"","category":"section"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"rand(3, 3)","category":"page"},{"location":"ch10/#ベクトルをまとめて行列を作る","page":"第10回：行列・線形代数","title":"■ ベクトルをまとめて行列を作る","text":"","category":"section"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"a = [1, 2]\nb = [3, 4]\nc = [5, 6]\n[a b c]\nm = hcat(a, b, c)\nsize(m)","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"さらに転置をとろう．","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"mt = transpose(m)\nsize(mt)","category":"page"},{"location":"ch10/#内包表現を用いて行列を作る","page":"第10回：行列・線形代数","title":"● 内包表現を用いて行列を作る","text":"","category":"section"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"[[t, t .^ 2] for t in [0, 2, 4]]\nhcat([[t, t .^ 2] for t in [0, 2, 4]]...)","category":"page"},{"location":"ch10/#楕円を描く・回転する","page":"第10回：行列・線形代数","title":"▶ 楕円を描く・回転する","text":"","category":"section"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n\nts = 0:pi/18:2pi\nxs = 2 * cos.(ts)\nys = sin.(ts)\nxy = transpose(hcat(xs, ys))\nplt.plot(xy[1, :], xy[2, :])\n\nplt.xlim(-2.2, 2.2)\nplt.ylim(-2.2, 2.2)\nplt.savefig(\"ch10-rot5-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"(Image: )","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"note: Note\n楕円の座標を含む行列 xy を作るのに，以下のように● 内包表記を使ってもよい．xy=hcat([ [2*cos.(t), sin(t)] for t=0:pi/18:2pi]...)","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"回転する","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n\nr15 = [cosd(15) -sind(15); sind(15) cosd(15)]\nts = 0:pi/18:2pi\nxy = transpose(hcat(2 * cos.(ts), sin.(ts)))\n\nfor i = 0:5\n   global xy\n   plt.plot(xy[1, :], xy[2, :])\n   xy = r15 * xy\nend\n\nplt.savefig(\"ch10-rot6-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"(Image: )","category":"page"},{"location":"ch10/#行列式と逆行列","page":"第10回：行列・線形代数","title":"■ 行列式と逆行列","text":"","category":"section"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"a = [1 2; 2 3]\ndet(a) # 行列式\ninv(a) # 逆行列\na^(-1) # 逆行列","category":"page"},{"location":"ch10/#行列の商（2x2-行列）","page":"第10回：行列・線形代数","title":"■ 行列の商（2x2 行列）","text":"","category":"section"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"行列 Aとベクトル x に対して，x=Ay を満たすようなベクトル yを，xをAで割った商という．商を求める演算が用意されている．この演算は，Aの逆行列を計算するよりも，計算コストの上で有利である．","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"a = [1 2; 2 3]\nv = [1, 1]\na \\ v\nw = [3, 5]\na \\ w","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"行列 A が正則でない（逆行列が存在しない）場合には，例外が発生する．","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"c = [1 2; 2 4]\ndet(c)\nc \\ v # => SingularException","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"同様に，行列 X に対して，X=AY を満たすような行列 Y を，X を A で割った商という．","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"b = [1 3; 1 5]\na \\ b","category":"page"},{"location":"ch10/#楕円を，逆に回転する","page":"第10回：行列・線形代数","title":"▶ 楕円を，逆に回転する","text":"","category":"section"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"行列の商を用いて，楕円を逆回転してみよう．","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"using PyPlot\nplt.figure() #hide\nplt.axes().set_aspect(\"equal\")\n\nr15 = [cosd(15) -sind(15); sind(15) cosd(15)]\nts = 0:pi/18:2pi\nxy = transpose(hcat(2 * cos.(ts), sin.(ts)))\n\nfor i = 0:5\n   global xy\n   plt.plot(xy[1, :], xy[2, :])\n   xy = r15 \\ xy\nend\n\nplt.savefig(\"ch10-rot7-plot.svg\"); nothing; #hide\nplt.close(\"all\") #hide","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"(Image: )","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"行列式が 0 の行列は，正則ではない","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"a = [1 2; 2 4]\ndet(a)\nv = [1, 1]\n# 例外を発生する\na \\ v","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"# 例外を発生する\ninv(a)","category":"page"},{"location":"ch10/#空間ベクトル：なす角を求める","page":"第10回：行列・線形代数","title":"▶ 空間ベクトル：なす角を求める","text":"","category":"section"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"空間ベクトルとは，寸法 3 のベクトルである． 内積が 0 なら，それらのベクトルは直交である．","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"例: 以下の３つのベクトルが，互いに直行することを示せ．","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"using LinearAlgebra\n#\na = [1 / 2, 1 / 2 + sqrt(2) / 4, 1 / 2 - sqrt(2) / 4]\nb = [-1 / 2, 1 / 2 - sqrt(2) / 4, 1 / 2 + sqrt(2) / 4]\nc = [1 / sqrt(2), -1 / 2, 1 / 2]\nnorm(a)\nnorm(b)\nnorm(c)\ndot(a, b)\na ⋅ b\nb ⋅ c\nc ⋅ a","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"二つのベクトルのなす角を求めよ．","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"a = [-3, 1, 2]\nb = [2, -3, 1]\nab = a ⋅ b\nna = norm(a)\nnb = norm(b)\nr = ab / na / nb\n# ラジアン単位\nacos(r)\n# 角度単位\nacosd(r)\n# 一行で書ける\nacosd(a ⋅ b / norm(a) / norm(b))","category":"page"},{"location":"ch10/#空間ベクトルの外積","page":"第10回：行列・線形代数","title":"■ 空間ベクトルの外積","text":"","category":"section"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"関数 cross(a,b) は，空間ベクトル a と b との外積または「ベクトル積（outer product）」を返す．","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"中置き演算子 × を用いて a×b と書く こともできる． × は，バックスラッシュ \\ に times と入力してから， TABキーを押すことによって入力できる． かな漢字変換システムで入力できる「✕」 とは，別の文字である．","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"外積 atimes b の向きは，a から b へ回転したとき，右ねじが進む方向である．","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"外積 atimes b の大きさは，a と b のなす角 theta を用いて，以下のように定義される． これは，ベクトル a と b がなす平行四辺形の面積である．","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"leftvert atimes brightvert = leftvertarightvert leftvertbrightvert sintheta","category":"page"},{"location":"ch10/#空間座標の基本単位ベクトル","page":"第10回：行列・線形代数","title":"▶ 空間座標の基本単位ベクトル","text":"","category":"section"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"a = [1, 0, 0]\nb = [0, 1, 0]\nc = [0, 0, 1]\ncross(a, b)\n# a×b = c\na × b\n# b×c = a\nb × c\n# c×a = b\nc × a","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"別の正規直交系の例","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"a = [1 / 2, 1 / 2 + sqrt(2) / 4, 1 / 2 - sqrt(2) / 4]\nb = [-1 / 2, 1 / 2 - sqrt(2) / 4, 1 / 2 + sqrt(2) / 4]\nc = [1 / sqrt(2), -1 / 2, 1 / 2]\n# a×b = c\na × b\n# b×c = a\nb × c\n# c×a = b\nc × a","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"ベクトル３重積","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"３つの空間ベクトルに対して，一般に，以下が成り立つ．","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"atimes (b times c) = (acdotc)b - (acdot b)c","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"例： 具体的なベクトルの例で，上式が成り立つことを示せ．","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"a = [-3, 1, 2]\nb = [2, -3, 1]\nc = [1, 2, -3]\n# 左辺\nlhs = a × (b × c)\n# 右辺\nrhs = (a ⋅ c) * b - (a ⋅ b) * c","category":"page"},{"location":"ch10/#行列の商（3x3-行列）","page":"第10回：行列・線形代数","title":"▶ 行列の商（3x3 行列）","text":"","category":"section"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"行列 A と行列（またはベクトル） Yに対して， 商 A\\Y は，AX-Yの最小二乗ノルムが最小となる行列（またはベクトル） X を返す． 行列 A が正則なら，A の逆行列を 左から Y に乗じた行列（またはベクトル）と一致する．","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"#\na = [-3, 1, 2]\nb = [2, -3, 1]\nw = [a b]\nc = [1, 2, -3]\nv = w \\ c\nw * v - c","category":"page"},{"location":"ch10/#行列の階数（ランク）","page":"第10回：行列・線形代数","title":"▶ 行列の階数（ランク）","text":"","category":"section"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"関数 rank(a) は，行列 a の階数（ランク，rank）を返す．","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"a = [1 / 2, 1 / 2 + sqrt(2) / 4, 1 / 2 - sqrt(2) / 4]\nb = [-1 / 2, 1 / 2 - sqrt(2) / 4, 1 / 2 + sqrt(2) / 4]\nc = [1 / sqrt(2), -1 / 2, 1 / 2]\nv = [a b c]\nrank(v)\n#\na = [-3, 1, 2]\nb = [2, -3, 1]\nc = [1, 2, -3]\nv = [a b c]\nrank(v)","category":"page"},{"location":"ch10/#行列の固有値・固有ベクトル","page":"第10回：行列・線形代数","title":"▼ 行列の固有値・固有ベクトル","text":"","category":"section"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"Ax = lambda x","category":"page"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"a = [4 1; 2 3]\n#\nusing LinearAlgebra\n# 固有値\nlam = eigvals(a)\n# 固有ベクトル\nevs = eigvecs(a)\nevs[:, 1]\nevs[:, 2]\n# 確認する a x - lambda x == 0 になるべき\na * evs[:, 1] - lam[1] * evs[:, 1]\na * evs[:, 2] - lam[2] * evs[:, 2]","category":"page"},{"location":"ch10/#今回のまとめ","page":"第10回：行列・線形代数","title":"★ 今回のまとめ","text":"","category":"section"},{"location":"ch10/","page":"第10回：行列・線形代数","title":"第10回：行列・線形代数","text":"ベクトルの内積\n行列の生成\n行列に対する関数\n行列とベクトルの演算\n行列と行列の演算\n部分行列\n2次元の回転行列","category":"page"},{"location":"","page":"Home","title":"Home","text":"CurrentModule = memoProgClass2023w","category":"page"},{"location":"#年度版","page":"Home","title":"2023年度版","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"この内容は，2023年度後期の授業（2023年10月から2024年1月）向けに公開するものです．","category":"page"},{"location":"","page":"Home","title":"Home","text":"実行結果は，Julia 1.x （→ FAQ: Julia Releases ）により出力されたものです．","category":"page"},{"location":"#Preface","page":"Home","title":"Preface","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"Pages=[\n\t\"ch00.md\",\n\t\"LICENSE.md\",\n\t\"LICENSEja.md\"\n]","category":"page"},{"location":"#Main","page":"Home","title":"Main","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"Pages=[\n\t\"ch01.md\",\n\t\"ch02.md\",\n\t\"ch03.md\",\n\t\"ch04.md\",\n\t\"ch05.md\",\n\t\"ch06.md\",\n\t\"ch06.md\",\n\t\"ch07.md\",\n\t\"ch08.md\",\n\t\"ch08.md\",\n\t\"ch09.md\",\n\t\"ch10.md\",\n\t\"ch11.md\",\n   \"ch12.md\",\n\t\"ch13.md\"\n]","category":"page"},{"location":"#Appendices","page":"Home","title":"Appendices","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"Pages=[\n\t\"ch0a.md\",\n\t\"ch0b.md\"\n]","category":"page"}]
}
